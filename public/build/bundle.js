"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function i(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e){const n={};e=new Set(e);for(const i in t)e.has(i)||"$"===i[0]||(n[i]=t[i]);return n}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(){return f("")}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const y=["width","height"];function g(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)null==e[i]?t.removeAttribute(i):"style"===i?t.style.cssText=e[i]:"__value"===i?t.value=t[i]=e[i]:n[i]&&n[i].set&&-1===y.indexOf(i)?t[i]=e[i]:m(t,i,e[i])}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}function v(t,e,n){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e)return void(i.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}let _;function x(t){_=t}const w=[],S=[];let k=[];const I=[],A=Promise.resolve();let T=!1;function M(t){k.push(t)}const E=new Set;let C=0;function N(){if(0!==C)return;const t=_;do{try{for(;C<w.length;){const t=w[C];C++,x(t),L(t.$$)}}catch(t){throw w.length=0,C=0,t}for(x(null),w.length=0,C=0;S.length;)S.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];E.has(e)||(E.add(e),e())}k.length=0}while(w.length);for(;I.length;)I.pop()();T=!1,E.clear(),x(t)}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}const O=new Set;let D;function $(){D={r:0,c:[],p:D}}function B(){D.r||r(D.c),D=D.p}function F(t,e){t&&t.i&&(O.delete(t),t.i(e))}function P(t,e,n,i){if(t&&t.o){if(O.has(t))return;O.add(t),D.c.push((()=>{O.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}else i&&i()}function V(t){t&&t.c()}function U(t,e,i,a){const{fragment:o,after_update:c}=t.$$;o&&o.m(e,i),a||M((()=>{const e=t.$$.on_mount.map(n).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),c.forEach(M)}function R(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];k.forEach((i=>-1===t.indexOf(i)?e.push(i):n.push(i))),n.forEach((t=>t())),k=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(w.push(t),T||(T=!0,A.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,n,s,a,o,c,l,h=[-1]){const f=_;x(e);const d=e.$$={fragment:null,ctx:[],props:c,update:t,not_equal:o,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:i(),dirty:h,skip_bound:!1,root:n.target||f.$$.root};l&&l(d.root);let p=!1;if(d.ctx=s?s(e,n.props||{},((t,n,...i)=>{const r=i.length?i[0]:n;return d.ctx&&o(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),p&&j(e,t)),n})):[],d.update(),p=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(u)}else d.fragment&&d.fragment.c();n.intro&&F(e.$$.fragment),U(e,n.target,n.anchor,n.customElement),N()}x(f)}class q{$destroy(){R(this,1),this.$destroy=t}$on(e,n){if(!s(n))return t;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const t=i.indexOf(n);-1!==t&&i.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function W(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Y(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function H(t){let e,n,i;function r(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<0?r=e+1:s=e}while(r<s)}return r}return 2!==t.length?(e=W,n=(e,n)=>W(t(e),n),i=(e,n)=>t(e)-n):(e=t===W||t===Y?t:G,n=t,i=t),{left:r,center:function(t,e,n=0,s=t.length){const a=r(t,e,n,s-1);return a>n&&i(t[a-1],e)>-i(t[a],e)?a-1:a},right:function(t,i,r=0,s=t.length){if(r<s){if(0!==e(i,i))return s;do{const e=r+s>>>1;n(t[e],i)<=0?r=e+1:s=e}while(r<s)}return r}}}function G(){return 0}function K(t){return null===t?NaN:+t}const Q=H(W).right;H(K).center;var X=Q;function J(t,e){let n=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&++n;else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(r=+r)>=r&&++n}return n}function Z(t){return 0|t.length}function tt(t){return!(t>0)}function et(t){return"object"!=typeof t||"length"in t?t:Array.from(t)}function nt(t,e){var n=0,i=0;return Float64Array.from(t,void 0===e?t=>n+=+t||0:r=>n+=+e(r,i++,t)||0)}function rt(t,e){let n,i=0,r=0,s=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(n=e-r,r+=n/++i,s+=n*(e-r));else{let a=-1;for(let o of t)null!=(o=e(o,++a,t))&&(o=+o)>=o&&(n=o-r,r+=n/++i,s+=n*(o-r))}if(i>1)return s/(i-1)}function st(t,e){const n=rt(t,e);return n?Math.sqrt(n):n}function at(t,e){let n,i;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=i=e):(n>e&&(n=e),i<e&&(i=e)));else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(void 0===n?s>=s&&(n=i=s):(n>s&&(n=s),i<s&&(i=s)))}return[n,i]}class ot{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const r=e[i],s=t+r,a=Math.abs(t)<Math.abs(r)?t-(s-r):r-(s-t);a&&(e[n++]=a),t=s}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,r=this._n,s=0;if(r>0){for(s=t[--r];r>0&&(e=s,n=t[--r],s=e+n,i=n-(s-e),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(n=2*i,e=s+n,n==e-s&&(s=e))}return s}}class ct extends Map{constructor(t,e=dt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(ut(this,t))}has(t){return super.has(ut(this,t))}set(t,e){return super.set(ht(this,t),e)}delete(t){return super.delete(ft(this,t))}}class lt extends Set{constructor(t,e=dt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const e of t)this.add(e)}has(t){return super.has(ut(this,t))}add(t){return super.add(ht(this,t))}delete(t){return super.delete(ft(this,t))}}function ut({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function ht({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function ft({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function dt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function pt(t){return t}function mt(t,...e){return bt(t,pt,pt,e)}function yt(t,e,...n){return bt(t,pt,e,n)}function gt(t,e,...n){return bt(t,Array.from,e,n)}function bt(t,e,n,i){return function t(r,s){if(s>=i.length)return n(r);const a=new ct,o=i[s++];let c=-1;for(const t of r){const e=o(t,++c,r),n=a.get(e);n?n.push(t):a.set(e,[t])}for(const[e,n]of a)a.set(e,t(n,s));return e(a)}(t,0)}function vt(t,...e){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&2!==n.length||e.length>1){const i=Uint32Array.from(t,((t,e)=>e));return e.length>1?(e=e.map((e=>t.map(e))),i.sort(((t,n)=>{for(const i of e){const e=xt(i[t],i[n]);if(e)return e}}))):(n=t.map(n),i.sort(((t,e)=>xt(n[t],n[e])))),function(t,e){return Array.from(e,(e=>t[e]))}(t,i)}return t.sort(_t(n))}function _t(t=W){if(t===W)return xt;if("function"!=typeof t)throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||0===i?i:(0===t(n,n))-(0===t(e,e))}}function xt(t,e){return(null==t||!(t>=t))-(null==e||!(e>=e))||(t<e?-1:t>e?1:0)}function wt(t,e,n){return(2!==e.length?vt(yt(t,e,n),(([t,e],[n,i])=>W(e,i)||W(t,n))):vt(mt(t,n),(([t,n],[i,r])=>e(n,r)||W(t,i)))).map((([t])=>t))}const St=Math.sqrt(50),kt=Math.sqrt(10),It=Math.sqrt(2);function At(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=St?10:s>=kt?5:s>=It?2:1;let o,c,l;return r<0?(l=Math.pow(10,-r)/a,o=Math.round(t*l),c=Math.round(e*l),o/l<t&&++o,c/l>e&&--c,l=-l):(l=Math.pow(10,r)*a,o=Math.round(t/l),c=Math.round(e/l),o*l<t&&++o,c*l>e&&--c),c<o&&.5<=n&&n<2?At(t,e,2*n):[o,c,l]}function Tt(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const i=e<t,[r,s,a]=i?At(e,t,n):At(t,e,n);if(!(s>=r))return[];const o=s-r+1,c=new Array(o);if(i)if(a<0)for(let t=0;t<o;++t)c[t]=(s-t)/-a;else for(let t=0;t<o;++t)c[t]=(s-t)*a;else if(a<0)for(let t=0;t<o;++t)c[t]=(r+t)/-a;else for(let t=0;t<o;++t)c[t]=(r+t)*a;return c}function Mt(t,e,n){return At(t=+t,e=+e,n=+n)[2]}function Et(t,e,n){n=+n;const i=(e=+e)<(t=+t),r=i?Mt(e,t,n):Mt(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Ct(t){return Math.max(1,Math.ceil(Math.log(J(t))/Math.LN2)+1)}function Nt(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function Lt(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n<e||void 0===n&&e>=e)&&(n=e,i=r);else for(let s of t)null!=(s=e(s,++r,t))&&(n<s||void 0===n&&s>=s)&&(n=s,i=r);return i}function Ot(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function Dt(t,e){let n,i=-1,r=-1;if(void 0===e)for(const e of t)++r,null!=e&&(n>e||void 0===n&&e>=e)&&(n=e,i=r);else for(let s of t)null!=(s=e(s,++r,t))&&(n>s||void 0===n&&s>=s)&&(n=s,i=r);return i}function $t(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=void 0===r?xt:_t(r);i>n;){if(i-n>600){const s=i-n+1,a=e-n+1,o=Math.log(s),c=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*c*(s-c)/s)*(a-s/2<0?-1:1);$t(t,e,Math.max(n,Math.floor(e-a*c/s+l)),Math.min(i,Math.floor(e+(s-a)*c/s+l)),r)}const s=t[e];let a=n,o=i;for(Bt(t,n,e),r(t[i],s)>0&&Bt(t,n,i);a<o;){for(Bt(t,a,o),++a,--o;r(t[a],s)<0;)++a;for(;r(t[o],s)>0;)--o}0===r(t[n],s)?Bt(t,n,o):(++o,Bt(t,o,i)),o<=e&&(n=o+1),e<=o&&(i=o-1)}return t}function Bt(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Ft(t,e=W){let n,i=!1;if(1===e.length){let r;for(const s of t){const t=e(s);(i?W(t,r)>0:0===W(t,t))&&(n=s,r=t,i=!0)}}else for(const r of t)(i?e(r,n)>0:0===e(r,r))&&(n=r,i=!0);return n}function Pt(t,e,n){if(t=Float64Array.from(function*(t,e){if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(yield e);else{let n=-1;for(let i of t)null!=(i=e(i,++n,t))&&(i=+i)>=i&&(yield i)}}(t,n)),(i=t.length)&&!isNaN(e=+e)){if(e<=0||i<2)return Ot(t);if(e>=1)return Nt(t);var i,r=(i-1)*e,s=Math.floor(r),a=Nt($t(t,s).subarray(0,s+1));return a+(Ot(t.subarray(s+1))-a)*(r-s)}}function Vt(t,e,n=K){if((i=t.length)&&!isNaN(e=+e)){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t);return a+(+n(t[s+1],s+1,t)-a)*(r-s)}}function Ut(t,e,n){const i=J(t),r=Pt(t,.75)-Pt(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function Rt(t,e,n){const i=J(t),r=st(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function jt(t,e){let n=0,i=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,i+=e);else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n}function zt(t,e){return Pt(t,.5,e)}function qt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Wt(t,e){const n=new ct;if(void 0===e)for(let e of t)null!=e&&e>=e&&n.set(e,(n.get(e)||0)+1);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&r>=r&&n.set(r,(n.get(r)||0)+1)}let i,r=0;for(const[t,e]of n)e>r&&(r=e,i=t);return i}function Yt(t,e){return[t,e]}function Ht(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);++i<r;)s[i]=t+i*n;return s}function Gt(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function Kt(t){if("function"!=typeof t[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(t).reverse()}function Qt(t){return t}var Xt=1,Jt=2,Zt=3,te=4,ee=1e-6;function ne(t){return"translate("+t+",0)"}function ie(t){return"translate(0,"+t+")"}function re(t){return e=>+t(e)}function se(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function ae(){return!this.__axis}function oe(t,e){var n=[],i=null,r=null,s=6,a=6,o=3,c="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,l=t===Xt||t===te?-1:1,u=t===te||t===Jt?"x":"y",h=t===Xt||t===Zt?ne:ie;function f(f){var d=null==i?e.ticks?e.ticks.apply(e,n):e.domain():i,p=null==r?e.tickFormat?e.tickFormat.apply(e,n):Qt:r,m=Math.max(s,0)+o,y=e.range(),g=+y[0]+c,b=+y[y.length-1]+c,v=(e.bandwidth?se:re)(e.copy(),c),_=f.selection?f.selection():f,x=_.selectAll(".domain").data([null]),w=_.selectAll(".tick").data(d,e).order(),S=w.exit(),k=w.enter().append("g").attr("class","tick"),I=w.select("line"),A=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(k),I=I.merge(k.append("line").attr("stroke","currentColor").attr(u+"2",l*s)),A=A.merge(k.append("text").attr("fill","currentColor").attr(u,l*m).attr("dy",t===Xt?"0em":t===Zt?"0.71em":"0.32em")),f!==_&&(x=x.transition(f),w=w.transition(f),I=I.transition(f),A=A.transition(f),S=S.transition(f).attr("opacity",ee).attr("transform",(function(t){return isFinite(t=v(t))?h(t+c):this.getAttribute("transform")})),k.attr("opacity",ee).attr("transform",(function(t){var e=this.parentNode.__axis;return h((e&&isFinite(e=e(t))?e:v(t))+c)}))),S.remove(),x.attr("d",t===te||t===Jt?a?"M"+l*a+","+g+"H"+c+"V"+b+"H"+l*a:"M"+c+","+g+"V"+b:a?"M"+g+","+l*a+"V"+c+"H"+b+"V"+l*a:"M"+g+","+c+"H"+b),w.attr("opacity",1).attr("transform",(function(t){return h(v(t)+c)})),I.attr(u+"2",l*s),A.attr(u,l*m).text(p),_.filter(ae).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Jt?"start":t===te?"end":"middle"),_.each((function(){this.__axis=v}))}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),f):i&&i.slice()},f.tickFormat=function(t){return arguments.length?(r=t,f):r},f.tickSize=function(t){return arguments.length?(s=a=+t,f):s},f.tickSizeInner=function(t){return arguments.length?(s=+t,f):s},f.tickSizeOuter=function(t){return arguments.length?(a=+t,f):a},f.tickPadding=function(t){return arguments.length?(o=+t,f):o},f.offset=function(t){return arguments.length?(c=+t,f):c},f}var ce={value:()=>{}};function le(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new ue(i)}function ue(t){this._=t}function he(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function fe(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ce,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}ue.prototype=le.prototype={constructor:ue,on:function(t,e){var n,i=this._,r=function(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}(t+"",i),s=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=r[s]).type)i[n]=fe(i[n],t.name,e);else if(null==e)for(n in i)i[n]=fe(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=r[s]).type)&&(n=he(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ue(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};var de="http://www.w3.org/1999/xhtml",pe={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function me(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),pe.hasOwnProperty(e)?{space:pe[e],local:t}:t}function ye(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===de&&e.documentElement.namespaceURI===de?e.createElement(t):e.createElementNS(n,t)}}function ge(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function be(t){var e=me(t);return(e.local?ge:ye)(e)}function ve(){}function _e(t){return null==t?ve:function(){return this.querySelector(t)}}function xe(){return[]}function we(t){return null==t?xe:function(){return this.querySelectorAll(t)}}function Se(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function ke(t){return function(){return this.matches(t)}}function Ie(t){return function(e){return e.matches(t)}}var Ae=Array.prototype.find;function Te(){return this.firstElementChild}var Me=Array.prototype.filter;function Ee(){return Array.from(this.children)}function Ce(t){return new Array(t.length)}function Ne(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Le(t,e,n,i,r,s){for(var a,o=0,c=e.length,l=s.length;o<l;++o)(a=e[o])?(a.__data__=s[o],i[o]=a):n[o]=new Ne(t,s[o]);for(;o<c;++o)(a=e[o])&&(r[o]=a)}function Oe(t,e,n,i,r,s,a){var o,c,l,u=new Map,h=e.length,f=s.length,d=new Array(h);for(o=0;o<h;++o)(c=e[o])&&(d[o]=l=a.call(c,c.__data__,o,e)+"",u.has(l)?r[o]=c:u.set(l,c));for(o=0;o<f;++o)l=a.call(t,s[o],o,s)+"",(c=u.get(l))?(i[o]=c,c.__data__=s[o],u.delete(l)):n[o]=new Ne(t,s[o]);for(o=0;o<h;++o)(c=e[o])&&u.get(d[o])===c&&(r[o]=c)}function De(t){return t.__data__}function $e(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Be(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Fe(t){return function(){this.removeAttribute(t)}}function Pe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ve(t,e){return function(){this.setAttribute(t,e)}}function Ue(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Re(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function je(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ze(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function qe(t){return function(){this.style.removeProperty(t)}}function We(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ye(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function He(t,e){return t.style.getPropertyValue(e)||ze(t).getComputedStyle(t,null).getPropertyValue(e)}function Ge(t){return function(){delete this[t]}}function Ke(t,e){return function(){this[t]=e}}function Qe(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Xe(t){return t.trim().split(/^|\s+/)}function Je(t){return t.classList||new Ze(t)}function Ze(t){this._node=t,this._names=Xe(t.getAttribute("class")||"")}function tn(t,e){for(var n=Je(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function en(t,e){for(var n=Je(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function nn(t){return function(){tn(this,t)}}function rn(t){return function(){en(this,t)}}function sn(t,e){return function(){(e.apply(this,arguments)?tn:en)(this,t)}}function an(){this.textContent=""}function on(t){return function(){this.textContent=t}}function cn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ln(){this.innerHTML=""}function un(t){return function(){this.innerHTML=t}}function hn(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function fn(){this.nextSibling&&this.parentNode.appendChild(this)}function dn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pn(){return null}function mn(){var t=this.parentNode;t&&t.removeChild(this)}function yn(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bn(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function vn(t,e,n){return function(){var i,r=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),void(i.value=e);this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function _n(t,e,n){var i=ze(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function xn(t,e){return function(){return _n(this,t,e)}}function wn(t,e){return function(){return _n(this,t,e.apply(this,arguments))}}Ne.prototype={constructor:Ne,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ze.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Sn=[null];function kn(t,e){this._groups=t,this._parents=e}function In(){return new kn([[document.documentElement]],Sn)}function An(t){return"string"==typeof t?new kn([[document.querySelector(t)]],[document.documentElement]):new kn([[t]],Sn)}function Tn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Mn(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function En(){}kn.prototype=In.prototype={constructor:kn,select:function(t){"function"!=typeof t&&(t=_e(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a,o=e[r],c=o.length,l=i[r]=new Array(c),u=0;u<c;++u)(s=o[u])&&(a=t.call(s,s.__data__,u,o))&&("__data__"in s&&(a.__data__=s.__data__),l[u]=a);return new kn(i,this._parents)},selectAll:function(t){t="function"==typeof t?Se(t):we(t);for(var e=this._groups,n=e.length,i=[],r=[],s=0;s<n;++s)for(var a,o=e[s],c=o.length,l=0;l<c;++l)(a=o[l])&&(i.push(t.call(a,a.__data__,l,o)),r.push(a));return new kn(i,r)},selectChild:function(t){return this.select(null==t?Te:function(t){return function(){return Ae.call(this.children,t)}}("function"==typeof t?t:Ie(t)))},selectChildren:function(t){return this.selectAll(null==t?Ee:function(t){return function(){return Me.call(this.children,t)}}("function"==typeof t?t:Ie(t)))},filter:function(t){"function"!=typeof t&&(t=ke(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],o=a.length,c=i[r]=[],l=0;l<o;++l)(s=a[l])&&t.call(s,s.__data__,l,a)&&c.push(s);return new kn(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,De);var n=e?Oe:Le,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var s=r.length,a=new Array(s),o=new Array(s),c=new Array(s),l=0;l<s;++l){var u=i[l],h=r[l],f=h.length,d=$e(t.call(u,u&&u.__data__,l,i)),p=d.length,m=o[l]=new Array(p),y=a[l]=new Array(p);n(u,h,m,y,c[l]=new Array(f),d,e);for(var g,b,v=0,_=0;v<p;++v)if(g=m[v]){for(v>=_&&(_=v+1);!(b=y[_])&&++_<p;);g._next=b||null}}return(a=new kn(a,i))._enter=o,a._exit=c,a},enter:function(){return new kn(this._enter||this._groups.map(Ce),this._parents)},exit:function(){return new kn(this._exit||this._groups.map(Ce),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,a=Math.min(r,s),o=new Array(r),c=0;c<a;++c)for(var l,u=n[c],h=i[c],f=u.length,d=o[c]=new Array(f),p=0;p<f;++p)(l=u[p]||h[p])&&(d[p]=l);for(;c<r;++c)o[c]=n[c];return new kn(o,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,a=r[s];--s>=0;)(i=r[s])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Be);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var a,o=n[s],c=o.length,l=r[s]=new Array(c),u=0;u<c;++u)(a=o[u])&&(l[u]=a);l.sort(e)}return new kn(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var a=i[r];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],a=0,o=s.length;a<o;++a)(r=s[a])&&t.call(r,r.__data__,a,s);return this},attr:function(t,e){var n=me(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?Pe:Fe:"function"==typeof e?n.local?je:Re:n.local?Ue:Ve)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?qe:"function"==typeof e?Ye:We)(t,e,null==n?"":n)):He(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Ge:"function"==typeof e?Qe:Ke)(t,e)):this.node()[t]},classed:function(t,e){var n=Xe(t+"");if(arguments.length<2){for(var i=Je(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?sn:e?nn:rn)(n,e))},text:function(t){return arguments.length?this.each(null==t?an:("function"==typeof t?cn:on)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ln:("function"==typeof t?hn:un)(t)):this.node().innerHTML},raise:function(){return this.each(fn)},lower:function(){return this.each(dn)},append:function(t){var e="function"==typeof t?t:be(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:be(t),i=null==e?pn:"function"==typeof e?e:_e(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(mn)},clone:function(t){return this.select(t?gn:yn)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=s.length;if(!(arguments.length<2)){for(o=e?vn:bn,i=0;i<a;++i)this.each(o(s[i],e,n));return this}var o=this.node().__on;if(o)for(var c,l=0,u=o.length;l<u;++l)for(i=0,c=o[l];i<a;++i)if((r=s[i]).type===c.type&&r.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?wn:xn)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],s=0,a=r.length;s<a;++s)(i=r[s])&&(yield i)}};var Cn=.7,Nn=1/Cn,Ln="\\s*([+-]?\\d+)\\s*",On="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$n=/^#([0-9a-f]{3,8})$/,Bn=new RegExp(`^rgb\\(${Ln},${Ln},${Ln}\\)$`),Fn=new RegExp(`^rgb\\(${Dn},${Dn},${Dn}\\)$`),Pn=new RegExp(`^rgba\\(${Ln},${Ln},${Ln},${On}\\)$`),Vn=new RegExp(`^rgba\\(${Dn},${Dn},${Dn},${On}\\)$`),Un=new RegExp(`^hsl\\(${On},${Dn},${Dn}\\)$`),Rn=new RegExp(`^hsla\\(${On},${Dn},${Dn},${On}\\)$`),jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function zn(){return this.rgb().formatHex()}function qn(){return this.rgb().formatRgb()}function Wn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$n.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Yn(e):3===n?new Qn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Hn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Hn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Bn.exec(t))?new Qn(e[1],e[2],e[3],1):(e=Fn.exec(t))?new Qn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Pn.exec(t))?Hn(e[1],e[2],e[3],e[4]):(e=Vn.exec(t))?Hn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Un.exec(t))?ni(e[1],e[2]/100,e[3]/100,1):(e=Rn.exec(t))?ni(e[1],e[2]/100,e[3]/100,e[4]):jn.hasOwnProperty(t)?Yn(jn[t]):"transparent"===t?new Qn(NaN,NaN,NaN,0):null}function Yn(t){return new Qn(t>>16&255,t>>8&255,255&t,1)}function Hn(t,e,n,i){return i<=0&&(t=e=n=NaN),new Qn(t,e,n,i)}function Gn(t){return t instanceof En||(t=Wn(t)),t?new Qn((t=t.rgb()).r,t.g,t.b,t.opacity):new Qn}function Kn(t,e,n,i){return 1===arguments.length?Gn(t):new Qn(t,e,n,null==i?1:i)}function Qn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Xn(){return`#${ei(this.r)}${ei(this.g)}${ei(this.b)}`}function Jn(){const t=Zn(this.opacity);return`${1===t?"rgb(":"rgba("}${ti(this.r)}, ${ti(this.g)}, ${ti(this.b)}${1===t?")":`, ${t})`}`}function Zn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ti(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ei(t){return((t=ti(t))<16?"0":"")+t.toString(16)}function ni(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new si(t,e,n,i)}function ii(t){if(t instanceof si)return new si(t.h,t.s,t.l,t.opacity);if(t instanceof En||(t=Wn(t)),!t)return new si;if(t instanceof si)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,o=s-r,c=(s+r)/2;return o?(a=e===s?(n-i)/o+6*(n<i):n===s?(i-e)/o+2:(e-n)/o+4,o/=c<.5?s+r:2-s-r,a*=60):o=c>0&&c<1?0:a,new si(a,o,c,t.opacity)}function ri(t,e,n,i){return 1===arguments.length?ii(t):new si(t,e,n,null==i?1:i)}function si(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ai(t){return(t=(t||0)%360)<0?t+360:t}function oi(t){return Math.max(0,Math.min(1,t||0))}function ci(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Tn(En,Wn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:zn,formatHex:zn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ii(this).formatHsl()},formatRgb:qn,toString:qn}),Tn(Qn,Kn,Mn(En,{brighter(t){return t=null==t?Nn:Math.pow(Nn,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Cn:Math.pow(Cn,t),new Qn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qn(ti(this.r),ti(this.g),ti(this.b),Zn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xn,formatHex:Xn,formatHex8:function(){return`#${ei(this.r)}${ei(this.g)}${ei(this.b)}${ei(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Jn,toString:Jn})),Tn(si,ri,Mn(En,{brighter(t){return t=null==t?Nn:Math.pow(Nn,t),new si(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Cn:Math.pow(Cn,t),new si(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Qn(ci(t>=240?t-240:t+120,r,i),ci(t,r,i),ci(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new si(ai(this.h),oi(this.s),oi(this.l),Zn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zn(this.opacity);return`${1===t?"hsl(":"hsla("}${ai(this.h)}, ${100*oi(this.s)}%, ${100*oi(this.l)}%${1===t?")":`, ${t})`}`}}));const li=Math.PI/180,ui=180/Math.PI,hi=.96422,fi=1,di=.82521,pi=4/29,mi=6/29,yi=3*mi*mi,gi=mi*mi*mi;function bi(t){if(t instanceof _i)return new _i(t.l,t.a,t.b,t.opacity);if(t instanceof Ai)return Ti(t);t instanceof Qn||(t=Gn(t));var e,n,i=ki(t.r),r=ki(t.g),s=ki(t.b),a=xi((.2225045*i+.7168786*r+.0606169*s)/fi);return i===r&&r===s?e=n=a:(e=xi((.4360747*i+.3850649*r+.1430804*s)/hi),n=xi((.0139322*i+.0971045*r+.7141733*s)/di)),new _i(116*a-16,500*(e-a),200*(a-n),t.opacity)}function vi(t,e,n,i){return 1===arguments.length?bi(t):new _i(t,e,n,null==i?1:i)}function _i(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function xi(t){return t>gi?Math.pow(t,1/3):t/yi+pi}function wi(t){return t>mi?t*t*t:yi*(t-pi)}function Si(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ki(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ii(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Ai)return new Ai(t.h,t.c,t.l,t.opacity);if(t instanceof _i||(t=bi(t)),0===t.a&&0===t.b)return new Ai(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ui;return new Ai(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Ai(t,e,n,null==i?1:i)}function Ai(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Ti(t){if(isNaN(t.h))return new _i(t.l,0,0,t.opacity);var e=t.h*li;return new _i(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Tn(_i,vi,Mn(En,{brighter(t){return new _i(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new _i(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Qn(Si(3.1338561*(e=hi*wi(e))-1.6168667*(t=fi*wi(t))-.4906146*(n=di*wi(n))),Si(-.9787684*e+1.9161415*t+.033454*n),Si(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Tn(Ai,Ii,Mn(En,{brighter(t){return new Ai(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new Ai(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Ti(this).rgb()}}));var Mi=-.14861,Ei=1.78277,Ci=-.29227,Ni=-.90649,Li=1.97294,Oi=Li*Ni,Di=Li*Ei,$i=Ei*Ci-Ni*Mi;function Bi(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Fi)return new Fi(t.h,t.s,t.l,t.opacity);t instanceof Qn||(t=Gn(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=($i*i+Oi*e-Di*n)/($i+Oi-Di),s=i-r,a=(Li*(n-r)-Ci*s)/Ni,o=Math.sqrt(a*a+s*s)/(Li*r*(1-r)),c=o?Math.atan2(a,s)*ui-120:NaN;return new Fi(c<0?c+360:c,o,r,t.opacity)}(t):new Fi(t,e,n,null==i?1:i)}function Fi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Tn(Fi,Bi,Mn(En,{brighter(t){return t=null==t?Nn:Math.pow(Nn,t),new Fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Cn:Math.pow(Cn,t),new Fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*li,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Qn(255*(e+n*(Mi*i+Ei*r)),255*(e+n*(Ci*i+Ni*r)),255*(e+n*(Li*i)),this.opacity)}}));var Pi=t=>()=>t;function Vi(t,e){return function(n){return t+n*e}}function Ui(t,e){var n=e-t;return n?Vi(t,n>180||n<-180?n-360*Math.round(n/360):n):Pi(isNaN(t)?e:t)}function Ri(t){return 1==(t=+t)?ji:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Pi(isNaN(e)?n:e)}}function ji(t,e){var n=e-t;return n?Vi(t,n):Pi(isNaN(t)?e:t)}var zi=function t(e){var n=Ri(e);function i(t,e){var i=n((t=Kn(t)).r,(e=Kn(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),a=ji(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);var qi,Wi=(qi=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1],a=i>0?t[i-1]:2*r-s,o=i<e-1?t[i+2]:2*s-r;return function(t,e,n,i,r){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*i+a*r)/6}((n-i/e)*e,a,r,s,o)}},function(t){var e,n,i=t.length,r=new Array(i),s=new Array(i),a=new Array(i);for(e=0;e<i;++e)n=Kn(t[e]),r[e]=n.r||0,s[e]=n.g||0,a[e]=n.b||0;return r=qi(r),s=qi(s),a=qi(a),n.opacity=1,function(t){return n.r=r(t),n.g=s(t),n.b=a(t),n+""}});function Yi(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function Hi(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),a=new Array(i);for(n=0;n<r;++n)s[n]=tr(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=s[n](t);return a}}function Gi(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ki(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qi(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=tr(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var Xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ji=new RegExp(Xi.source,"g");function Zi(t,e){var n,i,r,s=Xi.lastIndex=Ji.lastIndex=0,a=-1,o=[],c=[];for(t+="",e+="";(n=Xi.exec(t))&&(i=Ji.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),o[a]?o[a]+=r:o[++a]=r),(n=n[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:Ki(n,i)})),s=Ji.lastIndex;return s<e.length&&(r=e.slice(s),o[a]?o[a]+=r:o[++a]=r),o.length<2?c[0]?function(t){return function(e){return t(e)+""}}(c[0].x):function(t){return function(){return t}}(e):(e=c.length,function(t){for(var n,i=0;i<e;++i)o[(n=c[i]).i]=n.x(t);return o.join("")})}function tr(t,e){var n,i=typeof e;return null==e||"boolean"===i?Pi(e):("number"===i?Ki:"string"===i?(n=Wn(e))?(e=n,zi):Zi:e instanceof Wn?zi:e instanceof Date?Gi:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Yi:Array.isArray(e)?Hi:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Qi:Ki)(t,e)}function er(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var nr,ir=180/Math.PI,rr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sr(t,e,n,i,r,s){var a,o,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,c/=o),t*i<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*ir,skewX:Math.atan(c)*ir,scaleX:a,scaleY:o}}function ar(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(s,a){var o=[],c=[];return s=t(s),a=t(a),function(t,i,r,s,a,o){if(t!==r||i!==s){var c=a.push("translate(",null,e,null,n);o.push({i:c-4,x:Ki(t,r)},{i:c-2,x:Ki(i,s)})}else(r||s)&&a.push("translate("+r+e+s+n)}(s.translateX,s.translateY,a.translateX,a.translateY,o,c),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Ki(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(s.rotate,a.rotate,o,c),function(t,e,n,s){t!==e?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Ki(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(s.skewX,a.skewX,o,c),function(t,e,n,i,s,a){if(t!==n||e!==i){var o=s.push(r(s)+"scale(",null,",",null,")");a.push({i:o-4,x:Ki(t,n)},{i:o-2,x:Ki(e,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,a.scaleX,a.scaleY,o,c),s=a=null,function(t){for(var e,n=-1,i=c.length;++n<i;)o[(e=c[n]).i]=e.x(t);return o.join("")}}}var or=ar((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?rr:sr(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),cr=ar((function(t){return null==t?rr:(nr||(nr=document.createElementNS("http://www.w3.org/2000/svg","g")),nr.setAttribute("transform",t),(t=nr.transform.baseVal.consolidate())?sr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):rr)}),", ",")",")");var lr=function(t){return function(e,n){var i=t((e=ri(e)).h,(n=ri(n)).h),r=ji(e.s,n.s),s=ji(e.l,n.l),a=ji(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=s(t),e.opacity=a(t),e+""}}}(Ui);var ur=function(t){return function(e,n){var i=t((e=Ii(e)).h,(n=Ii(n)).h),r=ji(e.c,n.c),s=ji(e.l,n.l),a=ji(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=s(t),e.opacity=a(t),e+""}}}(Ui);function hr(t){return function e(n){function i(e,i){var r=t((e=Bi(e)).h,(i=Bi(i)).h),s=ji(e.s,i.s),a=ji(e.l,i.l),o=ji(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=s(t),e.l=a(Math.pow(t,n)),e.opacity=o(t),e+""}}return n=+n,i.gamma=e,i}(1)}hr(Ui);var fr=hr(ji);function dr(t,e){void 0===e&&(e=t,t=tr);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return s[e](t-e)}}function pr(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var mr,yr,gr=0,br=0,vr=0,_r=1e3,xr=0,wr=0,Sr=0,kr="object"==typeof performance&&performance.now?performance:Date,Ir="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ar(){return wr||(Ir(Tr),wr=kr.now()+Sr)}function Tr(){wr=0}function Mr(){this._call=this._time=this._next=null}function Er(t,e,n){var i=new Mr;return i.restart(t,e,n),i}function Cr(){wr=(xr=kr.now())+Sr,gr=br=0;try{!function(){Ar(),++gr;for(var t,e=mr;e;)(t=wr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gr}()}finally{gr=0,function(){var t,e,n=mr,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:mr=e);yr=t,Lr(i)}(),wr=0}}function Nr(){var t=kr.now(),e=t-xr;e>_r&&(Sr-=e,xr=t)}function Lr(t){gr||(br&&(br=clearTimeout(br)),t-wr>24?(t<1/0&&(br=setTimeout(Cr,t-kr.now()-Sr)),vr&&(vr=clearInterval(vr))):(vr||(xr=kr.now(),vr=setInterval(Nr,_r)),gr=1,Ir(Cr)))}function Or(t,e,n){var i=new Mr;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}Mr.prototype=Er.prototype={constructor:Mr,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ar():+n)+(null==e?0:+e),this._next||yr===this||(yr?yr._next=this:mr=this,yr=this),this._call=t,this._time=n,Lr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lr())}};var Dr=le("start","end","cancel","interrupt"),$r=[],Br=0,Fr=1,Pr=2,Vr=3,Ur=4,Rr=5,jr=6;function zr(t,e,n,i,r,s){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function s(t){n.state=Fr,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(s){var l,u,h,f;if(n.state!==Fr)return c();for(l in r)if((f=r[l]).name===n.name){if(f.state===Vr)return Or(a);f.state===Ur?(f.state=jr,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[l]):+l<e&&(f.state=jr,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[l])}if(Or((function(){n.state===Vr&&(n.state=Ur,n.timer.restart(o,n.delay,n.time),o(s))})),n.state=Pr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Pr){for(n.state=Vr,i=new Array(h=n.tween.length),l=0,u=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(c),n.state=Rr,1),s=-1,a=i.length;++s<a;)i[s].call(t,r);n.state===Rr&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){for(var i in n.state=jr,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Er(s,0,n.time)}(t,n,{name:e,index:i,group:r,on:Dr,tween:$r,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Br})}function qr(t,e){var n=Yr(t,e);if(n.state>Br)throw new Error("too late; already scheduled");return n}function Wr(t,e){var n=Yr(t,e);if(n.state>Vr)throw new Error("too late; already running");return n}function Yr(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Hr(t,e){var n,i;return function(){var r=Wr(this,t),s=r.tween;if(s!==n)for(var a=0,o=(i=n=s).length;a<o;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}function Gr(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var s=Wr(this,t),a=s.tween;if(a!==i){r=(i=a).slice();for(var o={name:e,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=o;break}c===l&&r.push(o)}s.tween=r}}function Kr(t,e,n){var i=t._id;return t.each((function(){var t=Wr(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Yr(t,i).value[e]}}function Qr(t,e){var n;return("number"==typeof e?Ki:e instanceof Wn?zi:(n=Wn(e))?(e=n,zi):Zi)(t,e)}function Xr(t){return function(){this.removeAttribute(t)}}function Jr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zr(t,e,n){var i,r,s=n+"";return function(){var a=this.getAttribute(t);return a===s?null:a===i?r:r=e(i=a,n)}}function ts(t,e,n){var i,r,s=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===s?null:a===i?r:r=e(i=a,n)}}function es(t,e,n){var i,r,s;return function(){var a,o,c=n(this);if(null!=c)return(a=this.getAttribute(t))===(o=c+"")?null:a===i&&o===r?s:(r=o,s=e(i=a,c));this.removeAttribute(t)}}function ns(t,e,n){var i,r,s;return function(){var a,o,c=n(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(o=c+"")?null:a===i&&o===r?s:(r=o,s=e(i=a,c));this.removeAttributeNS(t.space,t.local)}}function is(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,r)),n}return r._value=e,r}function rs(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,r)),n}return r._value=e,r}function ss(t,e){return function(){qr(this,t).delay=+e.apply(this,arguments)}}function as(t,e){return e=+e,function(){qr(this,t).delay=e}}function os(t,e){return function(){Wr(this,t).duration=+e.apply(this,arguments)}}function cs(t,e){return e=+e,function(){Wr(this,t).duration=e}}var ls=In.prototype.constructor;function us(t){return function(){this.style.removeProperty(t)}}var hs=0;function fs(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function ds(){return++hs}var ps=In.prototype;fs.prototype={constructor:fs,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=_e(t));for(var i=this._groups,r=i.length,s=new Array(r),a=0;a<r;++a)for(var o,c,l=i[a],u=l.length,h=s[a]=new Array(u),f=0;f<u;++f)(o=l[f])&&(c=t.call(o,o.__data__,f,l))&&("__data__"in o&&(c.__data__=o.__data__),h[f]=c,zr(h[f],e,n,f,h,Yr(o,n)));return new fs(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=we(t));for(var i=this._groups,r=i.length,s=[],a=[],o=0;o<r;++o)for(var c,l=i[o],u=l.length,h=0;h<u;++h)if(c=l[h]){for(var f,d=t.call(c,c.__data__,h,l),p=Yr(c,n),m=0,y=d.length;m<y;++m)(f=d[m])&&zr(f,e,n,m,d,p);s.push(d),a.push(c)}return new fs(s,a,e,n)},selectChild:ps.selectChild,selectChildren:ps.selectChildren,filter:function(t){"function"!=typeof t&&(t=ke(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],o=a.length,c=i[r]=[],l=0;l<o;++l)(s=a[l])&&t.call(s,s.__data__,l,a)&&c.push(s);return new fs(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,s=Math.min(i,r),a=new Array(i),o=0;o<s;++o)for(var c,l=e[o],u=n[o],h=l.length,f=a[o]=new Array(h),d=0;d<h;++d)(c=l[d]||u[d])&&(f[d]=c);for(;o<i;++o)a[o]=e[o];return new fs(a,this._parents,this._name,this._id)},selection:function(){return new ls(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ds(),i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],c=o.length,l=0;l<c;++l)if(a=o[l]){var u=Yr(a,e);zr(a,t,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new fs(i,this._parents,t,n)},call:ps.call,nodes:ps.nodes,node:ps.node,size:ps.size,empty:ps.empty,each:ps.each,on:function(t,e){var n=this._id;return arguments.length<2?Yr(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,s=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?qr:Wr;return function(){var a=s(this,t),o=a.on;o!==i&&(r=(i=o).copy()).on(e,n),a.on=r}}(n,t,e))},attr:function(t,e){var n=me(t),i="transform"===n?cr:Qr;return this.attrTween(t,"function"==typeof e?(n.local?ns:es)(n,i,Kr(this,"attr."+t,e)):null==e?(n.local?Jr:Xr)(n):(n.local?ts:Zr)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=me(t);return this.tween(n,(i.local?is:rs)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?or:Qr;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var s=He(this,t),a=(this.style.removeProperty(t),He(this,t));return s===a?null:s===n&&a===i?r:r=e(n=s,i=a)}}(t,i)).on("end.style."+t,us(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,s;return function(){var a=He(this,t),o=n(this),c=o+"";return null==o&&(this.style.removeProperty(t),c=o=He(this,t)),a===c?null:a===i&&c===r?s:(r=c,s=e(i=a,o))}}(t,i,Kr(this,"style."+t,e))).each(function(t,e){var n,i,r,s,a="style."+e,o="end."+a;return function(){var c=Wr(this,t),l=c.on,u=null==c.value[a]?s||(s=us(e)):void 0;l===n&&r===u||(i=(n=l).copy()).on(o,r=u),c.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,s=n+"";return function(){var a=He(this,t);return a===s?null:a===i?r:r=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function s(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&function(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}(t,s,n)),i}return s._value=e,s}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Kr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&function(t){return function(e){this.textContent=t.call(this,e)}}(i)),e}return i._value=t,i}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Yr(this.node(),n).tween,s=0,a=r.length;s<a;++s)if((i=r[s]).name===t)return i.value;return null}return this.each((null==e?Hr:Gr)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ss:as)(e,t)):Yr(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?os:cs)(e,t)):Yr(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Wr(this,t).ease=e}}(e,t)):Yr(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Wr(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(s,a){var o={value:a},c={value:function(){0==--r&&s()}};n.each((function(){var n=Wr(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(c)),n.on=e})),0===r&&s()}))},[Symbol.iterator]:ps[Symbol.iterator]};var ms={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ys(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}In.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,r,s=t.__transition,a=!0;if(s){for(r in e=null==e?null:e+"",s)(n=s[r]).name===e?(i=n.state>Pr&&n.state<Rr,n.state=jr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[r]):a=!1;a&&delete t.__transition}}(this,t)}))},In.prototype.transition=function(t){var e,n;t instanceof fs?(e=t._id,t=t._name):(e=ds(),(n=ms).time=Ar(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var a,o=i[s],c=o.length,l=0;l<c;++l)(a=o[l])&&zr(a,t,e,l,o,n||ys(a,e));return new fs(i,this._parents,t,e)};const gs=Math.PI,bs=2*gs,vs=1e-6,_s=bs-vs;function xs(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class ws{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?xs:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xs;const n=10**e;return function(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,i){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,e,n,i,r,s){this._append`C${+t},${+e},${+n},${+i},${this._x1=+r},${this._y1=+s}`}arcTo(t,e,n,i,r){if(t=+t,e=+e,n=+n,i=+i,(r=+r)<0)throw new Error(`negative radius: ${r}`);let s=this._x1,a=this._y1,o=n-t,c=i-e,l=s-t,u=a-e,h=l*l+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(h>vs)if(Math.abs(u*o-c*l)>vs&&r){let f=n-s,d=i-a,p=o*o+c*c,m=f*f+d*d,y=Math.sqrt(p),g=Math.sqrt(h),b=r*Math.tan((gs-Math.acos((p+h-m)/(2*y*g)))/2),v=b/g,_=b/y;Math.abs(v-1)>vs&&this._append`L${t+v*l},${e+v*u}`,this._append`A${r},${r},0,0,${+(u*f>l*d)},${this._x1=t+_*o},${this._y1=e+_*c}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,i,r,s){if(t=+t,e=+e,s=!!s,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(i),o=n*Math.sin(i),c=t+a,l=e+o,u=1^s,h=s?i-r:r-i;null===this._x1?this._append`M${c},${l}`:(Math.abs(this._x1-c)>vs||Math.abs(this._y1-l)>vs)&&this._append`L${c},${l}`,n&&(h<0&&(h=h%bs+bs),h>_s?this._append`A${n},${n},0,1,${u},${t-a},${e-o}A${n},${n},0,1,${u},${this._x1=c},${this._y1=l}`:h>vs&&this._append`A${n},${n},0,${+(h>=gs)},${u},${this._x1=t+n*Math.cos(r)},${this._y1=e+n*Math.sin(r)}`)}rect(t,e,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Ss(t=3){return new ws(+t)}function ks(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Is(t){return(t=ks(Math.abs(t)))?t[1]:NaN}var As,Ts=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ms(t){if(!(e=Ts.exec(t)))throw new Error("invalid format: "+t);var e;return new Es({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Es(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Cs(t,e){var n=ks(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Ms.prototype=Es.prototype,Es.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ns={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Cs(100*t,e),r:Cs,s:function(t,e){var n=ks(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(As=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+ks(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ls(t){return t}var Os,Ds,$s,Bs=Array.prototype.map,Fs=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ps(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?Ls:(e=Bs.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],a=0,o=e[0],c=0;r>0&&o>0&&(c+o+1>i&&(o=Math.max(1,i-c)),s.push(t.substring(r-=o,r+o)),!((c+=o+1)>i));)o=e[a=(a+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?Ls:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Bs.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"−":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ms(t)).fill,n=t.align,h=t.sign,f=t.symbol,d=t.zero,p=t.width,m=t.comma,y=t.precision,g=t.trim,b=t.type;"n"===b?(m=!0,b="g"):Ns[b]||(void 0===y&&(y=12),g=!0,b="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var v="$"===f?r:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",_="$"===f?s:/[%p]/.test(b)?c:"",x=Ns[b],w=/[defgprs%]/.test(b);function S(t){var r,s,c,f=v,S=_;if("c"===b)S=x(t)+S,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:x(Math.abs(t),y),g&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==h&&(k=!1),f=(k?"("===h?h:l:"-"===h||"("===h?"":h)+f,S=("s"===b?Fs[8+As/3]:"")+S+(k&&"("===h?")":""),w)for(r=-1,s=t.length;++r<s;)if(48>(c=t.charCodeAt(r))||c>57){S=(46===c?a+t.slice(r+1):t.slice(r))+S,t=t.slice(0,r);break}}m&&!d&&(t=i(t,1/0));var I=f.length+t.length+S.length,A=I<p?new Array(p-I+1).join(e):"";switch(m&&d&&(t=i(A+t,A.length?p-S.length:1/0),A=""),n){case"<":t=f+t+S+A;break;case"=":t=f+A+t+S;break;case"^":t=A.slice(0,I=A.length>>1)+f+t+S+A.slice(I);break;default:t=A+f+t+S}return o(t)}return y=void 0===y?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),S.toString=function(){return t+""},S}return{format:h,formatPrefix:function(t,e){var n=h(((t=Ms(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Is(e)/3))),r=Math.pow(10,-i),s=Fs[8+i/3];return function(t){return n(r*t)+s}}}}Os=Ps({thousands:",",grouping:[3],currency:["$",""]}),Ds=Os.format,$s=Os.formatPrefix;var Vs=1e-6,Us=1e-12,Rs=Math.PI,js=Rs/2,zs=Rs/4,qs=2*Rs,Ws=180/Rs,Ys=Rs/180,Hs=Math.abs,Gs=Math.atan,Ks=Math.atan2,Qs=Math.cos,Xs=Math.exp,Js=Math.log,Zs=Math.pow,ta=Math.sin,ea=Math.sign||function(t){return t>0?1:t<0?-1:0},na=Math.sqrt,ia=Math.tan;function ra(t){return t>1?0:t<-1?Rs:Math.acos(t)}function sa(t){return t>1?js:t<-1?-js:Math.asin(t)}function aa(){}function oa(t,e){t&&la.hasOwnProperty(t.type)&&la[t.type](t,e)}var ca={Feature:function(t,e){oa(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)oa(n[i].geometry,e)}},la={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){ua(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ua(n[i],e,0)},Polygon:function(t,e){ha(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ha(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)oa(n[i],e)}};function ua(t,e,n){var i,r=-1,s=t.length-n;for(e.lineStart();++r<s;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function ha(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)ua(t[n],e,1);e.polygonEnd()}function fa(t,e){t&&ca.hasOwnProperty(t.type)?ca[t.type](t,e):oa(t,e)}function da(t){return[Ks(t[1],t[0]),sa(t[2])]}function pa(t){var e=t[0],n=t[1],i=Qs(n);return[i*Qs(e),i*ta(e),ta(n)]}function ma(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ya(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ga(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ba(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function va(t){var e=na(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function _a(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function xa(t,e){return Hs(t)>Rs&&(t-=Math.round(t/qs)*qs),[t,e]}function wa(t,e,n){return(t%=qs)?e||n?_a(ka(t),Ia(e,n)):ka(t):e||n?Ia(e,n):xa}function Sa(t){return function(e,n){return Hs(e+=t)>Rs&&(e-=Math.round(e/qs)*qs),[e,n]}}function ka(t){var e=Sa(t);return e.invert=Sa(-t),e}function Ia(t,e){var n=Qs(t),i=ta(t),r=Qs(e),s=ta(e);function a(t,e){var a=Qs(e),o=Qs(t)*a,c=ta(t)*a,l=ta(e),u=l*n+o*i;return[Ks(c*r-u*s,o*n-l*i),sa(u*r+c*s)]}return a.invert=function(t,e){var a=Qs(e),o=Qs(t)*a,c=ta(t)*a,l=ta(e),u=l*r-c*s;return[Ks(c*r+l*s,o*n+u*i),sa(u*n-o*i)]},a}function Aa(t,e){(e=pa(e))[0]-=t,va(e);var n=ra(-e[1]);return((-e[2]<0?-n:n)+qs-Vs)%qs}function Ta(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:aa,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ma(t,e){return Hs(t[0]-e[0])<Vs&&Hs(t[1]-e[1])<Vs}function Ea(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function Ca(t,e,n,i,r){var s,a,o=[],c=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(Ma(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),s=0;s<e;++s)r.point((i=t[s])[0],i[1]);return void r.lineEnd()}a[0]+=2*Vs}o.push(n=new Ea(i,t,null,!0)),c.push(n.o=new Ea(i,null,n,!1)),o.push(n=new Ea(a,t,null,!1)),c.push(n.o=new Ea(a,null,n,!0))}})),o.length){for(c.sort(e),Na(o),Na(c),s=0,a=c.length;s<a;++s)c[s].e=n=!n;for(var l,u,h=o[0];;){for(var f=h,d=!0;f.v;)if((f=f.n)===h)return;l=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,a=l.length;s<a;++s)r.point((u=l[s])[0],u[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(d)for(l=f.p.z,s=l.length-1;s>=0;--s)r.point((u=l[s])[0],u[1]);else i(f.x,f.p.x,-1,r);f=f.p}l=(f=f.o).z,d=!d}while(!f.v);r.lineEnd()}}}function Na(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function La(t){return Hs(t[0])<=Rs?t[0]:ea(t[0])*((Hs(t[0])+Rs)%qs-Rs)}function Oa(t,e,n,i){return function(r){var s,a,o,c=e(r),l=Ta(),u=e(l),h=!1,f={point:d,lineStart:m,lineEnd:y,polygonStart:function(){f.point=g,f.lineStart=b,f.lineEnd=v,a=[],s=[]},polygonEnd:function(){f.point=d,f.lineStart=m,f.lineEnd=y,a=qt(a);var t=function(t,e){var n=La(e),i=e[1],r=ta(i),s=[ta(n),-Qs(n),0],a=0,o=0,c=new ot;1===r?i=js+Vs:-1===r&&(i=-js-Vs);for(var l=0,u=t.length;l<u;++l)if(f=(h=t[l]).length)for(var h,f,d=h[f-1],p=La(d),m=d[1]/2+zs,y=ta(m),g=Qs(m),b=0;b<f;++b,p=_,y=w,g=S,d=v){var v=h[b],_=La(v),x=v[1]/2+zs,w=ta(x),S=Qs(x),k=_-p,I=k>=0?1:-1,A=I*k,T=A>Rs,M=y*w;if(c.add(Ks(M*I*ta(A),g*S+M*Qs(A))),a+=T?k+I*qs:k,T^p>=n^_>=n){var E=ya(pa(d),pa(v));va(E);var C=ya(s,E);va(C);var N=(T^k>=0?-1:1)*sa(C[2]);(i>N||i===N&&(E[0]||E[1]))&&(o+=T^k>=0?1:-1)}}return(a<-Vs||a<Vs&&c<-Us)^1&o}(s,i);a.length?(h||(r.polygonStart(),h=!0),Ca(a,$a,t,n,r)):t&&(h||(r.polygonStart(),h=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),h&&(r.polygonEnd(),h=!1),a=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(e,n){t(e,n)&&r.point(e,n)}function p(t,e){c.point(t,e)}function m(){f.point=p,c.lineStart()}function y(){f.point=d,c.lineEnd()}function g(t,e){o.push([t,e]),u.point(t,e)}function b(){u.lineStart(),o=[]}function v(){g(o[0][0],o[0][1]),u.lineEnd();var t,e,n,i,c=u.clean(),f=l.result(),d=f.length;if(o.pop(),s.push(o),o=null,d)if(1&c){if((e=(n=f[0]).length-1)>0){for(h||(r.polygonStart(),h=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else d>1&&2&c&&f.push(f.pop().concat(f.shift())),a.push(f.filter(Da))}return f}}function Da(t){return t.length>1}function $a(t,e){return((t=t.x)[0]<0?t[1]-js-Vs:js-t[1])-((e=e.x)[0]<0?e[1]-js-Vs:js-e[1])}xa.invert=xa;var Ba=Oa((function(){return!0}),(function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,a){var o=s>0?Rs:-Rs,c=Hs(s-n);Hs(c-Rs)<Vs?(t.point(n,i=(i+a)/2>0?js:-js),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(o,i),t.point(s,i),e=0):r!==o&&c>=Rs&&(Hs(n-r)<Vs&&(n-=r*Vs),Hs(s-o)<Vs&&(s-=o*Vs),i=function(t,e,n,i){var r,s,a=ta(t-n);return Hs(a)>Vs?Gs((ta(e)*(s=Qs(i))*ta(n)-ta(i)*(r=Qs(e))*ta(t))/(r*s*a)):(e+i)/2}(n,i,s,a),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(o,i),e=0),t.point(n=s,i=a),r=o},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var r;if(null==t)r=n*js,i.point(-Rs,r),i.point(0,r),i.point(Rs,r),i.point(Rs,0),i.point(Rs,-r),i.point(0,-r),i.point(-Rs,-r),i.point(-Rs,0),i.point(-Rs,r);else if(Hs(t[0]-e[0])>Vs){var s=t[0]<e[0]?Rs:-Rs;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])}),[-Rs,-js]);function Fa(t){var e=Qs(t),n=6*Ys,i=e>0,r=Hs(e)>Vs;function s(t,n){return Qs(t)*Qs(n)>e}function a(t,n,i){var r=[1,0,0],s=ya(pa(t),pa(n)),a=ma(s,s),o=s[0],c=a-o*o;if(!c)return!i&&t;var l=e*a/c,u=-e*o/c,h=ya(r,s),f=ba(r,l);ga(f,ba(s,u));var d=h,p=ma(f,d),m=ma(d,d),y=p*p-m*(ma(f,f)-1);if(!(y<0)){var g=na(y),b=ba(d,(-p-g)/m);if(ga(b,f),b=da(b),!i)return b;var v,_=t[0],x=n[0],w=t[1],S=n[1];x<_&&(v=_,_=x,x=v);var k=x-_,I=Hs(k-Rs)<Vs;if(!I&&S<w&&(v=w,w=S,S=v),I||k<Vs?I?w+S>0^b[1]<(Hs(b[0]-_)<Vs?w:S):w<=b[1]&&b[1]<=S:k>Rs^(_<=b[0]&&b[0]<=x)){var A=ba(d,(-p+g)/m);return ga(A,f),[b,da(A)]}}}function o(e,n){var r=i?t:Rs-t,s=0;return e<-r?s|=1:e>r&&(s|=2),n<-r?s|=4:n>r&&(s|=8),s}return Oa(s,(function(t){var e,n,c,l,u;return{lineStart:function(){l=c=!1,u=1},point:function(h,f){var d,p=[h,f],m=s(h,f),y=i?m?0:o(h,f):m?o(h+(h<0?Rs:-Rs),f):0;if(!e&&(l=c=m)&&t.lineStart(),m!==c&&(!(d=a(e,p))||Ma(e,d)||Ma(p,d))&&(p[2]=1),m!==c)u=0,m?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(r&&e&&i^m){var g;y&n||!(g=a(p,e,!0))||(u=0,i?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!m||e&&Ma(e,p)||t.point(p[0],p[1]),e=p,c=m,n=y},lineEnd:function(){c&&t.lineEnd(),e=null},clean:function(){return u|(l&&c)<<1}}}),(function(e,i,r,s){!function(t,e,n,i,r,s){if(n){var a=Qs(e),o=ta(e),c=i*n;null==r?(r=e+i*qs,s=e-c/2):(r=Aa(a,r),s=Aa(a,s),(i>0?r<s:r>s)&&(r+=i*qs));for(var l,u=r;i>0?u>s:u<s;u-=c)l=da([a,-o*Qs(u),-o*ta(u)]),t.point(l[0],l[1])}}(s,t,n,r,e,i)}),i?[0,-t]:[-Rs,t-Rs])}var Pa=1e9,Va=-Pa;function Ua(t,e,n,i){function r(r,s){return t<=r&&r<=n&&e<=s&&s<=i}function s(r,s,o,l){var u=0,h=0;if(null==r||(u=a(r,o))!==(h=a(s,o))||c(r,s)<0^o>0)do{l.point(0===u||3===u?t:n,u>1?i:e)}while((u=(u+o+4)%4)!==h);else l.point(s[0],s[1])}function a(i,r){return Hs(i[0]-t)<Vs?r>0?0:3:Hs(i[0]-n)<Vs?r>0?2:1:Hs(i[1]-e)<Vs?r>0?1:0:r>0?3:2}function o(t,e){return c(t.x,e.x)}function c(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var c,l,u,h,f,d,p,m,y,g,b,v=a,_=Ta(),x={point:w,lineStart:function(){x.point=S,l&&l.push(u=[]);g=!0,y=!1,p=m=NaN},lineEnd:function(){c&&(S(h,f),d&&y&&_.rejoin(),c.push(_.result()));x.point=w,y&&v.lineEnd()},polygonStart:function(){v=_,c=[],l=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=l.length;n<r;++n)for(var s,a,o=l[n],c=1,u=o.length,h=o[0],f=h[0],d=h[1];c<u;++c)s=f,a=d,f=(h=o[c])[0],d=h[1],a<=i?d>i&&(f-s)*(i-a)>(d-a)*(t-s)&&++e:d<=i&&(f-s)*(i-a)<(d-a)*(t-s)&&--e;return e}(),n=b&&e,r=(c=qt(c)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),r&&Ca(c,o,e,s,a),a.polygonEnd());v=a,c=l=u=null}};function w(t,e){r(t,e)&&v.point(t,e)}function S(s,a){var o=r(s,a);if(l&&u.push([s,a]),g)h=s,f=a,d=o,g=!1,o&&(v.lineStart(),v.point(s,a));else if(o&&y)v.point(s,a);else{var c=[p=Math.max(Va,Math.min(Pa,p)),m=Math.max(Va,Math.min(Pa,m))],_=[s=Math.max(Va,Math.min(Pa,s)),a=Math.max(Va,Math.min(Pa,a))];!function(t,e,n,i,r,s){var a,o=t[0],c=t[1],l=0,u=1,h=e[0]-o,f=e[1]-c;if(a=n-o,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<u&&(u=a)}else if(h>0){if(a>u)return;a>l&&(l=a)}if(a=r-o,h||!(a<0)){if(a/=h,h<0){if(a>u)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<u&&(u=a)}if(a=i-c,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<u&&(u=a)}else if(f>0){if(a>u)return;a>l&&(l=a)}if(a=s-c,f||!(a<0)){if(a/=f,f<0){if(a>u)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<u&&(u=a)}return l>0&&(t[0]=o+l*h,t[1]=c+l*f),u<1&&(e[0]=o+u*h,e[1]=c+u*f),!0}}}}}(c,_,t,e,n,i)?o&&(v.lineStart(),v.point(s,a),b=!1):(y||(v.lineStart(),v.point(c[0],c[1])),v.point(_[0],_[1]),o||v.lineEnd(),b=!1)}p=s,m=a,y=o}return x}}var Ra,ja,za,qa,Wa=t=>t,Ya=new ot,Ha=new ot,Ga={point:aa,lineStart:aa,lineEnd:aa,polygonStart:function(){Ga.lineStart=Ka,Ga.lineEnd=Ja},polygonEnd:function(){Ga.lineStart=Ga.lineEnd=Ga.point=aa,Ya.add(Hs(Ha)),Ha=new ot},result:function(){var t=Ya/2;return Ya=new ot,t}};function Ka(){Ga.point=Qa}function Qa(t,e){Ga.point=Xa,Ra=za=t,ja=qa=e}function Xa(t,e){Ha.add(qa*t-za*e),za=t,qa=e}function Ja(){Xa(Ra,ja)}var Za=Ga,to=1/0,eo=to,no=-to,io=no,ro={point:function(t,e){t<to&&(to=t);t>no&&(no=t);e<eo&&(eo=e);e>io&&(io=e)},lineStart:aa,lineEnd:aa,polygonStart:aa,polygonEnd:aa,result:function(){var t=[[to,eo],[no,io]];return no=io=-(eo=to=1/0),t}};var so,ao,oo,co,lo=ro,uo=0,ho=0,fo=0,po=0,mo=0,yo=0,go=0,bo=0,vo=0,_o={point:xo,lineStart:wo,lineEnd:Io,polygonStart:function(){_o.lineStart=Ao,_o.lineEnd=To},polygonEnd:function(){_o.point=xo,_o.lineStart=wo,_o.lineEnd=Io},result:function(){var t=vo?[go/vo,bo/vo]:yo?[po/yo,mo/yo]:fo?[uo/fo,ho/fo]:[NaN,NaN];return uo=ho=fo=po=mo=yo=go=bo=vo=0,t}};function xo(t,e){uo+=t,ho+=e,++fo}function wo(){_o.point=So}function So(t,e){_o.point=ko,xo(oo=t,co=e)}function ko(t,e){var n=t-oo,i=e-co,r=na(n*n+i*i);po+=r*(oo+t)/2,mo+=r*(co+e)/2,yo+=r,xo(oo=t,co=e)}function Io(){_o.point=xo}function Ao(){_o.point=Mo}function To(){Eo(so,ao)}function Mo(t,e){_o.point=Eo,xo(so=oo=t,ao=co=e)}function Eo(t,e){var n=t-oo,i=e-co,r=na(n*n+i*i);po+=r*(oo+t)/2,mo+=r*(co+e)/2,yo+=r,go+=(r=co*t-oo*e)*(oo+t),bo+=r*(co+e),vo+=3*r,xo(oo=t,co=e)}var Co=_o;function No(t){this._context=t}No.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,qs)}},result:aa};var Lo,Oo,Do,$o,Bo,Fo=new ot,Po={point:aa,lineStart:function(){Po.point=Vo},lineEnd:function(){Lo&&Uo(Oo,Do),Po.point=aa},polygonStart:function(){Lo=!0},polygonEnd:function(){Lo=null},result:function(){var t=+Fo;return Fo=new ot,t}};function Vo(t,e){Po.point=Uo,Oo=$o=t,Do=Bo=e}function Uo(t,e){$o-=t,Bo-=e,Fo.add(na($o*$o+Bo*Bo)),$o=t,Bo=e}var Ro=Po;let jo,zo,qo,Wo;class Yo{constructor(t){this._append=null==t?Ho:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Ho;if(e!==jo){const t=10**e;jo=e,zo=function(e){let n=1;this._+=e[0];for(const i=e.length;n<i;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return zo}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==qo||this._append!==zo){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,qo=t,zo=this._append,Wo=this._,this._=e}this._+=Wo}}result(){const t=this._;return this._="",t.length?t:null}}function Ho(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Go(t,e){let n,i,r=3,s=4.5;function a(t){return t&&("function"==typeof s&&i.pointRadius(+s.apply(this,arguments)),fa(t,n(i))),i.result()}return a.area=function(t){return fa(t,n(Za)),Za.result()},a.measure=function(t){return fa(t,n(Ro)),Ro.result()},a.bounds=function(t){return fa(t,n(lo)),lo.result()},a.centroid=function(t){return fa(t,n(Co)),Co.result()},a.projection=function(e){return arguments.length?(n=null==e?(t=null,Wa):(t=e).stream,a):t},a.context=function(t){return arguments.length?(i=null==t?(e=null,new Yo(r)):new No(e=t),"function"!=typeof s&&i.pointRadius(s),a):e},a.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(i.pointRadius(+t),+t),a):s},a.digits=function(t){if(!arguments.length)return r;if(null==t)r=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);r=e}return null===e&&(i=new Yo(r)),a},a.projection(t).digits(r).context(e)}function Ko(t){return{stream:Qo(t)}}function Qo(t){return function(e){var n=new Xo;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Xo(){}function Jo(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),fa(n,t.stream(lo)),e(lo.result()),null!=i&&t.clipExtent(i),t}function Zo(t,e,n){return Jo(t,(function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+e[0][0]+(i-s*(n[1][0]+n[0][0]))/2,o=+e[0][1]+(r-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([a,o])}),n)}function tc(t,e,n){return Zo(t,[[0,0],e],n)}function ec(t,e,n){return Jo(t,(function(n){var i=+e,r=i/(n[1][0]-n[0][0]),s=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];t.scale(150*r).translate([s,a])}),n)}function nc(t,e,n){return Jo(t,(function(n){var i=+e,r=i/(n[1][1]-n[0][1]),s=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([s,a])}),n)}Xo.prototype={constructor:Xo,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ic=16,rc=Qs(30*Ys);function sc(t,e){return+e?function(t,e){function n(i,r,s,a,o,c,l,u,h,f,d,p,m,y){var g=l-i,b=u-r,v=g*g+b*b;if(v>4*e&&m--){var _=a+f,x=o+d,w=c+p,S=na(_*_+x*x+w*w),k=sa(w/=S),I=Hs(Hs(w)-1)<Vs||Hs(s-h)<Vs?(s+h)/2:Ks(x,_),A=t(I,k),T=A[0],M=A[1],E=T-i,C=M-r,N=b*E-g*C;(N*N/v>e||Hs((g*E+b*C)/v-.5)>.3||a*f+o*d+c*p<rc)&&(n(i,r,s,a,o,c,T,M,I,_/=S,x/=S,w,m,y),y.point(T,M),n(T,M,I,_,x,w,l,u,h,f,d,p,m,y))}}return function(e){var i,r,s,a,o,c,l,u,h,f,d,p,m={point:y,lineStart:g,lineEnd:v,polygonStart:function(){e.polygonStart(),m.lineStart=_},polygonEnd:function(){e.polygonEnd(),m.lineStart=g}};function y(n,i){n=t(n,i),e.point(n[0],n[1])}function g(){u=NaN,m.point=b,e.lineStart()}function b(i,r){var s=pa([i,r]),a=t(i,r);n(u,h,l,f,d,p,u=a[0],h=a[1],l=i,f=s[0],d=s[1],p=s[2],ic,e),e.point(u,h)}function v(){m.point=y,e.lineEnd()}function _(){g(),m.point=x,m.lineEnd=w}function x(t,e){b(i=t,e),r=u,s=h,a=f,o=d,c=p,m.point=b}function w(){n(u,h,l,f,d,p,r,s,i,a,o,c,ic,e),m.lineEnd=v,v()}return m}}(t,e):function(t){return Qo({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var ac=Qo({point:function(t,e){this.stream.point(t*Ys,e*Ys)}});function oc(t,e,n,i,r,s){if(!s)return function(t,e,n,i,r){function s(s,a){return[e+t*(s*=i),n-t*(a*=r)]}return s.invert=function(s,a){return[(s-e)/t*i,(n-a)/t*r]},s}(t,e,n,i,r);var a=Qs(s),o=ta(s),c=a*t,l=o*t,u=a/t,h=o/t,f=(o*n-a*e)/t,d=(o*e+a*n)/t;function p(t,s){return[c*(t*=i)-l*(s*=r)+e,n-l*t-c*s]}return p.invert=function(t,e){return[i*(u*t-h*e+f),r*(d-h*t-u*e)]},p}function cc(t){return lc((function(){return t}))()}function lc(t){var e,n,i,r,s,a,o,c,l,u,h=150,f=480,d=250,p=0,m=0,y=0,g=0,b=0,v=0,_=1,x=1,w=null,S=Ba,k=null,I=Wa,A=.5;function T(t){return c(t[0]*Ys,t[1]*Ys)}function M(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Ws,t[1]*Ws]}function E(){var t=oc(h,0,0,_,x,v).apply(null,e(p,m)),i=oc(h,f-t[0],d-t[1],_,x,v);return n=wa(y,g,b),o=_a(e,i),c=_a(n,o),a=sc(o,A),C()}function C(){return l=u=null,T}return T.stream=function(t){return l&&u===t?l:l=ac(function(t){return Qo({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(S(a(I(u=t)))))},T.preclip=function(t){return arguments.length?(S=t,w=void 0,C()):S},T.postclip=function(t){return arguments.length?(I=t,k=i=r=s=null,C()):I},T.clipAngle=function(t){return arguments.length?(S=+t?Fa(w=t*Ys):(w=null,Ba),C()):w*Ws},T.clipExtent=function(t){return arguments.length?(I=null==t?(k=i=r=s=null,Wa):Ua(k=+t[0][0],i=+t[0][1],r=+t[1][0],s=+t[1][1]),C()):null==k?null:[[k,i],[r,s]]},T.scale=function(t){return arguments.length?(h=+t,E()):h},T.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],E()):[f,d]},T.center=function(t){return arguments.length?(p=t[0]%360*Ys,m=t[1]%360*Ys,E()):[p*Ws,m*Ws]},T.rotate=function(t){return arguments.length?(y=t[0]%360*Ys,g=t[1]%360*Ys,b=t.length>2?t[2]%360*Ys:0,E()):[y*Ws,g*Ws,b*Ws]},T.angle=function(t){return arguments.length?(v=t%360*Ys,E()):v*Ws},T.reflectX=function(t){return arguments.length?(_=t?-1:1,E()):_<0},T.reflectY=function(t){return arguments.length?(x=t?-1:1,E()):x<0},T.precision=function(t){return arguments.length?(a=sc(o,A=t*t),C()):na(A)},T.fitExtent=function(t,e){return Zo(T,t,e)},T.fitSize=function(t,e){return tc(T,t,e)},T.fitWidth=function(t,e){return ec(T,t,e)},T.fitHeight=function(t,e){return nc(T,t,e)},function(){return e=t.apply(this,arguments),T.invert=e.invert&&M,E()}}function uc(t){var e=0,n=Rs/3,i=lc(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Ys,n=t[1]*Ys):[e*Ws,n*Ws]},r}function hc(t,e){var n=ta(t),i=(n+ta(e))/2;if(Hs(i)<Vs)return function(t){var e=Qs(t);function n(t,n){return[t*e,ta(n)/e]}return n.invert=function(t,n){return[t/e,sa(n*e)]},n}(t);var r=1+n*(2*i-n),s=na(r)/i;function a(t,e){var n=na(r-2*i*ta(e))/i;return[n*ta(t*=i),s-n*Qs(t)]}return a.invert=function(t,e){var n=s-e,a=Ks(t,Hs(n))*ea(n);return n*i<0&&(a-=Rs*ea(t)*ea(n)),[a/i,sa((r-(t*t+n*n)*i*i)/(2*i))]},a}function fc(){return uc(hc).scale(155.424).center([0,33.6442])}function dc(){return fc().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function pc(){var t,e,n,i,r,s,a=dc(),o=fc().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=fc().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){s=[t,e]}};function u(t){var e=t[0],a=t[1];return s=null,n.point(e,a),s||(i.point(e,a),s)||(r.point(e,a),s)}function h(){return t=e=null,u}return u.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?o:r>=.166&&r<.234&&i>=-.214&&i<-.115?c:a).invert(t)},u.stream=function(n){return t&&e===n?t:(i=[a.stream(e=n),o.stream(n),c.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},u.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),c.precision(t),h()):a.precision()},u.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),c.scale(t),u.translate(a.translate())):a.scale()},u.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),s=+t[0],u=+t[1];return n=a.translate(t).clipExtent([[s-.455*e,u-.238*e],[s+.455*e,u+.238*e]]).stream(l),i=o.translate([s-.307*e,u+.201*e]).clipExtent([[s-.425*e+Vs,u+.12*e+Vs],[s-.214*e-Vs,u+.234*e-Vs]]).stream(l),r=c.translate([s-.205*e,u+.212*e]).clipExtent([[s-.214*e+Vs,u+.166*e+Vs],[s-.115*e-Vs,u+.234*e-Vs]]).stream(l),h()},u.fitExtent=function(t,e){return Zo(u,t,e)},u.fitSize=function(t,e){return tc(u,t,e)},u.fitWidth=function(t,e){return ec(u,t,e)},u.fitHeight=function(t,e){return nc(u,t,e)},u.scale(1070)}function mc(t){return function(e,n){var i=Qs(e),r=Qs(n),s=t(i*r);return s===1/0?[2,0]:[s*r*ta(e),s*ta(n)]}}function yc(t){return function(e,n){var i=na(e*e+n*n),r=t(i),s=ta(r),a=Qs(r);return[Ks(e*s,i*a),sa(i&&n*s/i)]}}var gc=mc((function(t){return na(2/(1+t))}));function bc(){return cc(gc).scale(124.75).clipAngle(179.999)}gc.invert=yc((function(t){return 2*sa(t/2)}));var vc=mc((function(t){return(t=ra(t))&&t/ta(t)}));function _c(){return cc(vc).scale(79.4188).clipAngle(179.999)}function xc(t,e){return[t,Js(ia((js+e)/2))]}function wc(){return Sc(xc).scale(961/qs)}function Sc(t){var e,n,i,r=cc(t),s=r.center,a=r.scale,o=r.translate,c=r.clipExtent,l=null;function u(){var s=Rs*a(),o=r(function(t){function e(e){return(e=t(e[0]*Ys,e[1]*Ys))[0]*=Ws,e[1]*=Ws,e}return t=wa(t[0]*Ys,t[1]*Ys,t.length>2?t[2]*Ys:0),e.invert=function(e){return(e=t.invert(e[0]*Ys,e[1]*Ys))[0]*=Ws,e[1]*=Ws,e},e}(r.rotate()).invert([0,0]));return c(null==l?[[o[0]-s,o[1]-s],[o[0]+s,o[1]+s]]:t===xc?[[Math.max(o[0]-s,l),e],[Math.min(o[0]+s,n),i]]:[[l,Math.max(o[1]-s,e)],[n,Math.min(o[1]+s,i)]])}return r.scale=function(t){return arguments.length?(a(t),u()):a()},r.translate=function(t){return arguments.length?(o(t),u()):o()},r.center=function(t){return arguments.length?(s(t),u()):s()},r.clipExtent=function(t){return arguments.length?(null==t?l=e=n=i=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),u()):null==l?null:[[l,e],[n,i]]},u()}function kc(t){return ia((js+t)/2)}function Ic(t,e){var n=Qs(t),i=t===e?ta(t):Js(n/Qs(e))/Js(kc(e)/kc(t)),r=n*Zs(kc(t),i)/i;if(!i)return xc;function s(t,e){r>0?e<-js+Vs&&(e=-js+Vs):e>js-Vs&&(e=js-Vs);var n=r/Zs(kc(e),i);return[n*ta(i*t),r-n*Qs(i*t)]}return s.invert=function(t,e){var n=r-e,s=ea(i)*na(t*t+n*n),a=Ks(t,Hs(n))*ea(n);return n*i<0&&(a-=Rs*ea(t)*ea(n)),[a/i,2*Gs(Zs(r/s,1/i))-js]},s}function Ac(){return uc(Ic).scale(109.5).parallels([30,30])}function Tc(t,e){return[t,e]}function Mc(){return cc(Tc).scale(152.63)}function Ec(t,e){var n=Qs(t),i=t===e?ta(t):(n-Qs(e))/(e-t),r=n/i+t;if(Hs(i)<Vs)return Tc;function s(t,e){var n=r-e,s=i*t;return[n*ta(s),r-n*Qs(s)]}return s.invert=function(t,e){var n=r-e,s=Ks(t,Hs(n))*ea(n);return n*i<0&&(s-=Rs*ea(t)*ea(n)),[s/i,r-ea(i)*na(t*t+n*n)]},s}function Cc(){return uc(Ec).scale(131.154).center([0,13.9389])}vc.invert=yc((function(t){return t})),xc.invert=function(t,e){return[t,2*Gs(Xs(e))-js]},Tc.invert=Tc;var Nc=1.340264,Lc=-.081106,Oc=893e-6,Dc=.003796,$c=na(3)/2;function Bc(t,e){var n=sa($c*ta(e)),i=n*n,r=i*i*i;return[t*Qs(n)/($c*(Nc+3*Lc*i+r*(7*Oc+9*Dc*i))),n*(Nc+Lc*i+r*(Oc+Dc*i))]}function Fc(){return cc(Bc).scale(177.158)}function Pc(t,e){var n=Qs(e),i=Qs(t)*n;return[n*ta(t)/i,ta(e)/i]}function Vc(){return cc(Pc).scale(144.049).clipAngle(60)}function Uc(t,e){return[Qs(e)*ta(t),ta(e)]}function Rc(){return cc(Uc).scale(249.5).clipAngle(90+Vs)}function jc(t,e){var n=Qs(e),i=1+Qs(t)*n;return[n*ta(t)/i,ta(e)/i]}function zc(){return cc(jc).scale(250).clipAngle(142)}function qc(t,e){return[Js(ia((js+e)/2)),-t]}function Wc(){var t=Sc(qc),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}function Yc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Hc(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}Bc.invert=function(t,e){for(var n,i=e,r=i*i,s=r*r*r,a=0;a<12&&(s=(r=(i-=n=(i*(Nc+Lc*r+s*(Oc+Dc*r))-e)/(Nc+3*Lc*r+s*(7*Oc+9*Dc*r)))*i)*r*r,!(Hs(n)<Us));++a);return[$c*t*(Nc+3*Lc*r+s*(7*Oc+9*Dc*r))/Qs(i),sa(ta(i)/$c)]},Pc.invert=yc(Gs),Uc.invert=yc(sa),jc.invert=yc((function(t){return 2*Gs(t)})),qc.invert=function(t,e){return[-e,2*Gs(Xs(t))-js]};const Gc=Symbol("implicit");function Kc(){var t=new ct,e=[],n=[],i=Gc;function r(r){let s=t.get(r);if(void 0===s){if(i!==Gc)return i;t.set(r,s=e.push(r)-1)}return n[s%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new ct;for(const i of n)t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return Kc(e,n).unknown(i)},Yc.apply(r,arguments),r}function Qc(){var t,e,n=Kc().unknown(void 0),i=n.domain,r=n.range,s=0,a=1,o=!1,c=0,l=0,u=.5;function h(){var n=i().length,h=a<s,f=h?a:s,d=h?s:a;t=(d-f)/Math.max(1,n-c+2*l),o&&(t=Math.floor(t)),f+=(d-f-t*(n-c))*u,e=t*(1-c),o&&(f=Math.round(f),e=Math.round(e));var p=Ht(n).map((function(e){return f+t*e}));return r(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(i(t),h()):i()},n.range=function(t){return arguments.length?([s,a]=t,s=+s,a=+a,h()):[s,a]},n.rangeRound=function(t){return[s,a]=t,s=+s,a=+a,o=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,h()):o},n.padding=function(t){return arguments.length?(c=Math.min(1,l=+t),h()):c},n.paddingInner=function(t){return arguments.length?(c=Math.min(1,t),h()):c},n.paddingOuter=function(t){return arguments.length?(l=+t,h()):l},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u},n.copy=function(){return Qc(i(),[s,a]).round(o).paddingInner(c).paddingOuter(l).align(u)},Yc.apply(h(),arguments)}function Xc(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Xc(e())},t}function Jc(){return Xc(Qc.apply(null,arguments).paddingInner(1))}function Zc(t){return+t}var tl=[0,1];function el(t){return t}function nl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function il(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=nl(r,i),s=n(a,s)):(i=nl(i,r),s=n(s,a)),function(t){return s(i(t))}}function rl(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=nl(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(e){var n=X(t,e,1,i)-1;return s[n](r[n](e))}}function sl(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function al(){var t,e,n,i,r,s,a=tl,o=tl,c=tr,l=el;function u(){var t=Math.min(a.length,o.length);return l!==el&&(l=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(a[0],a[t-1])),i=t>2?rl:il,r=s=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=i(a.map(t),o,c)))(t(l(e)))}return h.invert=function(n){return l(e((s||(s=i(o,a.map(t),Ki)))(n)))},h.domain=function(t){return arguments.length?(a=Array.from(t,Zc),u()):a.slice()},h.range=function(t){return arguments.length?(o=Array.from(t),u()):o.slice()},h.rangeRound=function(t){return o=Array.from(t),c=er,u()},h.clamp=function(t){return arguments.length?(l=!!t||el,u()):l!==el},h.interpolate=function(t){return arguments.length?(c=t,u()):c},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,u()}}function ol(){return al()(el,el)}function cl(t,e,n,i){var r,s=Et(t,e,n);switch((i=Ms(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Is(e)/3)))-Is(Math.abs(t)))}(s,a))||(i.precision=r),$s(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Is(e)-Is(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-Is(Math.abs(t)))}(s))||(i.precision=r-2*("%"===i.type))}return Ds(i)}function ll(t){var e=t.domain;return t.ticks=function(t){var n=e();return Tt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return cl(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,s=e(),a=0,o=s.length-1,c=s[a],l=s[o],u=10;for(l<c&&(r=c,c=l,l=r,r=a,a=o,o=r);u-- >0;){if((r=Mt(c,l,n))===i)return s[a]=c,s[o]=l,e(s);if(r>0)c=Math.floor(c/r)*r,l=Math.ceil(l/r)*r;else{if(!(r<0))break;c=Math.ceil(c*r)/r,l=Math.floor(l*r)/r}i=r}return t},t}function ul(){var t=ol();return t.copy=function(){return sl(t,ul())},Yc.apply(t,arguments),ll(t)}function hl(t){var e;function n(t){return null==t||isNaN(t=+t)?e:t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,Zc),n):t.slice()},n.unknown=function(t){return arguments.length?(e=t,n):e},n.copy=function(){return hl(t).unknown(e)},t=arguments.length?Array.from(t,Zc):[0,1],ll(n)}function fl(t,e){var n,i=0,r=(t=t.slice()).length-1,s=t[i],a=t[r];return a<s&&(n=i,i=r,r=n,n=s,s=a,a=n),t[i]=e.floor(s),t[r]=e.ceil(a),t}function dl(t){return Math.log(t)}function pl(t){return Math.exp(t)}function ml(t){return-Math.log(-t)}function yl(t){return-Math.exp(-t)}function gl(t){return isFinite(t)?+("1e"+t):t<0?0:t}function bl(t){return(e,n)=>-t(-e,n)}function vl(t){const e=t(dl,pl),n=e.domain;let i,r,s=10;function a(){return i=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}(s),r=function(t){return 10===t?gl:t===Math.E?Math.exp:e=>Math.pow(t,e)}(s),n()[0]<0?(i=bl(i),r=bl(r),t(ml,yl)):t(dl,pl),e}return e.base=function(t){return arguments.length?(s=+t,a()):s},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=t=>{const e=n();let a=e[0],o=e[e.length-1];const c=o<a;c&&([a,o]=[o,a]);let l,u,h=i(a),f=i(o);const d=null==t?10:+t;let p=[];if(!(s%1)&&f-h<d){if(h=Math.floor(h),f=Math.ceil(f),a>0){for(;h<=f;++h)for(l=1;l<s;++l)if(u=h<0?l/r(-h):l*r(h),!(u<a)){if(u>o)break;p.push(u)}}else for(;h<=f;++h)for(l=s-1;l>=1;--l)if(u=h>0?l/r(-h):l*r(h),!(u<a)){if(u>o)break;p.push(u)}2*p.length<d&&(p=Tt(a,o,d))}else p=Tt(h,f,Math.min(f-h,d)).map(r);return c?p.reverse():p},e.tickFormat=(t,n)=>{if(null==t&&(t=10),null==n&&(n=10===s?"s":","),"function"!=typeof n&&(s%1||null!=(n=Ms(n)).precision||(n.trim=!0),n=Ds(n)),t===1/0)return n;const a=Math.max(1,s*t/e.ticks().length);return t=>{let e=t/r(Math.round(i(t)));return e*s<s-.5&&(e*=s),e<=a?n(t):""}},e.nice=()=>n(fl(n(),{floor:t=>r(Math.floor(i(t))),ceil:t=>r(Math.ceil(i(t)))})),e}function _l(){const t=vl(al()).domain([1,10]);return t.copy=()=>sl(t,_l()).base(t.base()),Yc.apply(t,arguments),t}function xl(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function wl(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Sl(t){var e=1,n=t(xl(e),wl(e));return n.constant=function(n){return arguments.length?t(xl(e=+n),wl(e)):e},ll(n)}function kl(){var t=Sl(al());return t.copy=function(){return sl(t,kl()).constant(t.constant())},Yc.apply(t,arguments)}function Il(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Al(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Tl(t){return t<0?-t*t:t*t}function Ml(t){var e=t(el,el),n=1;return e.exponent=function(e){return arguments.length?1===(n=+e)?t(el,el):.5===n?t(Al,Tl):t(Il(n),Il(1/n)):n},ll(e)}function El(){var t=Ml(al());return t.copy=function(){return sl(t,El()).exponent(t.exponent())},Yc.apply(t,arguments),t}function Cl(){var t,e=[],n=[],i=[];function r(){var t=0,r=Math.max(1,n.length);for(i=new Array(r-1);++t<r;)i[t-1]=Vt(e,t/r);return s}function s(e){return null==e||isNaN(e=+e)?t:n[X(i,e)]}return s.invertExtent=function(t){var r=n.indexOf(t);return r<0?[NaN,NaN]:[r>0?i[r-1]:e[0],r<i.length?i[r]:e[e.length-1]]},s.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(W),r()},s.range=function(t){return arguments.length?(n=Array.from(t),r()):n.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return i.slice()},s.copy=function(){return Cl().domain(e).range(n).unknown(t)},Yc.apply(s,arguments)}function Nl(){var t,e=[.5],n=[0,1],i=1;function r(r){return null!=r&&r<=r?n[X(e,r,0,i)]:t}return r.domain=function(t){return arguments.length?(e=Array.from(t),i=Math.min(e.length,n.length-1),r):e.slice()},r.range=function(t){return arguments.length?(n=Array.from(t),i=Math.min(e.length,n.length-1),r):n.slice()},r.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Nl().domain(e).range(n).unknown(t)},Yc.apply(r,arguments)}const Ll=new Date,Ol=new Date;function Dl(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=e=>(t(e=new Date(+e)),e),r.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),r.round=t=>{const e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),r.range=(n,i,s)=>{const a=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return a;let o;do{a.push(o=new Date(+n)),e(n,s),t(n)}while(o<n&&n<i);return a},r.filter=n=>Dl((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,i)=>{if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})),n&&(r.count=(e,i)=>(Ll.setTime(+e),Ol.setTime(+i),t(Ll),t(Ol),Math.floor(n(Ll,Ol))),r.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?e=>i(e)%t==0:e=>r.count(0,e)%t==0):r:null)),r}const $l=Dl((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t));$l.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Dl((e=>{e.setTime(Math.floor(e/t)*t)}),((e,n)=>{e.setTime(+e+n*t)}),((e,n)=>(n-e)/t)):$l:null),$l.range;const Bl=1e3,Fl=6e4,Pl=36e5,Vl=864e5,Ul=6048e5,Rl=2592e6,jl=31536e6,zl=Dl((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+e*Bl)}),((t,e)=>(e-t)/Bl),(t=>t.getUTCSeconds()));zl.range;const ql=Dl((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bl)}),((t,e)=>{t.setTime(+t+e*Fl)}),((t,e)=>(e-t)/Fl),(t=>t.getMinutes()));ql.range;const Wl=Dl((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+e*Fl)}),((t,e)=>(e-t)/Fl),(t=>t.getUTCMinutes()));Wl.range;const Yl=Dl((t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Bl-t.getMinutes()*Fl)}),((t,e)=>{t.setTime(+t+e*Pl)}),((t,e)=>(e-t)/Pl),(t=>t.getHours()));Yl.range;const Hl=Dl((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+e*Pl)}),((t,e)=>(e-t)/Pl),(t=>t.getUTCHours()));Hl.range;const Gl=Dl((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fl)/Vl),(t=>t.getDate()-1));Gl.range;const Kl=Dl((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Vl),(t=>t.getUTCDate()-1));Kl.range;const Ql=Dl((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/Vl),(t=>Math.floor(t/Vl)));function Xl(t){return Dl((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fl)/Ul))}Ql.range;const Jl=Xl(0),Zl=Xl(1),tu=Xl(2),eu=Xl(3),nu=Xl(4),iu=Xl(5),ru=Xl(6);function su(t){return Dl((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/Ul))}Jl.range,Zl.range,tu.range,eu.range,nu.range,iu.range,ru.range;const au=su(0),ou=su(1),cu=su(2),lu=su(3),uu=su(4),hu=su(5),fu=su(6);au.range,ou.range,cu.range,lu.range,uu.range,hu.range,fu.range;const du=Dl((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth()));du.range;const pu=Dl((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth()));pu.range;const mu=Dl((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));mu.every=t=>isFinite(t=Math.floor(t))&&t>0?Dl((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,mu.range;const yu=Dl((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));function gu(t,e,n,i,r,s){const a=[[zl,1,Bl],[zl,5,5e3],[zl,15,15e3],[zl,30,3e4],[s,1,Fl],[s,5,3e5],[s,15,9e5],[s,30,18e5],[r,1,Pl],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,Vl],[i,2,1728e5],[n,1,Ul],[e,1,Rl],[e,3,7776e6],[t,1,jl]];function o(e,n,i){const r=Math.abs(n-e)/i,s=H((([,,t])=>t)).right(a,r);if(s===a.length)return t.every(Et(e/jl,n/jl,i));if(0===s)return $l.every(Math.max(Et(e,n,i),1));const[o,c]=a[r/a[s-1][2]<a[s][2]/r?s-1:s];return o.every(c)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:o(t,e,n),s=r?r.range(t,+e+1):[];return i?s.reverse():s},o]}yu.every=t=>isFinite(t=Math.floor(t))&&t>0?Dl((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,yu.range;const[bu,vu]=gu(yu,pu,au,Ql,Hl,Wl),[_u,xu]=gu(mu,du,Jl,Gl,Yl,ql);function wu(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Su(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ku(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var Iu,Au,Tu,Mu={"-":"",_:" ",0:"0"},Eu=/^\s*\d+/,Cu=/^%/,Nu=/[\\^$*+?|[\]().{}]/g;function Lu(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function Ou(t){return t.replace(Nu,"\\$&")}function Du(t){return new RegExp("^(?:"+t.map(Ou).join("|")+")","i")}function $u(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Bu(t,e,n){var i=Eu.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Fu(t,e,n){var i=Eu.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Pu(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Vu(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Uu(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Ru(t,e,n){var i=Eu.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function ju(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function zu(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function qu(t,e,n){var i=Eu.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function Wu(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Yu(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Hu(t,e,n){var i=Eu.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Gu(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Ku(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Qu(t,e,n){var i=Eu.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Xu(t,e,n){var i=Eu.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Ju(t,e,n){var i=Eu.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function Zu(t,e,n){var i=Cu.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function th(t,e,n){var i=Eu.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function eh(t,e,n){var i=Eu.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function nh(t,e){return Lu(t.getDate(),e,2)}function ih(t,e){return Lu(t.getHours(),e,2)}function rh(t,e){return Lu(t.getHours()%12||12,e,2)}function sh(t,e){return Lu(1+Gl.count(mu(t),t),e,3)}function ah(t,e){return Lu(t.getMilliseconds(),e,3)}function oh(t,e){return ah(t,e)+"000"}function ch(t,e){return Lu(t.getMonth()+1,e,2)}function lh(t,e){return Lu(t.getMinutes(),e,2)}function uh(t,e){return Lu(t.getSeconds(),e,2)}function hh(t){var e=t.getDay();return 0===e?7:e}function fh(t,e){return Lu(Jl.count(mu(t)-1,t),e,2)}function dh(t){var e=t.getDay();return e>=4||0===e?nu(t):nu.ceil(t)}function ph(t,e){return t=dh(t),Lu(nu.count(mu(t),t)+(4===mu(t).getDay()),e,2)}function mh(t){return t.getDay()}function yh(t,e){return Lu(Zl.count(mu(t)-1,t),e,2)}function gh(t,e){return Lu(t.getFullYear()%100,e,2)}function bh(t,e){return Lu((t=dh(t)).getFullYear()%100,e,2)}function vh(t,e){return Lu(t.getFullYear()%1e4,e,4)}function _h(t,e){var n=t.getDay();return Lu((t=n>=4||0===n?nu(t):nu.ceil(t)).getFullYear()%1e4,e,4)}function xh(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Lu(e/60|0,"0",2)+Lu(e%60,"0",2)}function wh(t,e){return Lu(t.getUTCDate(),e,2)}function Sh(t,e){return Lu(t.getUTCHours(),e,2)}function kh(t,e){return Lu(t.getUTCHours()%12||12,e,2)}function Ih(t,e){return Lu(1+Kl.count(yu(t),t),e,3)}function Ah(t,e){return Lu(t.getUTCMilliseconds(),e,3)}function Th(t,e){return Ah(t,e)+"000"}function Mh(t,e){return Lu(t.getUTCMonth()+1,e,2)}function Eh(t,e){return Lu(t.getUTCMinutes(),e,2)}function Ch(t,e){return Lu(t.getUTCSeconds(),e,2)}function Nh(t){var e=t.getUTCDay();return 0===e?7:e}function Lh(t,e){return Lu(au.count(yu(t)-1,t),e,2)}function Oh(t){var e=t.getUTCDay();return e>=4||0===e?uu(t):uu.ceil(t)}function Dh(t,e){return t=Oh(t),Lu(uu.count(yu(t),t)+(4===yu(t).getUTCDay()),e,2)}function $h(t){return t.getUTCDay()}function Bh(t,e){return Lu(ou.count(yu(t)-1,t),e,2)}function Fh(t,e){return Lu(t.getUTCFullYear()%100,e,2)}function Ph(t,e){return Lu((t=Oh(t)).getUTCFullYear()%100,e,2)}function Vh(t,e){return Lu(t.getUTCFullYear()%1e4,e,4)}function Uh(t,e){var n=t.getUTCDay();return Lu((t=n>=4||0===n?uu(t):uu.ceil(t)).getUTCFullYear()%1e4,e,4)}function Rh(){return"+0000"}function jh(){return"%"}function zh(t){return+t}function qh(t){return Math.floor(+t/1e3)}function Wh(t){return new Date(t)}function Yh(t){return t instanceof Date?+t:+new Date(+t)}function Hh(t,e,n,i,r,s,a,o,c,l){var u=ol(),h=u.invert,f=u.domain,d=l(".%L"),p=l(":%S"),m=l("%I:%M"),y=l("%I %p"),g=l("%a %d"),b=l("%b %d"),v=l("%B"),_=l("%Y");function x(t){return(c(t)<t?d:o(t)<t?p:a(t)<t?m:s(t)<t?y:i(t)<t?r(t)<t?g:b:n(t)<t?v:_)(t)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?f(Array.from(t,Yh)):f().map(Wh)},u.ticks=function(e){var n=f();return t(n[0],n[n.length-1],null==e?10:e)},u.tickFormat=function(t,e){return null==e?x:l(e)},u.nice=function(t){var n=f();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?f(fl(n,t)):u},u.copy=function(){return sl(u,Hh(t,e,n,i,r,s,a,o,c,l))},u}function Gh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Kh(){var t,e,n,i,r,s,a,o=0,c=.5,l=1,u=1,h=el,f=!1;function d(t){return isNaN(t=+t)?a:(t=.5+((t=+s(t))-e)*(u*t<u*e?i:r),h(f?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,i,r;return arguments.length?([n,i,r]=e,h=dr(t,[n,i,r]),d):[h(0),h(.5),h(1)]}}return d.domain=function(a){return arguments.length?([o,c,l]=a,t=s(o=+o),e=s(c=+c),n=s(l=+l),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),u=e<t?-1:1,d):[o,c,l]},d.clamp=function(t){return arguments.length?(f=!!t,d):f},d.interpolator=function(t){return arguments.length?(h=t,d):h},d.range=p(tr),d.rangeRound=p(er),d.unknown=function(t){return arguments.length?(a=t,d):a},function(a){return s=a,t=a(o),e=a(c),n=a(l),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),u=e<t?-1:1,d}}function Qh(){var t=ll(Kh()(el));return t.copy=function(){return Gh(t,Qh())},Hc.apply(t,arguments)}function Xh(){var t=vl(Kh()).domain([.1,1,10]);return t.copy=function(){return Gh(t,Xh()).base(t.base())},Hc.apply(t,arguments)}function Jh(){var t=Sl(Kh());return t.copy=function(){return Gh(t,Jh()).constant(t.constant())},Hc.apply(t,arguments)}function Zh(){var t=Ml(Kh());return t.copy=function(){return Gh(t,Zh()).exponent(t.exponent())},Hc.apply(t,arguments)}function tf(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}!function(t){Iu=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,o=t.months,c=t.shortMonths,l=Du(r),u=$u(r),h=Du(s),f=$u(s),d=Du(a),p=$u(a),m=Du(o),y=$u(o),g=Du(c),b=$u(c),v={a:function(t){return a[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:nh,e:nh,f:oh,g:bh,G:_h,H:ih,I:rh,j:sh,L:ah,m:ch,M:lh,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:zh,s:qh,S:uh,u:hh,U:fh,V:ph,w:mh,W:yh,x:null,X:null,y:gh,Y:vh,Z:xh,"%":jh},_={a:function(t){return a[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:wh,e:wh,f:Th,g:Ph,G:Uh,H:Sh,I:kh,j:Ih,L:Ah,m:Mh,M:Eh,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:zh,s:qh,S:Ch,u:Nh,U:Lh,V:Dh,w:$h,W:Bh,x:null,X:null,y:Fh,Y:Vh,Z:Rh,"%":jh},x={a:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=f.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=b.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=y.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return k(t,e,n,i)},d:Yu,e:Yu,f:Ju,g:ju,G:Ru,H:Gu,I:Gu,j:Hu,L:Xu,m:Wu,M:Ku,p:function(t,e,n){var i=l.exec(e.slice(n));return i?(t.p=u.get(i[0].toLowerCase()),n+i[0].length):-1},q:qu,Q:th,s:eh,S:Qu,u:Fu,U:Pu,V:Vu,w:Bu,W:Uu,x:function(t,e,i){return k(t,n,e,i)},X:function(t,e,n){return k(t,i,e,n)},y:ju,Y:Ru,Z:zu,"%":Zu};function w(t,e){return function(n){var i,r,s,a=[],o=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++o<l;)37===t.charCodeAt(o)&&(a.push(t.slice(c,o)),null!=(r=Mu[i=t.charAt(++o)])?i=t.charAt(++o):r="e"===i?" ":"0",(s=e[i])&&(i=s(n,r)),a.push(i),c=o+1);return a.push(t.slice(c,o)),a.join("")}}function S(t,e){return function(n){var i,r,s=ku(1900,void 0,1);if(k(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(e&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=Su(ku(s.y,0,1))).getUTCDay(),i=r>4||0===r?ou.ceil(i):ou(i),i=Kl.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=wu(ku(s.y,0,1))).getDay(),i=r>4||0===r?Zl.ceil(i):Zl(i),i=Gl.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?Su(ku(s.y,0,1)).getUTCDay():wu(ku(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Su(s)):wu(s)}}function k(t,e,n,i){for(var r,s,a=0,o=e.length,c=n.length;a<o;){if(i>=c)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(s=x[r in Mu?e.charAt(a++):r])||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=w(n,v),v.X=w(i,v),v.c=w(e,v),_.x=w(n,_),_.X=w(i,_),_.c=w(e,_),{format:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=S(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},utcParse:function(t){var e=S(t+="",!0);return e.toString=function(){return t},e}}}(t),Au=Iu.format,Iu.parse,Tu=Iu.utcFormat,Iu.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ef=tf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),nf=tf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),rf=tf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),sf=tf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),af=tf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),of=tf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cf=tf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),lf=tf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),uf=tf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),hf=tf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ff=t=>Wi(t[t.length-1]),df=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(tf),pf=ff(df),mf=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(tf),yf=ff(mf),gf=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(tf),bf=ff(gf),vf=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(tf),_f=ff(vf),xf=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(tf),wf=ff(xf),Sf=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(tf),kf=ff(Sf),If=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(tf),Af=ff(If),Tf=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(tf),Mf=ff(Tf),Ef=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(tf),Cf=ff(Ef),Nf=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(tf),Lf=ff(Nf),Of=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(tf),Df=ff(Of),$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(tf),Bf=ff($f),Ff=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(tf),Pf=ff(Ff),Vf=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(tf),Uf=ff(Vf),Rf=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(tf),jf=ff(Rf),zf=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(tf),qf=ff(zf),Wf=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(tf),Yf=ff(Wf),Hf=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(tf),Gf=ff(Hf),Kf=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(tf),Qf=ff(Kf),Xf=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(tf),Jf=ff(Xf),Zf=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(tf),td=ff(Zf),ed=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(tf),nd=ff(ed),id=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(tf),rd=ff(id),sd=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(tf),ad=ff(sd),od=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(tf),cd=ff(od),ld=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(tf),ud=ff(ld),hd=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(tf),fd=ff(hd);function dd(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"}var pd=fr(Bi(300,.5,0),Bi(-240,.5,1)),md=fr(Bi(-100,.75,.35),Bi(80,1.5,.8)),yd=fr(Bi(260,.75,.35),Bi(80,1.5,.8)),gd=Bi();function bd(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return gd.h=360*t-100,gd.s=1.5-1.5*e,gd.l=.8-.9*e,gd+""}var vd=Kn(),_d=Math.PI/3,xd=2*Math.PI/3;function wd(t){var e;return t=(.5-t)*Math.PI,vd.r=255*(e=Math.sin(t))*e,vd.g=255*(e=Math.sin(t+_d))*e,vd.b=255*(e=Math.sin(t+xd))*e,vd+""}function Sd(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"}function kd(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Id=kd(tf("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Ad=kd(tf("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Td=kd(tf("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Md=kd(tf("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ed(t){return function(){return t}}const Cd=Math.cos,Nd=Math.min,Ld=Math.sin,Od=Math.sqrt,Dd=Math.PI,$d=2*Dd;function Bd(t){this._context=t}function Fd(t){return new Bd(t)}function Pd(t){return t[0]}function Vd(t){return t[1]}function Ud(t,e){var n=Ed(!0),i=null,r=Fd,s=null,a=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new ws(e)}(o);function o(o){var c,l,u,h=(o=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(o)).length,f=!1;for(null==i&&(s=r(u=a())),c=0;c<=h;++c)!(c<h&&n(l=o[c],c,o))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(l,c,o),+e(l,c,o));if(u)return s=null,u+""||null}return t="function"==typeof t?t:void 0===t?Pd:Ed(t),e="function"==typeof e?e:void 0===e?Vd:Ed(e),o.x=function(e){return arguments.length?(t="function"==typeof e?e:Ed(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Ed(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:Ed(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=i&&(s=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=s=null:s=r(i=t),o):i},o}Bd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};class Rd{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}const jd=Od(3);var zd={draw(t,e){const n=.59436*Od(e+Nd(e/28,.75)),i=n/2,r=i*jd;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},qd={draw(t,e){const n=Od(e/Dd);t.moveTo(n,0),t.arc(0,0,n,0,$d)}},Wd={draw(t,e){const n=Od(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};const Yd=Od(1/3),Hd=2*Yd;var Gd={draw(t,e){const n=Od(e/Hd),i=n*Yd;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Kd={draw(t,e){const n=.62625*Od(e);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},Qd={draw(t,e){const n=.87559*Od(e-Nd(e/7,2));t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Xd={draw(t,e){const n=Od(e),i=-n/2;t.rect(i,i,n,n)}},Jd={draw(t,e){const n=.4431*Od(e);t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}};const Zd=Ld(Dd/10)/Ld(7*Dd/10),tp=Ld($d/10)*Zd,ep=-Cd($d/10)*Zd;var np={draw(t,e){const n=Od(.8908130915292852*e),i=tp*n,r=ep*n;t.moveTo(0,-n),t.lineTo(i,r);for(let e=1;e<5;++e){const s=$d*e/5,a=Cd(s),o=Ld(s);t.lineTo(o*n,-a*n),t.lineTo(a*i-o*r,o*i+a*r)}t.closePath()}};const ip=Od(3);var rp={draw(t,e){const n=-Od(e/(3*ip));t.moveTo(0,2*n),t.lineTo(-ip*n,-n),t.lineTo(ip*n,-n),t.closePath()}};const sp=Od(3);var ap={draw(t,e){const n=.6824*Od(e),i=n/2,r=n*sp/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}};const op=-.5,cp=Od(3)/2,lp=1/Od(12),up=3*(lp/2+1);var hp={draw(t,e){const n=Od(e/up),i=n/2,r=n*lp,s=i,a=n*lp+n,o=-s,c=a;t.moveTo(i,r),t.lineTo(s,a),t.lineTo(o,c),t.lineTo(op*i-cp*r,cp*i+op*r),t.lineTo(op*s-cp*a,cp*s+op*a),t.lineTo(op*o-cp*c,cp*o+op*c),t.lineTo(op*i+cp*r,op*r-cp*i),t.lineTo(op*s+cp*a,op*a-cp*s),t.lineTo(op*o+cp*c,op*c-cp*o),t.closePath()}},fp={draw(t,e){const n=.6189*Od(e-Nd(e/6,1.7));t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}};const dp=[qd,Wd,Gd,Xd,np,rp,hp],pp=[qd,Qd,fp,ap,zd,Jd,Kd];function mp(){}function yp(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gp(t){this._context=t}function bp(t){this._context=t}function vp(t){this._context=t}function _p(t,e){this._basis=new gp(t),this._beta=e}gp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yp(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yp(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bp.prototype={areaStart:mp,areaEnd:mp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:yp(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},vp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:yp(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_p.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],s=e[0],a=t[n]-r,o=e[n]-s,c=-1;++c<=n;)i=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(r+i*a),this._beta*e[c]+(1-this._beta)*(s+i*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var xp=function t(e){function n(t){return 1===e?new gp(t):new _p(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function wp(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Sp(t,e){this._context=t,this._k=(1-e)/6}Sp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:wp(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:wp(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var kp=function t(e){function n(t){return new Sp(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ip(t,e){this._context=t,this._k=(1-e)/6}Ip.prototype={areaStart:mp,areaEnd:mp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:wp(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ap=function t(e){function n(t){return new Ip(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Tp(t,e){this._context=t,this._k=(1-e)/6}Tp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:wp(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Mp=function t(e){function n(t){return new Tp(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ep(t,e,n){var i=t._x1,r=t._y1,s=t._x2,a=t._y2;if(t._l01_a>1e-12){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>1e-12){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*l+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,s,a,t._x2,t._y2)}function Cp(t,e){this._context=t,this._alpha=e}Cp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ep(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Np=function t(e){function n(t){return e?new Cp(t,e):new Sp(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Lp(t,e){this._context=t,this._alpha=e}Lp.prototype={areaStart:mp,areaEnd:mp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ep(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Op=function t(e){function n(t){return e?new Lp(t,e):new Ip(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Dp(t,e){this._context=t,this._alpha=e}Dp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ep(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var $p=function t(e){function n(t){return e?new Dp(t,e):new Tp(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Bp(t){this._context=t}function Fp(t){return t<0?-1:1}function Pp(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),o=(s*r+a*i)/(i+r);return(Fp(s)+Fp(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function Vp(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Up(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,o=(s-i)/3;t._context.bezierCurveTo(i+o,r+o*e,s-o,a-o*n,s,a)}function Rp(t){this._context=t}function jp(t){this._context=new zp(t)}function zp(t){this._context=t}function qp(t){this._context=t}function Wp(t){var e,n,i=t.length-1,r=new Array(i),s=new Array(i),a=new Array(i);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,s[i-1]=7,a[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/s[e-1],s[e]-=n,a[e]-=n*a[e-1];for(r[i-1]=a[i-1]/s[i-1],e=i-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function Yp(t,e){this._context=t,this._t=e}function Hp(t,e,n){this.k=t,this.x=e,this.y=n}function Gp(t){return null!=t&&!Number.isNaN(t)}function Kp(t,e){return+Gp(e)-+Gp(t)||W(t,e)}function Qp(t,e){return+Gp(e)-+Gp(t)||Y(t,e)}function Xp(t){return null!=t&&""!=`${t}`}function Jp(t){return isFinite(t)?t:NaN}function Zp(t){return t>0&&isFinite(t)?t:NaN}function tm(t){return t<0&&isFinite(t)?t:NaN}function em(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return"function"==typeof e?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),s=t.getUTCMilliseconds();return`${a=t.getUTCFullYear(),a<0?`-${nm(-a,6)}`:a>9999?`+${nm(a,6)}`:nm(a,4)}-${nm(t.getUTCMonth()+1,2)}-${nm(t.getUTCDate(),2)}${n||i||r||s?`T${nm(n,2)}:${nm(i,2)}${r||s?`:${nm(r,2)}${s?`.${nm(s,3)}`:""}`:""}Z`:""}`;var a}function nm(t,e){return`${t}`.padStart(e,"0")}Bp.prototype={areaStart:mp,areaEnd:mp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Rp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Up(this,this._t0,Vp(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Up(this,Vp(this,n=Pp(this,t,e)),n);break;default:Up(this,this._t0,n=Pp(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(jp.prototype=Object.create(Rp.prototype)).point=function(t,e){Rp.prototype.point.call(this,e,t)},zp.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}},qp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Wp(t),r=Wp(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Yp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},Hp.prototype={constructor:Hp,scale:function(t){return 1===t?this:new Hp(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Hp(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},Hp.prototype;const im=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function rm(t,e){return im.test(t+="")?new Date(t):"function"==typeof e?e(t):e}const sm=1e3,am=6e4,om=36e5,cm=864e5,lm=7*cm,um=30*cm,hm=365*cm,fm=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",sm],["5 seconds",5e3],["15 seconds",15e3],["30 seconds",3e4],["minute",am],["5 minutes",3e5],["15 minutes",9e5],["30 minutes",18e5],["hour",om],["3 hours",108e5],["6 hours",216e5],["12 hours",432e5],["day",cm],["2 days",2*cm],["week",lm],["2 weeks",2*lm],["month",um],["3 months",3*um],["6 months",6*um],["year",hm],["2 years",2*hm],["5 years",5*hm],["10 years",10*hm],["20 years",20*hm],["50 years",50*hm],["100 years",100*hm]],dm=new Map([["second",sm],["minute",am],["hour",om],["day",cm],["monday",lm],["tuesday",lm],["wednesday",lm],["thursday",lm],["friday",lm],["saturday",lm],["sunday",lm],["week",lm],["month",um],["year",hm]]),pm=new Map([["second",zl],["minute",ql],["hour",Yl],["day",Gl],["monday",Zl],["tuesday",tu],["wednesday",eu],["thursday",nu],["friday",iu],["saturday",ru],["sunday",Jl],["week",Jl],["month",du],["year",mu]]),mm=new Map([["second",zl],["minute",Wl],["hour",Hl],["day",Ql],["monday",ou],["tuesday",cu],["wednesday",lu],["thursday",uu],["friday",hu],["saturday",fu],["sunday",au],["week",au],["month",pu],["year",yu]]),ym=Symbol("intervalDuration"),gm=Symbol("intervalType");for(const[t,e]of pm)e[ym]=dm.get(t),e[gm]="time";for(const[t,e]of mm)e[ym]=dm.get(t),e[gm]="utc";const bm=[["year",yu,"utc"],["year",mu,"time"],["month",pu,"utc"],["month",du,"time"],["day",Ql,"utc",6*um],["day",Gl,"time",6*um],["hour",Hl,"utc",3*cm],["minute",Wl,"utc",216e5],["second",zl,"utc",18e5]];function vm(t,e,n){let i=`${t}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let r=1;const s=/^(?:(\d+)\s+)/.exec(i);switch(s&&(i=i.slice(s[0].length),r=+s[1]),i){case"quarter":i="month",r*=3;break;case"half":i="month",r*=6}let a=e.get(i);if(!a)throw new Error(`unknown interval: ${t}`);if(r>1){if(!a.every)throw new Error(`non-periodic interval: ${i}`);a=a.every(r),a[ym]=dm.get(i)*r,a[gm]=n}return a}function _m(t){return vm(t,pm,"time")}function xm(t){return vm(t,mm,"utc")}function wm(t,e){if(!(e>1))return;const n=t[ym];if(!fm.some((([,t])=>t===n)))return;if(n%cm==0&&cm<n&&n<um)return;const[i]=fm[H((([,t])=>Math.log(t))).center(fm,Math.log(n*e))];return("time"===t[gm]?_m:xm)(i)}function Sm(t,e,n){const i="time"===e?Au:Tu;if(null==n)return i("year"===t?"%Y":"month"===t?"%Y-%m":"day"===t?"%Y-%m-%d":"hour"===t||"minute"===t?"%Y-%m-%dT%H:%M":"second"===t?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=function(t){return"left"===t||"right"===t?(t,e)=>`\n${t}\n${e}`:"top"===t?(t,e)=>`${e}\n${t}`:(t,e)=>`${t}\n${e}`}(n);switch(t){case"millisecond":return Im(i(".%L"),i(":%M:%S"),r);case"second":return Im(i(":%S"),i("%-I:%M"),r);case"minute":return Im(i("%-I:%M"),i("%p"),r);case"hour":return Im(i("%-I %p"),i("%b %-d"),r);case"day":return Im(i("%-d"),i("%b"),r);case"month":return Im(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function km(t,e){const n=Nt(function(t,e=Yt){const n=[];let i,r=!1;for(const s of t)r&&n.push(e(i,s)),i=s,r=!0;return n}(t,((t,e)=>Math.abs(e-t))));if(n<1e3)return Sm("millisecond","utc",e);for(const[i,r,s,a]of bm){if(n>a)break;if("hour"===i&&!n)break;if(t.every((t=>r.floor(t)>=t)))return Sm(i,s,e)}}function Im(t,e,n){return(i,r,s)=>{const a=t(i,r),o=e(i,r),c=r-By(s);return r!==c&&void 0!==s[c]&&o===e(s[c],c)?a:n(a,o)}}const Am=Object.getPrototypeOf(Uint8Array),Tm=Object.prototype.toString,Mm=Symbol("reindex");function Em(t,e,n){const i=typeof e;return"string"===i?Cm(t,Om(e),n):"function"===i?Cm(t,e,n):"number"===i||e instanceof Date||"boolean"===i?Jm(t,jm(e),n):"function"==typeof e?.transform?Nm(e.transform(t),n):function(t,e){return e?cy(t,e):t}(Nm(e,n),t?.[Mm])}function Cm(t,e,n){return Jm(t,n?.prototype instanceof Am?function(t){return(e,n)=>qm(t(e,n))}(e):e,n)}function Nm(t,e){return void 0===e?Xm(t):t instanceof e?t:e.prototype instanceof Am&&!(t instanceof Am)?e.from(t,qm):e.from(t)}const Lm=[null],Om=t=>e=>e[t],Dm={transform:oy},$m={transform:t=>t},Bm=()=>1,Fm=()=>!0,Pm=t=>null==t?t:`${t}`,Vm=t=>null==t?t:+t,Um=t=>t?t[0]:void 0,Rm=t=>t?t[1]:void 0,jm=t=>()=>t;function zm(t){return t instanceof Am?t:Jm(t,qm,Float64Array)}function qm(t){return null==t?NaN:Number(t)}function Wm(t){return Jm(t,Ym)}function Ym(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?rm(t):null==t||isNaN(t=+t)?void 0:new Date(t)}function Hm(t,e){return void 0===t&&(t=e),null===t?[void 0,"none"]:Cy(t)?[void 0,t]:[t,void 0]}function Gm(t,e){return void 0===t&&(t=e),null===t||"number"==typeof t?[void 0,t]:[t,void 0]}function Km(t,e,n){if(null!=t)return Qm(t,e,n)}function Qm(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function Xm(t){return null==t||t instanceof Array||t instanceof Am?t:Array.from(t)}function Jm(t,e,n=Array){return null==t?t:t instanceof n?t.map(e):n.from(t,e)}function Zm(t,e=Array){return t instanceof e?t.slice():e.from(t)}function ty({x:t,x1:e,x2:n}){return void 0!==t||void 0!==e||void 0!==n}function ey(t){return t?.toString===Tm}function ny(t){return ey(t)&&(void 0!==t.type||void 0!==t.domain)}function iy(t){return ey(t)&&"function"!=typeof t.transform}function ry(t){return iy(t)&&void 0===t.value&&void 0===t.channel}function sy(t,e){return void 0===t&&void 0===e?[Um,Rm]:[t,e]}function ay({z:t,fill:e,stroke:n}={}){return void 0===t&&([t]=Hm(e)),void 0===t&&([t]=Hm(n)),t}function oy(t){const e=t.length,n=new Uint32Array(e);for(let t=0;t<e;++t)n[t]=t;return n}function cy(t,e){return Jm(e,(e=>t[e]),t.constructor)}function ly(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function uy(t){return null!==t&&"object"==typeof t?t.valueOf():t}function hy(t){let e;return[{transform:()=>e,label:dy(t)},t=>e=t]}function fy(t){return null==t?[t]:hy(t)}function dy(t,e){return"string"==typeof t?t:t&&void 0!==t.label?t.label:e}function py(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return Iy(i)||Iy(r)?Jm(i,((t,e)=>new Date((+i[e]+ +r[e])/2))):Jm(i,((t,e)=>(+i[e]+ +r[e])/2),Float64Array)},label:t.label}}function my(t,e){const n=yy(e?.interval,e?.type);return n?Jm(t,n):t}function yy(t,e){const n=gy(t,e);return n&&(t=>Gp(t)?n.floor(t):t)}function gy(t,e){if(null!=t){if("number"==typeof t){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const e=Math.abs(t);return t<0?{floor:t=>Math.floor(t*e)/e,offset:t=>(t*e+1)/e,range:(t,n)=>Ht(Math.ceil(t*e),n*e).map((t=>t/e))}:{floor:t=>Math.floor(t/e)*e,offset:t=>t+e,range:(t,n)=>Ht(Math.ceil(t/e),n/e).map((t=>t*e))}}if("string"==typeof t)return("time"===e?_m:xm)(t);if("function"!=typeof t.floor)throw new Error("invalid interval; missing floor method");if("function"!=typeof t.offset)throw new Error("invalid interval; missing offset method");return t}}function by(t,e){if((t=gy(t,e))&&"function"!=typeof t.range)throw new Error("invalid interval: missing range method");return t}function vy(t){return"function"==typeof t?.range}function _y(t){return void 0===t||iy(t)?t:{value:t}}function xy(t){return null==t?null:{transform:e=>Em(e,t,Float64Array),label:dy(t)}}function wy(t){return t&&"function"==typeof t[Symbol.iterator]}function Sy(t){for(const e of t)if(null!=e)return"object"!=typeof e||e instanceof Date}function ky(t){for(const e of t){if(null==e)continue;const t=typeof e;return"string"===t||"boolean"===t}}function Iy(t){for(const e of t)if(null!=e)return e instanceof Date}function Ay(t){for(const e of t)if(null!=e)return"string"==typeof e&&isNaN(e)&&rm(e)}function Ty(t){for(const e of t)if(null!=e){if("string"!=typeof e)return!1;if(e.trim())return!isNaN(e)}}function My(t,e){let n;for(const i of t)if(null!=i){if(!e(i))return!1;n=!0}return n}const Ey=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Cy(t){return"string"==typeof t&&(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||Ey.has(t))}function Ny(t){return"number"==typeof t&&(0<=t&&t<=1||isNaN(t))}function Ly(t){return null==t||Oy(t)}function Oy(t){return/^\s*none\s*$/i.test(t)}function Dy(t,e){return Km(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function $y(t="middle"){return Dy(t,"frameAnchor")}function By(t){if(null==t)return;return Y(t[0],t[t.length-1])}function Fy(t){return wy(t)?function(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,(t=>{const{name:n}=t;if(null==n)throw new Error("missing name");const i=`${n}`;if("__proto__"===i)throw new Error(`illegal name: ${i}`);if(e.has(i))throw new Error(`duplicate name: ${i}`);return e.add(i),[n,t]})))}(t):t}const Py=Symbol("position"),Vy=Symbol("color"),Uy=Symbol("radius"),Ry=Symbol("length"),jy=Symbol("opacity"),zy=Symbol("symbol"),qy=Symbol("projection"),Wy=new Map([["x",Py],["y",Py],["fx",Py],["fy",Py],["r",Uy],["color",Vy],["opacity",jy],["symbol",zy],["length",Ry],["projection",qy]]);const Yy=2/Math.sqrt(3),Hy=new Map([["asterisk",zd],["circle",qd],["cross",Wd],["diamond",Gd],["diamond2",Kd],["hexagon",{draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*Yy,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}}],["plus",Qd],["square",Xd],["square2",Jd],["star",np],["times",fp],["triangle",rp],["triangle2",ap],["wye",hp]]);function Gy(t){return t&&"function"==typeof t.draw}function Ky(t){return!!Gy(t)||"string"==typeof t&&Hy.has(t.toLowerCase())}function Qy(t){if(null==t||Gy(t))return t;const e=Hy.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function Xy({filter:t,sort:e,reverse:n,transform:i,initializer:r,...s}={},a){if(void 0===i&&(null!=t&&(i=eg(t)),null==e||ry(e)||(i=Zy(i,ig(e))),n&&(i=Zy(i,ng))),null!=a&&null!=r)throw new Error("transforms cannot be applied after initializers");return{...s,...(null===e||ry(e))&&{sort:e},transform:Zy(i,a)}}function Jy({filter:t,sort:e,reverse:n,initializer:i,...r}={},s){return void 0===i&&(null!=t&&(i=eg(t)),null==e||ry(e)||(i=tg(i,ig(e))),n&&(i=tg(i,ng))),{...r,...(null===e||ry(e))&&{sort:e},initializer:tg(i,s)}}function Zy(t,e){return null==t?null===e?void 0:e:null==e?null===t?void 0:t:function(n,i,r){return({data:n,facets:i}=t.call(this,n,i,r)),e.call(this,Xm(n),i,r)}}function tg(t,e){return null==t?null===e?void 0:e:null==e?null===t?void 0:t:function(n,i,r,...s){let a,o,c,l,u,h;return({data:o=n,facets:c=i,channels:a}=t.call(this,n,i,r,...s)),({data:u=o,facets:h=c,channels:l}=e.call(this,o,c,{...r,...a},...s)),{data:u,facets:h,channels:{...a,...l}}}}function eg(t){return(e,n)=>{const i=Em(e,t);return{data:e,facets:n.map((t=>t.filter((t=>i[t]))))}}}function ng(t,e){return{data:t,facets:e.map((t=>t.slice().reverse()))}}function ig(t){return("function"==typeof t&&1!==t.length?rg:sg)(t)}function rg(t){return(e,n)=>{const i=(n,i)=>t(e[n],e[i]);return{data:e,facets:n.map((t=>t.slice().sort(i)))}}}function sg(t){let e,n;({channel:e,value:t,order:n}={..._y(t)});const i=e?.startsWith("-");if(i&&(e=e.slice(1)),void 0===n&&(n=i?Qp:Kp),"function"!=typeof n)switch(`${n}`.toLowerCase()){case"ascending":n=Kp;break;case"descending":n=Qp;break;default:throw new Error(`invalid order: ${n}`)}return(i,r,s)=>{let a;if(void 0===e)a=Em(i,t);else{if(void 0===s)throw new Error("channel sort requires an initializer");if(a=s[e],!a)return{};a=a.value}const o=(t,e)=>n(a[t],a[e]);return{data:i,facets:r.map((t=>t.slice().sort(o)))}}}function ag(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function og(t,e,n,i=cg){let r;ey(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const s=i(t,e,n),[a,o]=hy(s.label);let c;return{name:t,output:void 0===r?a:{value:a,scale:r},initialize(t){s.initialize(t),c=o([])},scope(t,e){s.scope(t,e)},reduce(t,e){c.push(s.reduce(t,e))}}}function cg(t,e,n,i=ug){const r=function(t,e){if(void 0!==e[t])return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y"}return e[t]}(t,n),s=i(e,r);let a,o;return{label:dy(s===bg?null:r,s.label),initialize(t){a=void 0===r?t:Em(t,r),"data"===s.scope&&(o=s.reduceIndex(oy(t),a))},scope(t,e){s.scope===t&&(o=s.reduceIndex(e,a))},reduce:(t,e)=>null==s.scope?s.reduceIndex(t,a,e):s.reduceIndex(t,a,o,e)}}function lg(t,e){return e?vt(mt(t,(t=>e[t])),Um):[[,t]]}function ug(t,e,n=hg){if(null==t)return n(t);if("function"==typeof t.reduceIndex)return t;if("function"==typeof t.reduce&&ey(t))return function(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}(t);if("function"==typeof t)return i=t,{reduceIndex:(t,e,n)=>i(cy(e,t),n)};var i;if(/^p\d{2}$/i.test(t))return fg(function(t){const e=+`${t}`.slice(1)/100;return(t,n)=>Pt(t,e,n)}(t));switch(`${t}`.toLowerCase()){case"first":return mg;case"last":return gg;case"identity":return pg;case"count":return bg;case"distinct":return vg;case"sum":return null==e?bg:_g;case"proportion":return xg(e,"data");case"proportion-facet":return xg(e,"facet");case"deviation":return fg(st);case"min":return fg(Ot);case"min-index":return fg(Dt);case"max":return fg(Nt);case"max-index":return fg(Lt);case"mean":return dg(jt);case"median":return dg(zt);case"variance":return fg(rt);case"mode":return fg(Wt)}return n(t)}function hg(t){throw new Error(`invalid reduce: ${t}`)}function fg(t){return{reduceIndex:(e,n)=>t(e,(t=>n[t]))}}function dg(t){return{reduceIndex(e,n){const i=t(e,(t=>n[t]));return Iy(n)?new Date(i):i}}}const pg={reduceIndex:(t,e)=>cy(e,t)},mg={reduceIndex:(t,e)=>e[t[0]]},yg={reduceIndex(t,e){const n=vt(yt(t,(t=>t.length),(t=>e[t])),Rm),i=n.slice(-5).reverse();if(i.length<n.length){const t=n.slice(0,-4);i[4]=[`… ${t.length.toLocaleString("en-US")} more`,Gt(t,Rm)]}return i.map((([t,e])=>`${t} (${e.toLocaleString("en-US")})`)).join("\n")}},gg={reduceIndex:(t,e)=>e[t[t.length-1]]},bg={label:"Frequency",reduceIndex:t=>t.length},vg={label:"Distinct",reduceIndex(t,e){const n=new lt;for(const i of t)n.add(e[i]);return n.size}},_g=fg(Gt);function xg(t,e){return null==t?{scope:e,label:"Frequency",reduceIndex:(t,e,n=1)=>t.length/n}:{scope:e,reduceIndex:(t,e,n=1)=>Gt(t,(t=>e[t]))/n}}function wg(t,{scale:e,type:n,value:i,filter:r,hint:s,label:a=dy(i)},o){return void 0===s&&"function"==typeof i?.transform&&(s=i.hint),Sg(o,{scale:e,type:n,value:Em(t,i),label:a,filter:r,hint:s})}function Sg(t,e){const{scale:n,value:i}=e;if(!0===n||"auto"===n)switch(t){case"fill":case"stroke":case"color":e.scale=!0!==n&&My(i,Cy)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=!0!==n&&My(i,Ny)?null:"opacity";break;case"symbol":!0!==n&&My(i,Ky)?(e.scale=null,e.value=Jm(i,Qy)):e.scale="symbol";break;default:e.scale=Wy.has(t)?t:null}else if(!1===n)e.scale=null;else if(null!=n&&!Wy.has(n))throw new Error(`unknown scale: ${n}`);return e}function kg(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function Ig(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let e=0;e<n.length;++e){const s=i[n[e][0]];for(const n of t[e])r[n]=s}return e}function Ag(t,e,n){const i=Tg(t,e);return Jm(Tg(t,n),((t,e)=>Math.abs(t-i[e])),Float64Array)}function Tg(t,e,n){let i=t[e];if(i||void 0===n||(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function Mg(t){if(null==t||"function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"ascending":return Eg;case"descending":return Cg}throw new Error(`invalid order: ${t}`)}function Eg([t,e],[n,i]){return Kp(e,i)||Kp(t,n)}function Cg([t,e],[n,i]){return Qp(e,i)||Kp(t,n)}function Ng(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return null===n.source?null:n}}const Lg=function(t){let e,n;return(...i)=>((n?.length!==i.length||n.some(((t,e)=>t!==i[e])))&&(n=i,e=t(...i)),e)}((t=>new Intl.NumberFormat(t)));function Og(t){return em(t,"Invalid Date")}const Dg=function(t="en-US"){const e=function(t="en-US"){const e=Lg(t);return t=>null==t||isNaN(t)?void 0:e.format(t)}(t);return t=>(t instanceof Date?Og:"number"==typeof t?e:Pm)(t)}();let $g,Bg=0;function Fg(t){t!==$g&&($g=t,console.warn(t),++Bg)}const Pg=("undefined"!=typeof window?window.devicePixelRatio>1:"undefined"==typeof it)?0:.5;let Vg=0;function Ug(){return"plot-clip-"+ ++Vg}function Rg(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:s,target:a,fill:o,fillOpacity:c,stroke:l,strokeWidth:u,strokeOpacity:h,strokeLinejoin:f,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:y,opacity:g,mixBlendMode:b,imageFilter:v,paintOrder:_,pointerEvents:x,shapeRendering:w,channels:S},{ariaLabel:k,fill:I="currentColor",fillOpacity:A,stroke:T="none",strokeOpacity:M,strokeWidth:E,strokeLinecap:C,strokeLinejoin:N,strokeMiterlimit:L,paintOrder:O}){null===I&&(o=null,c=null),null===T&&(l=null,h=null),Ly(I)?Ly(T)||Ly(o)&&!S?.fill||(T="none"):!Ly(T)||Ly(l)&&!S?.stroke||(I="none");const[D,$]=Hm(o,I),[B,F]=Gm(c,A),[P,V]=Hm(l,T),[U,R]=Gm(h,M),[j,z]=Gm(g);Oy(V)||(void 0===u&&(u=E),void 0===d&&(d=C),void 0===f&&(f=N),void 0!==p||/^\s*round\s*$/i.test(f)||(p=L),Oy($)||void 0!==_||(_=O));const[q,W]=Gm(u);return null!==I&&(t.fill=Zg($,"currentColor"),t.fillOpacity=tb(F,1)),null!==T&&(t.stroke=Zg(V,"none"),t.strokeWidth=tb(W,1),t.strokeOpacity=tb(R,1),t.strokeLinejoin=Zg(f,"miter"),t.strokeLinecap=Zg(d,"butt"),t.strokeMiterlimit=tb(p,4),t.strokeDasharray=Zg(m,"none"),t.strokeDashoffset=Zg(y,"0")),t.target=Pm(a),t.ariaLabel=Pm(k),t.ariaDescription=Pm(r),t.ariaHidden=Pm(s),t.opacity=tb(z,1),t.mixBlendMode=Zg(b,"normal"),t.imageFilter=Zg(v,"none"),t.paintOrder=Zg(_,"normal"),t.pointerEvents=Zg(x,"auto"),t.shapeRendering=Zg(w,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:D,scale:"auto",optional:!0},fillOpacity:{value:B,scale:"auto",optional:!0},stroke:{value:P,scale:"auto",optional:!0},strokeOpacity:{value:U,scale:"auto",optional:!0},strokeWidth:{value:q,optional:!0},opacity:{value:j,scale:"auto",optional:!0}}}function jg(t,e){e&&t.text((t=>Dg(e[t])))}function zg(t,e){e&&t.text((([t])=>Dg(e[t])))}function qg(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:a,stroke:o,strokeOpacity:c,strokeWidth:l,opacity:u,href:h}){i&&Xg(t,"aria-label",(t=>i[t])),s&&Xg(t,"fill",(t=>s[t])),a&&Xg(t,"fill-opacity",(t=>a[t])),o&&Xg(t,"stroke",(t=>o[t])),c&&Xg(t,"stroke-opacity",(t=>c[t])),l&&Xg(t,"stroke-width",(t=>l[t])),u&&Xg(t,"opacity",(t=>u[t])),h&&Qg(t,(t=>h[t]),e),n||function(t,e){e&&t.filter((t=>Xp(e[t]))).append("title").call(jg,e)}(t,r)}function Wg(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:s,fillOpacity:a,stroke:o,strokeOpacity:c,strokeWidth:l,opacity:u,href:h}){i&&Xg(t,"aria-label",(([t])=>i[t])),s&&Xg(t,"fill",(([t])=>s[t])),a&&Xg(t,"fill-opacity",(([t])=>a[t])),o&&Xg(t,"stroke",(([t])=>o[t])),c&&Xg(t,"stroke-opacity",(([t])=>c[t])),l&&Xg(t,"stroke-width",(([t])=>l[t])),u&&Xg(t,"opacity",(([t])=>u[t])),h&&Qg(t,(([t])=>h[t]),e),n||function(t,e){e&&t.filter((([t])=>Xp(e[t]))).append("title").call(zg,e)}(t,r)}function*Yg(t,e,n,i){const{z:r}=n,{z:s}=i,a=function({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:s,strokeWidth:a,opacity:o,href:c},{tip:l}){return[t,l?void 0:e,n,i,r,s,a,o,c].filter((t=>void 0!==t))}(i,n),o=[...e,...a];for(const e of s?function(t,e,n){const i=mt(t,(t=>e[t]));return void 0===n&&i.size>1+t.length>>1&&Fg("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}(t,s,r):[t]){let t,n;t:for(const i of e){for(const t of o)if(!Gp(t[i])){n&&n.push(-1);continue t}if(void 0!==t){n.push(i);for(let e=0;e<a.length;++e){if(uy(a[e][i])!==t[e]){yield n,t=a.map((t=>uy(t[i]))),n=[i];continue t}}}else n&&(yield n),t=a.map((t=>uy(t[i]))),n=[i]}n&&(yield n)}}function Hg(t){return!0===t?t="frame":!1===t?t=null:null!=t&&(t=Qm(t,"clip",["frame","sphere"])),t}function Gg(t,e,n,i){!function(t,e,n,i){let r;const{clip:s=i.clip}=e;switch(s){case"frame":{const{width:e,height:s,marginLeft:a,marginRight:o,marginTop:c,marginBottom:l}=n,u=Ug();r=`url(#${u})`,t=ab("svg:g",i).call((t=>t.append("svg:clipPath").attr("id",u).append("rect").attr("x",a).attr("y",c).attr("width",e-o-a).attr("height",s-c-l))).each((function(){this.appendChild(t.node()),t.node=()=>this}));break}case"sphere":{const{projection:e}=i;if(!e)throw new Error('the "sphere" clip option requires a projection');const n=Ug();r=`url(#${n})`,t.append("clipPath").attr("id",n).append("path").attr("d",Go(e)({type:"Sphere"}));break}}Xg(t,"aria-label",e.ariaLabel),Xg(t,"aria-description",e.ariaDescription),Xg(t,"aria-hidden",e.ariaHidden),Xg(t,"clip-path",r)}(t,e,n,i),Xg(t,"fill",e.fill),Xg(t,"fill-opacity",e.fillOpacity),Xg(t,"stroke",e.stroke),Xg(t,"stroke-width",e.strokeWidth),Xg(t,"stroke-opacity",e.strokeOpacity),Xg(t,"stroke-linejoin",e.strokeLinejoin),Xg(t,"stroke-linecap",e.strokeLinecap),Xg(t,"stroke-miterlimit",e.strokeMiterlimit),Xg(t,"stroke-dasharray",e.strokeDasharray),Xg(t,"stroke-dashoffset",e.strokeDashoffset),Xg(t,"shape-rendering",e.shapeRendering),Xg(t,"filter",e.imageFilter),Xg(t,"paint-order",e.paintOrder);const{pointerEvents:r=(!1===i.pointerSticky?"none":void 0)}=e;Xg(t,"pointer-events",r)}function Kg(t,e){!function(t,e,n){null!=n&&t.style(e,n)}(t,"mix-blend-mode",e.mixBlendMode),Xg(t,"opacity",e.opacity)}function Qg(t,e,n){t.each((function(t){const i=e(t);if(null!=i){const t=this.ownerDocument.createElementNS(pe.svg,"a");t.setAttribute("fill","inherit"),t.setAttributeNS(pe.xlink,"href",i),null!=n&&t.setAttribute("target",n),this.parentNode.insertBefore(t,this).appendChild(this)}}))}function Xg(t,e,n){null!=n&&t.attr(e,n)}function Jg(t,e,{x:n,y:i},r=Pg,s=Pg){r+=e.dx,s+=e.dy,n?.bandwidth&&(r+=n.bandwidth()/2),i?.bandwidth&&(s+=i.bandwidth()/2),(r||s)&&t.attr("transform",`translate(${r},${s})`)}function Zg(t,e){if((t=Pm(t))!==e)return t}function tb(t,e){if((t=Vm(t))!==e)return t}const eb=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function nb(t){if(void 0===t)return"plot-d6a7b5";if(t=`${t}`,!eb.test(t))throw new Error(`invalid class name: ${t}`);return t}function ib(t,e){if("string"==typeof e)t.property("style",e);else if(null!=e)for(const n of t)Object.assign(n.style,e)}function rb({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:s,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-s:(i+n-s)/2]}function sb(t={}){const{document:e=("undefined"!=typeof window?window.document:void 0),clip:n}=t;return{document:e,clip:Hg(n)}}function ab(t,{document:e}){return An(be(t).call(e.documentElement))}const ob=Math.PI,cb=2*ob,lb=.618;function ub({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:s=e}={},a){if(null==t)return;if("function"==typeof t.stream)return t;let o,c,l="frame";if(ey(t)){let e;if(({type:t,domain:c,inset:e,insetTop:n=(void 0!==e?e:n),insetRight:i=(void 0!==e?e:i),insetBottom:r=(void 0!==e?e:r),insetLeft:s=(void 0!==e?e:s),clip:l=l,...o}=t),null==t)return}"function"!=typeof t&&({type:t}=hb(t));const{width:u,height:h,marginLeft:f,marginRight:d,marginTop:p,marginBottom:m}=a,y=u-f-d-s-i,g=h-p-m-n-r;if(t=t?.({width:y,height:g,clip:l,...o}),null==t)return;l=function(t,e,n,i,r){if(!1===t||null==t||"number"==typeof t)return t=>t;!0===t&&(t="frame");if("frame"===`${t}`.toLowerCase())return Ua(e,n,i,r);throw new Error(`unknown projection clip type: ${t}`)}(l,f,p,u-d,h-m);let b,v=f+s,_=p+n;if(null!=c){const[[e,n],[i,r]]=Go(t).bounds(c),s=Math.min(y/(i-e),g/(r-n));s>0?(v-=(s*(e+i)-y)/2,_-=(s*(n+r)-g)/2,b=Ko({point(t,e){this.stream.point(t*s+v,e*s+_)}})):Fg("Warning: the projection could not be fit to the specified domain; using the default scale.")}return b??=0===v&&0===_?pb():Ko({point(t,e){this.stream.point(t+v,e+_)}}),{stream:e=>t.stream(b.stream(l(e)))}}function hb(t){switch(`${t}`.toLowerCase()){case"albers-usa":return fb(pc,.7463,.4673);case"albers":return db(dc,.7463,.4673);case"azimuthal-equal-area":return fb(bc,4,4);case"azimuthal-equidistant":return fb(_c,cb,cb);case"conic-conformal":return db(Ac,cb,cb);case"conic-equal-area":return db(fc,6.1702,2.9781);case"conic-equidistant":return db(Cc,7.312,3.6282);case"equal-earth":return fb(Fc,5.4133,2.6347);case"equirectangular":return fb(Mc,cb,ob);case"gnomonic":return fb(Vc,3.4641,3.4641);case"identity":return{type:pb};case"reflect-y":return{type:mb};case"mercator":return fb(wc,cb,cb);case"orthographic":return fb(Rc,2,2);case"stereographic":return fb(zc,2,2);case"transverse-mercator":return fb(Wc,cb,cb);default:throw new Error(`unknown projection type: ${t}`)}}function fb(t,e,n){return{type:({width:i,height:r,rotate:s,precision:a=.15,clip:o})=>{const c=t();return null!=a&&c.precision?.(a),null!=s&&c.rotate?.(s),"number"==typeof o&&c.clipAngle?.(o),c.scale(Math.min(i/e,r/n)),c.translate([i/2,r/2]),c},aspectRatio:n/e}}function db(t,e,n){const{type:i,aspectRatio:r}=fb(t,e,n);return{type:t=>{const{parallels:e,domain:n,width:r,height:s}=t,a=i(t);return null!=e&&(a.parallels(e),void 0===n&&a.fitSize([r,s],{type:"Sphere"})),a},aspectRatio:r}}const pb=jm({stream:t=>t}),mb=jm(Ko({point(t,e){this.stream.point(t,-e)}}));function yb(t,e,n,i){const r=n[t],s=n[e],a=r.length,o=n[t]=new Float64Array(a).fill(NaN),c=n[e]=new Float64Array(a).fill(NaN);let l;const u=i.stream({point(t,e){o[l]=t,c[l]=e}});for(l=0;l<a;++l)u.point(r[l],s[l])}function gb({projection:t}={}){return null!=t&&("function"==typeof t.stream||(ey(t)&&(t=t.type),null!=t))}function bb(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},s={point(t,i){e.push(t),n.push(i)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const e of t.value)fa(e,s);return[i,r]}const vb=new Map([["accent",nf],["category10",ef],["dark2",rf],["paired",sf],["pastel1",af],["pastel2",of],["set1",cf],["set2",lf],["set3",uf],["tableau10",hf]]);const _b=new Map([...vb,["brbg",wb(df,pf)],["prgn",wb(mf,yf)],["piyg",wb(gf,bf)],["puor",wb(vf,_f)],["rdbu",wb(xf,wf)],["rdgy",wb(Sf,kf)],["rdylbu",wb(If,Af)],["rdylgn",wb(Tf,Mf)],["spectral",wb(Ef,Cf)],["burd",Sb(xf,wf)],["buylrd",Sb(If,Af)],["blues",xb(ed,nd)],["greens",xb(id,rd)],["greys",xb(sd,ad)],["oranges",xb(hd,fd)],["purples",xb(od,cd)],["reds",xb(ld,ud)],["turbo",kb(Sd)],["viridis",kb(Id)],["magma",kb(Ad)],["inferno",kb(Td)],["plasma",kb(Md)],["cividis",kb(dd)],["cubehelix",kb(pd)],["warm",kb(md)],["cool",kb(yd)],["bugn",xb(Nf,Lf)],["bupu",xb(Of,Df)],["gnbu",xb($f,Bf)],["orrd",xb(Ff,Pf)],["pubu",xb(Rf,jf)],["pubugn",xb(Vf,Uf)],["purd",xb(zf,qf)],["rdpu",xb(Wf,Yf)],["ylgn",xb(Kf,Qf)],["ylgnbu",xb(Hf,Gf)],["ylorbr",xb(Xf,Jf)],["ylorrd",xb(Zf,td)],["rainbow",Ib(bd)],["sinebow",Ib(wd)]]);function xb(t,e){return({length:n})=>1===n?[t[3][1]]:2===n?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)))>9?pr(e,n):t[n]}function wb(t,e){return({length:n})=>2===n?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)))>11?pr(e,n):t[n]}function Sb(t,e){return({length:n})=>2===n?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)))>11?pr((t=>e(1-t)),n):t[n].slice().reverse()}function kb(t){return({length:e})=>pr(t,Math.max(2,Math.floor(e)))}function Ib(t){return({length:e})=>pr(t,Math.floor(e)+1).slice(0,-1)}function Ab(t){const e=`${t}`.toLowerCase();if(!_b.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return _b.get(e)}function Tb(t,e){const n=Ab(t),i="function"==typeof n?n({length:e}):n;return i.length!==e?i.slice(0,e):i}const Mb=new Map([["brbg",pf],["prgn",yf],["piyg",bf],["puor",_f],["rdbu",wf],["rdgy",kf],["rdylbu",Af],["rdylgn",Mf],["spectral",Cf],["burd",t=>wf(1-t)],["buylrd",t=>Af(1-t)],["blues",nd],["greens",rd],["greys",ad],["purples",cd],["reds",ud],["oranges",fd],["turbo",Sd],["viridis",Id],["magma",Ad],["inferno",Td],["plasma",Md],["cividis",dd],["cubehelix",pd],["warm",md],["cool",yd],["bugn",Lf],["bupu",Df],["gnbu",Bf],["orrd",Pf],["pubugn",Uf],["pubu",jf],["purd",qf],["rdpu",Yf],["ylgnbu",Gf],["ylgn",Qf],["ylorbr",Jf],["ylorrd",td],["rainbow",bd],["sinebow",wd]]);function Eb(t){const e=`${t}`.toLowerCase();if(!Mb.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Mb.get(e)}const Cb=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);const Nb=t=>e=>t(1-e),Lb=[0,1],Ob=new Map([["number",Ki],["rgb",zi],["hsl",lr],["hcl",ur],["lab",function(t,e){var n=ji((t=vi(t)).l,(e=vi(e)).l),i=ji(t.a,e.a),r=ji(t.b,e.b),s=ji(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=s(e),t+""}}]]);function Db(t){const e=`${t}`.toLowerCase();if(!Ob.has(e))throw new Error(`unknown interpolator: ${e}`);return Ob.get(e)}function $b(t,e,n,{type:i,nice:r,clamp:s,zero:a,domain:o=jb(t,n),unknown:c,round:l,scheme:u,interval:h,range:f=(Wy.get(t)===Uy?qb(n,o):Wy.get(t)===Ry?Wb(n,o):Wy.get(t)===jy?Lb:void 0),interpolate:d=(Wy.get(t)===Vy?null==u&&void 0!==f?zi:Eb(void 0!==u?u:"cyclical"===i?"rainbow":"turbo"):l?er:Ki),reverse:p}){if(h=by(h,i),"cyclical"!==i&&"sequential"!==i||(i="linear"),"function"!=typeof d&&(d=Db(d)),p=!!p,void 0!==f){if((o=Xm(o)).length!==(f=Xm(f)).length){if(1===d.length)throw new Error("invalid piecewise interpolator");d=dr(d,f),f=void 0}}if(1===d.length?(p&&(d=Nb(d),p=!1),void 0===f&&(f=Float64Array.from(o,((t,e)=>e/(o.length-1))),2===f.length&&(f=Lb)),e.interpolate((f===Lb?jm:Gb)(d))):e.interpolate(d),a){const[t,e]=at(o);(t>0||e<0)&&(By(o=Zm(o))!==Math.sign(t)?o[o.length-1]=0:o[0]=0)}return p&&(o=Kt(o)),e.domain(o).unknown(c),r&&(e.nice(function(t,e){return!0===t?void 0:"number"==typeof t?t:function(t,e){if((t=by(t,e))&&"function"!=typeof t.ceil)throw new Error("invalid interval: missing ceil method");return t}(t,e)}(r,i)),o=e.domain()),void 0!==f&&e.range(f),s&&e.clamp(s),{type:i,domain:o,range:f,scale:e,interpolate:d,interval:h}}function Bb(t,e,{exponent:n=1,...i}){return $b(t,El().exponent(n),e,{...i,type:"pow"})}function Fb(t,e,{base:n=10,domain:i=Yb(e),...r}){return $b(t,_l().base(n),e,{...r,domain:i})}function Pb(t,e,{constant:n=1,...i}){return $b(t,kl().constant(n),e,i)}function Vb(t,e,{range:n,quantiles:i=(void 0===n?5:(n=[...n]).length),n:r=i,scheme:s="rdylbu",domain:a=Hb(e),unknown:o,interpolate:c,reverse:l}){return void 0===n&&(n=void 0!==c?pr(c,r):Wy.get(t)===Vy?Tb(s,r):void 0),a.length>0&&(a=Cl(a,void 0===n?{length:r}:n).quantiles()),Ub(t,e,{domain:a,range:n,reverse:l,unknown:o})}function Ub(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:s,range:a=(void 0!==s?pr(s,n.length+1):Wy.get(t)===Vy?Tb(r,n.length+1):void 0),reverse:o}){const c=By(n=Xm(n));if(!isNaN(c)&&!function(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const i=Y(r,r=t[n]);if(0!==i&&i!==e)return!1}return!0}(n,c))throw new Error(`the ${t} scale has a non-monotonic domain`);return o&&(a=Kt(a)),{type:"threshold",scale:Nl(c<0?Kt(n):n,void 0===a?[]:a).unknown(i),domain:n,range:a}}function Rb(t,e=Jp){return t.length?[Ot(t,(({value:t})=>void 0===t?t:Ot(t,e))),Nt(t,(({value:t})=>void 0===t?t:Nt(t,e)))]:[0,1]}function jb(t,e){const n=Wy.get(t);return(n===Uy||n===jy||n===Ry?zb:Rb)(e)}function zb(t){return[0,t.length?Nt(t,(({value:t})=>void 0===t?t:Nt(t,Jp))):1]}function qb(t,e){const n=t.find((({radius:t})=>void 0!==t));if(void 0!==n)return[0,n.radius];const i=Pt(t,.5,(({value:t})=>void 0===t?NaN:Pt(t,.25,Zp))),r=e.map((t=>3*Math.sqrt(t/i))),s=30/Nt(r);return s<1?r.map((t=>t*s)):r}function Wb(t,e){const n=zt(t,(({value:t})=>void 0===t?NaN:zt(t,Math.abs))),i=e.map((t=>12*t/n)),r=60/Nt(i);return r<1?i.map((t=>t*r)):i}function Yb(t){for(const{value:e}of t)if(void 0!==e)for(let n of e){if(n>0)return Rb(t,Zp);if(n<0)return Rb(t,tm)}return[1,10]}function Hb(t){const e=[];for(const{value:n}of t)if(void 0!==n)for(const t of n)e.push(t);return e}function Gb(t){return(e,n)=>i=>t(e+i*(n-e))}function Kb(t,e,n,i,{type:r,nice:s,clamp:a,domain:o=Rb(i),unknown:c,pivot:l=0,scheme:u,range:h,symmetric:f=!0,interpolate:d=(Wy.get(t)===Vy?null==u&&void 0!==h?zi:Eb(void 0!==u?u:"rdbu"):Ki),reverse:p}){l=+l,o=Xm(o);let[m,y]=o;if(o.length>2&&Fg(`Warning: the diverging ${t} scale domain contains extra elements.`),Y(m,y)<0&&([m,y]=[y,m],p=!p),m=Math.min(m,l),y=Math.max(y,l),"function"!=typeof d&&(d=Db(d)),void 0!==h&&(d=1===d.length?Gb(d)(...h):dr(d,h)),p&&(d=Nb(d)),f){const t=n.apply(l),e=t-n.apply(m),i=n.apply(y)-t;e<i?m=n.invert(t-i):e>i&&(y=n.invert(t+e))}return e.domain([m,l,y]).unknown(c).interpolator(d),a&&e.clamp(a),s&&e.nice(s),{type:r,domain:[m,y],pivot:l,interpolate:d,scale:e}}function Qb(t,e,n){return Kb(t,Qh(),tv,e,n)}function Xb(t,e,{exponent:n=1,...i}){return Kb(t,Zh().exponent(n=+n),function(t){return.5===t?nv:{apply:e=>Math.sign(e)*Math.pow(Math.abs(e),t),invert:e=>Math.sign(e)*Math.pow(Math.abs(e),1/t)}}(n),e,{...i,type:"diverging-pow"})}function Jb(t,e,{base:n=10,pivot:i=1,domain:r=Rb(e,i<0?tm:Zp),...s}){return Kb(t,Xh().base(n=+n),ev,e,{domain:r,pivot:i,...s})}function Zb(t,e,{constant:n=1,...i}){return Kb(t,Jh().constant(n=+n),function(t){return{apply:e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),invert:e=>Math.sign(e)*Math.expm1(Math.abs(e))*t}}(n),e,i)}const tv={apply:t=>t,invert:t=>t},ev={apply:Math.log,invert:Math.exp},nv={apply:t=>Math.sign(t)*Math.sqrt(Math.abs(t)),invert:t=>Math.sign(t)*(t*t)};function iv(t,e,n,i){return $b(t,e,n,i)}function rv(t,e,n){return iv(t,function(){return Yc.apply(Hh(_u,xu,mu,du,Jl,Gl,Yl,ql,zl,Au).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}(),e,n)}function sv(t,e,n){return iv(t,function(){return Yc.apply(Hh(bu,vu,yu,pu,au,Kl,Hl,Wl,zl,Tu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}(),e,n)}const av=Symbol("ordinal");function ov(t,e,n,{type:i,interval:r,domain:s,range:a,reverse:o,hint:c}){return r=by(r,i),void 0===s&&(s=uv(n,r,t)),"categorical"!==i&&i!==av||(i="ordinal"),o&&(s=Kt(s)),s=e.domain(s).domain(),void 0!==a&&("function"==typeof a&&(a=a(s)),e.range(a)),{type:i,domain:s,range:a,scale:e,hint:c,interval:r}}function cv(t,e,{type:n,interval:i,domain:r,range:s,scheme:a,unknown:o,...c}){let l;if(i=by(i,n),void 0===r&&(r=uv(e,i,t)),Wy.get(t)===zy)l=function(t){return{fill:hv(t,"fill"),stroke:hv(t,"stroke")}}(e),s=void 0===s?function(t){return Ly(t.fill)?pp:dp}(l):Jm(s,Qy);else if(Wy.get(t)===Vy&&(void 0!==s||"ordinal"!==n&&n!==av||(s=function(t,e="greys"){const n=new Set,[i,r]=Tb(e,2);for(const e of t)if(null!=e)if(!0===e)n.add(r);else{if(!1!==e)return;n.add(i)}return[...n]}(r,a),void 0!==s&&(a=void 0)),void 0===a&&void 0===s&&(a="ordinal"===n?"turbo":"tableau10"),void 0!==a))if(void 0!==s){const t=Eb(a),e=s[0],n=s[1]-s[0];s=({length:i})=>pr((i=>t(e+n*i)),i)}else s=Ab(a);if(o===Gc)throw new Error(`implicit unknown on ${t} scale is not supported`);return ov(t,Kc().unknown(o),e,{...c,type:n,domain:r,range:s,hint:l})}function lv(t,e,n,i){let{round:r}=n;return void 0!==r&&t.round(r=!!r),(t=ov(i,t,e,n)).round=r,t}function uv(t,e,n){const i=new lt;for(const{value:e,domain:n}of t){if(void 0!==n)return n();if(void 0!==e)for(const t of e)i.add(t)}if(void 0!==e){const[t,n]=at(i).map(e.floor,e);return e.range(t,e.offset(n))}if(i.size>1e4&&Wy.get(n)===Py)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return vt(i,Kp)}function hv(t,e){let n;for(const{hint:i}of t){const t=i?.[e];if(void 0!==t)if(void 0===n)n=t;else if(n!==t)return}return n}function fv(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:a=n,round:o,nice:c,clamp:l,zero:u,align:h,padding:f,projection:d,facet:{label:p=e}={},...m}={}){const y={};for(const[n,g]of t){const t=m[n],b=xv(n,g,{round:Wy.get(n)===Py?o:void 0,nice:c,clamp:l,zero:u,align:h,padding:f,projection:d,...t});if(b){let{label:o=("fx"===n||"fy"===n?p:e),percent:c,transform:l,inset:u,insetTop:h=(void 0!==u?u:"y"===n?i:0),insetRight:f=(void 0!==u?u:"x"===n?r:0),insetBottom:d=(void 0!==u?u:"y"===n?s:0),insetLeft:m=(void 0!==u?u:"x"===n?a:0)}=t||{};if(null==l)l=void 0;else if("function"!=typeof l)throw new Error("invalid scale transform; not a function");b.percent=!!c,b.label=void 0===o?pv(g,b):o,b.transform=l,"x"===n||"fx"===n?(b.insetLeft=+m,b.insetRight=+f):"y"!==n&&"fy"!==n||(b.insetTop=+h,b.insetBottom=+d),y[n]=b}}return y}function dv(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:t,type:s,interval:a,label:o}=r;e[i]=Cv(r),n[i]=t,t.type=s,null!=a&&(t.interval=a),null!=o&&(t.label=o)}return n}function pv(t=[],e){let n;for(const{label:e}of t)if(void 0!==e)if(void 0===n)n=e;else if(n!==e)return;if(void 0!==n)return!Iv(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function mv(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:s,height:a,facet:{marginTop:o,marginRight:c,marginBottom:l,marginLeft:u}}=t;return{marginTop:Math.max(e,o),marginRight:Math.max(n,c),marginBottom:Math.max(i,l),marginLeft:Math.max(r,u),width:s,height:a}}function yv({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:o,height:c}=mv(n);return{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:t?t.scale.bandwidth()+a+r:o,height:e?e.scale.bandwidth()+i+s:c,facet:{width:o,height:c}}}function gv(t,e){if(void 0===t.range){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:s=0,marginRight:a=0}=e,o=s+n,c=r-a-i;t.range=[o,Math.max(o,c)],Iv(t)||(t.range=_v(t)),t.scale.range(t.range)}vv(t)}function bv(t,e){if(void 0===t.range){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:s=0,marginBottom:a=0}=e,o=s+n,c=r-a-i;t.range=[Math.max(o,c),o],Iv(t)?t.range.reverse():t.range=_v(t),t.scale.range(t.range)}vv(t)}function vv(t){void 0===t.round&&function({type:t}){return"point"===t||"band"===t}(t)&&function({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,s=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,o=Math.abs(i-n)/Math.max(1,a+2*s);return(o-Math.floor(o))*a}(t)<=30&&t.scale.round(!0)}function _v(t){const e=t.scale.domain().length+Av(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},((t,r)=>n+r/(e-1)*(i-n)))}function xv(t,e=[],n={}){const i=function(t,e,{type:n,domain:i,range:r,scheme:s,pivot:a,projection:o}){if("fx"===t||"fy"===t)return"band";"x"!==t&&"y"!==t||null==o||(n=Sv);for(const{type:t}of e)if(void 0!==t)if(void 0===n)n=t;else if(n!==t)throw new Error(`scale incompatible with channel: ${n} !== ${t}`);if(n===Sv)return;if(void 0!==n)return n;if(void 0===i&&!e.some((({value:t})=>void 0!==t)))return;const c=Wy.get(t);if(c===Uy)return"sqrt";if(c===jy||c===Ry)return"linear";if(c===zy)return"ordinal";if((i||r||[]).length>2)return kv(c);if(void 0!==i){if(ky(i))return kv(c);if(Iy(i))return"utc"}else{const t=e.map((({value:t})=>t)).filter((t=>void 0!==t));if(t.some(ky))return kv(c);if(t.some(Iy))return"utc"}if(c===Vy){if(null!=a||function(t){return null!=t&&Cb.has(`${t}`.toLowerCase())}(s))return"diverging";if(function(t){return null!=t&&vb.has(`${t}`.toLowerCase())}(s))return"categorical"}return"linear"}(t,e,n);if(void 0===n.type&&void 0===n.domain&&void 0===n.range&&null==n.interval&&"fx"!==t&&"fy"!==t&&Iv({type:i})){const n=e.map((({value:t})=>t)).filter((t=>void 0!==t));n.some(Iy)?Fg(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${wv(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${wv(i)}".`):n.some(Ay)?Fg(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${wv(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${wv(i)}".`):n.some(Ty)&&Fg(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${wv(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${wv(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Mv(e,n,zm);break;case"identity":switch(Wy.get(t)){case Py:n=Mv(e,n,zm);break;case zy:n=Mv(e,n,Ev)}break;case"utc":case"time":n=Mv(e,n,Wm)}switch(i){case"diverging":return Qb(t,e,n);case"diverging-sqrt":return function(t,e,n){return Xb(t,e,{...n,exponent:.5})}(t,e,n);case"diverging-pow":return Xb(t,e,n);case"diverging-log":return Jb(t,e,n);case"diverging-symlog":return Zb(t,e,n);case"categorical":case"ordinal":case av:return cv(t,e,n);case"cyclical":case"sequential":case"linear":return function(t,e,n){return $b(t,ul(),e,n)}(t,e,n);case"sqrt":return function(t,e,n){return Bb(t,e,{...n,exponent:.5})}(t,e,n);case"threshold":return Ub(t,0,n);case"quantile":return Vb(t,e,n);case"quantize":return function(t,e,{range:n,n:i=(void 0===n?5:(n=[...n]).length),scheme:r="rdylbu",domain:s=jb(t,e),unknown:a,interpolate:o,reverse:c}){const[l,u]=at(s);let h;return void 0===n?(h=Tt(l,u,i),h[0]<=l&&h.splice(0,1),h[h.length-1]>=u&&h.pop(),i=h.length+1,n=void 0!==o?pr(o,i):Wy.get(t)===Vy?Tb(r,i):void 0):(h=pr(Ki(l,u),i+1).slice(1,-1),l instanceof Date&&(h=h.map((t=>new Date(t))))),By(Xm(s))<0&&h.reverse(),Ub(t,0,{domain:h,range:n,reverse:c,unknown:a})}(t,e,n);case"pow":return Bb(t,e,n);case"log":return Fb(t,e,n);case"symlog":return Pb(t,e,n);case"utc":return sv(t,e,n);case"time":return rv(t,e,n);case"point":return function(t,e,{align:n=.5,padding:i=.5,...r}){return lv(Jc().align(n).padding(i),e,r,t)}(t,e,n);case"band":return function(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:s=("fx"===t||"fy"===t?0:i),...a}){return lv(Qc().align(n).paddingInner(r).paddingOuter(s),e,a,t)}(t,e,n);case"identity":return function(t){return{type:"identity",scale:(e=Wy.get(t),e===Py||e===Uy||e===Ry||e===jy?hl():t=>t)};var e}(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function wv(t){return"symbol"==typeof t?t.description:t}const Sv={toString:()=>"projection"};function kv(t){switch(t){case Py:return"point";case Vy:return av;default:return"ordinal"}}function Iv({type:t}){return"ordinal"===t||"point"===t||"band"===t||t===av}function Av({type:t}){return"threshold"===t}function Tv(t){if(void 0===t)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Mv(t,{domain:e,...n},i){for(const e of t)void 0!==e.value&&(e.value=i(e.value));return{domain:void 0===e?e:i(e),...n}}function Ev(t){return Jm(t,Qy)}function Cv({scale:t,type:e,domain:n,range:i,interpolate:r,interval:s,transform:a,percent:o,pivot:c}){if("identity"===e)return{type:"identity",apply:t=>t,invert:t=>t};const l=t.unknown?t.unknown():void 0;return{type:e,domain:Zm(n),...void 0!==i&&{range:Zm(i)},...void 0!==a&&{transform:a},...o&&{percent:o},...void 0!==l&&{unknown:l},...void 0!==s&&{interval:s},...void 0!==r&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...void 0!==c&&{pivot:c,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:e=>t(e),...t.invert&&{invert:e=>t.invert(e)}}}function Nv({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:s},{width:a,marginTopDefault:o,marginRightDefault:c,marginBottomDefault:l,marginLeftDefault:u}){const h=n?n.scale.domain().length:1,f=function(t){if("function"==typeof t?.stream)return lb;if(ey(t)&&(t=t.type),null!=t){if("function"!=typeof t){const{aspectRatio:e}=hb(t);if(e)return e}return lb}}(r);if(f){const t=(1.1*h-.1)/(1.1*(i?i.scale.domain().length:1)-.1)*f,e=Math.max(.1,Math.min(10,t));return Math.round((a-u-c)*e+o+l)}const d=e?Iv(e)?e.scale.domain().length:Math.max(7,17/h):1;if(null!=s){if(s=+s,!(isFinite(s)&&s>0))throw new Error(`invalid aspectRatio: ${s}`);const r=Lv("y",e)/(Lv("x",t)*s),h=i?i.scale.bandwidth():1,f=n?n.scale.bandwidth():1;return(r*(h*(a-u-c)-t.insetLeft-t.insetRight)+e.insetTop+e.insetBottom)/f+o+l}return!(!e&&!n)*Math.max(1,Math.min(60,d*h))*20+30*!!i+60}function Lv(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const t=e.scale.exponent();r=e=>Math.pow(e,t);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[s,a]=at(i);return Math.abs(r(a)-r(s))}function Ov(t,e){const{fx:n,fy:i}=fv(t,e),r=n?.scale.domain(),s=i?.scale.domain();return r&&s?function(...t){const e="function"==typeof t[t.length-1]&&function(t){return e=>t(...e)}(t.pop()),n=(t=t.map(et)).map(Z),i=t.length-1,r=new Array(i+1).fill(0),s=[];if(i<0||n.some(tt))return s;for(;;){s.push(r.map(((e,n)=>t[n][e])));let a=i;for(;++r[a]===n[a];){if(0===a)return e?s.map(e):s;r[a--]=0}}}(r,s).map((([t,e],n)=>({x:t,y:e,i:n}))):r?r.map(((t,e)=>({x:t,i:e}))):s?s.map(((t,e)=>({y:t,i:e}))):void 0}function Dv(t,{fx:e,fy:n}){const i=oy(t),r=e?.value,s=n?.value;return e&&n?yt(i,(t=>(t.fx=r[t[0]],t.fy=s[t[0]],t)),(t=>r[t]),(t=>s[t])):e?yt(i,(t=>(t.fx=r[t[0]],t)),(t=>r[t])):yt(i,(t=>(t.fy=s[t[0]],t)),(t=>s[t]))}function $v(t){const e=[],n=new Uint32Array(Gt(t,(t=>t.length)));for(const i of t){let r=0;for(const e of t)i!==e&&(n.set(e,r),r+=e.length);e.push(n.slice(0,r))}return e}const Bv=new Map([["top",Rv],["right",qv],["bottom",jv],["left",zv],["top-left",Wv(Rv,zv)],["top-right",Wv(Rv,qv)],["bottom-left",Wv(jv,zv)],["bottom-right",Wv(jv,qv)],["top-empty",function(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=Vv(e,i);if(s>0)return Uv(t,n,e[s-1])}],["right-empty",function(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=Vv(e,n);if(s<e.length-1)return Uv(t,e[s+1],i)}],["bottom-empty",function(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=Vv(e,i);if(s<e.length-1)return Uv(t,n,e[s+1])}],["left-empty",function(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const s=Vv(e,n);if(s>0)return Uv(t,e[s-1],i)}],["empty",function(t,e,{empty:n}){return n}]]);const Fv=new WeakMap;function Pv(t){let e=Fv.get(t);return e||Fv.set(t,e=new ct(Jm(t,((t,e)=>[t,e])))),e}function Vv(t,e){return Pv(t).get(e)}function Uv(t,e,n){return function(t,e,n){return e=uy(e),n=uy(n),t.find((t=>Object.is(uy(t.x),e)&&Object.is(uy(t.y),n)))}(t,e,n)?.empty}function Rv(t,{y:e},{y:n}){return!e||0===Vv(e,n)}function jv(t,{y:e},{y:n}){return!e||Vv(e,n)===e.length-1}function zv(t,{x:e},{x:n}){return!e||0===Vv(e,n)}function qv(t,{x:e},{x:n}){return!e||Vv(e,n)===e.length-1}function Wv(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Yv(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map((({x:t,y:e})=>i.get(t)?.get(e)??[])):e?t.map((({x:t})=>i.get(t)??[])):t.map((({y:t})=>i.get(t)??[]))}class Hv{constructor(t,e={},n={},i){const{facet:r="auto",facetAnchor:s,fx:a,fy:o,sort:c,dx:l=0,dy:u=0,margin:h=0,marginTop:f=h,marginRight:d=h,marginBottom:p=h,marginLeft:m=h,clip:y=i?.clip,channels:g,tip:b,render:v}=n;if(this.data=t,this.sort=ry(c)?c:null,this.initializer=Jy(n).initializer,this.transform=this.initializer?n.transform:Xy(n).transform,null===r||!1===r?this.facet=null:(this.facet=Qm(!0===r?"include":r,"facet",["auto","include","exclude","super"]),this.fx=t===Lm&&"string"==typeof a?[a]:a,this.fy=t===Lm&&"string"==typeof o?[o]:o),this.facetAnchor=function(t){if(null==t)return null;const e=Bv.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}(s),e=Fy(e),void 0!==g&&(e={...Qv(g),...e}),void 0!==i&&(e={...Rg(this,n,i),...e}),this.channels=Object.fromEntries(Object.entries(e).map((([e,n])=>{if(iy(n.value)){const{value:t,label:e=n.label,scale:i=n.scale}=n.value;n={...n,label:e,scale:i,value:t}}if(t===Lm&&"string"==typeof n.value){const{value:t}=n;n={...n,value:[t]}}return[e,n]})).filter((([t,{value:e,optional:n}])=>{if(null!=e)return!0;if(n)return!1;throw new Error(`missing channel value: ${t}`)}))),this.dx=+l,this.dy=+u,this.marginTop=+f,this.marginRight=+d,this.marginBottom=+p,this.marginLeft=+m,this.clip=Hg(y),this.tip=function(t){return!0===t?"xy":!1===t||null==t?null:"string"==typeof t?Qm(t,"tip",["x","y","xy"]):t}(b),"super"===this.facet){if(a||o)throw new Error("super-faceting cannot use fx or fy");for(const t in this.channels){const{scale:n}=e[t];if("x"===n||"y"===n)throw new Error("super-faceting cannot use x or y")}}null!=v&&(this.render=Kv(v,this.render))}initialize(t,e,n){let i=Xm(this.data);void 0===t&&null!=i&&(t=[oy(i)]);const r=t;null!=this.transform&&(({facets:t,data:i}=this.transform(i,t,n)),i=Xm(i)),void 0!==t&&(t.original=r);const s=function(t,e){return Object.fromEntries(Object.entries(t).map((([t,n])=>[t,wg(e,n,t)])))}(this.channels,i);return null!=this.sort&&function(t,e,n,i,r){const{order:s,reverse:a,reduce:o=!0,limit:c}=r;for(const l in r){if(!Wy.has(l))continue;let{value:u,order:h=s,reverse:f=a,reduce:d=o,limit:p=c}=_y(r[l]);const m=u?.startsWith("-");if(m&&(u=u.slice(1)),h=void 0===h?m!==("width"===u||"height"===u)?Cg:Eg:Mg(h),null==d||!1===d)continue;const y="fx"===l||"fy"===l?Ig(e,i[l]):kg(n,l);if(!y)throw new Error(`missing channel for scale: ${l}`);const g=y.value,[b=0,v=1/0]=wy(p)?p:p<0?[p]:[0,p];if(null==u)y.domain=()=>{let t=Array.from(new lt(g));return f&&(t=t.reverse()),0===b&&v===1/0||(t=t.slice(b,v)),t};else{const e="data"===u?t:"height"===u?Ag(n,"y1","y2"):"width"===u?Ag(n,"x1","x2"):Tg(n,u,"y"===u?"y2":"x"===u?"x2":void 0),i=ug(!0===d?"max":d,e);y.domain=()=>{let t=gt(oy(g),(t=>i.reduceIndex(t,e)),(t=>g[t]));return h&&t.sort(h),f&&t.reverse(),0===b&&v===1/0||(t=t.slice(b,v)),t.map(Um)}}}}(i,t,s,e,this.sort),{data:i,facets:t,channels:s}}filter(t,e,n){for(const i in e){const{filter:r=Gp}=e[i];if(null!==r){const e=n[i];t=t.filter((t=>r(e[t])))}}return t}project(t,e,n){for(const i in t)if("x"===t[i].scale&&/^x|x$/.test(i)){const r=i.replace(/^x|x$/,"y");r in t&&"y"===t[r].scale&&yb(i,r,e,n.projection)}}scale(t,e,n){const i=function(t,e){const n=Object.fromEntries(Object.entries(t).map((([t,{scale:n,value:i}])=>{const r=null==n?null:e[n];return[t,null==r?i:Jm(i,r)]})));return n.channels=t,n}(t,e);return n.projection&&this.project(t,i,n),i}}function Gv(...t){return t.plot=Hv.prototype.plot,t}function Kv(t,e){if(null==t)return null===e?void 0:e;if(null==e)return null===t?void 0:t;if("function"!=typeof t)throw new TypeError(`invalid render transform: ${t}`);if("function"!=typeof e)throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,s,a,o){return t.call(this,n,i,r,s,a,((t,n,i,r,s)=>e.call(this,t,n,i,r,s,o)))}}function Qv(t){return Object.fromEntries(Object.entries(Fy(t)).map((([t,e])=>(void 0===(e="string"==typeof e?{value:e,label:t}:_y(e)).filter&&null==e.scale&&(e={...e,filter:null}),[t,e]))))}function Xv(t,e){return!0===t?.tip?{...t,tip:e}:ey(t?.tip)&&void 0===t.tip.pointer?{...t,tip:{...t.tip,pointer:e}}:t}const Jv=new WeakMap;function Zv(t,e,{x:n,y:i,px:r,py:s,maxRadius:a=40,channels:o,render:c,...l}={}){return a=+a,null!=r&&(n??=null,o={...o,px:{value:r,scale:"x"}}),null!=s&&(i??=null,o={...o,py:{value:s,scale:"y"}}),{x:n,y:i,channels:o,...l,render:Kv((function(n,i,r,s,o,c){const l=(o={...o,pointerSticky:!1}).ownerSVGElement,{data:u}=o.getMarkState(this);let h=Jv.get(l);h||Jv.set(l,h={sticky:!1,roots:[],renders:[]});let f=h.renders.push(L)-1;const{x:d,y:p,fx:m,fy:y}=i;let g=m?m(n.fx)-s.marginLeft:0,b=y?y(n.fy)-s.marginTop:0;d?.bandwidth&&(g+=d.bandwidth()/2),p?.bandwidth&&(b+=p.bandwidth()/2);const v=null!=n.fi;let _;if(v){let t=h.facetStates;t||(h.facetStates=t=new Map),_=t.get(this),_||t.set(this,_=new Map)}const[x,w]=rb(this,s),{px:S,py:k}=r,I=S?t=>S[t]:i_(r,x),A=k?t=>k[t]:r_(r,w);let T,M,E,C;function N(t,e){if(v){if(C&&(C=cancelAnimationFrame(C)),null!=t)return _.set(n.fi,e),void(C=requestAnimationFrame((()=>{C=null;for(const[i,r]of _)if(r<e||r===e&&i<n.fi){t=null;break}L(t)})));_.delete(n.fi)}L(t)}function L(t){if(T===t&&E===h.sticky)return;T=t,E=o.pointerSticky=h.sticky;const e=null==T?[]:[T];v&&(e.fx=n.fx,e.fy=n.fy,e.fi=n.fi);const a=c(e,i,r,s,o);if(M){if(v){const t=M.parentNode,e=M.getAttribute("transform"),n=a.getAttribute("transform");e?a.setAttribute("transform",e):a.removeAttribute("transform"),n?t.setAttribute("transform",n):t.removeAttribute("transform"),a.removeAttribute("aria-label"),a.removeAttribute("aria-description"),a.removeAttribute("aria-hidden")}M.replaceWith(a)}return h.roots[f]=M=a,null==T&&_?.size>1||o.dispatchValue(null==T?null:u[T]),a}function O(i){if(h.sticky||"mouse"===i.pointerType&&1===i.buttons)return;let[r,o]=function(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}(i);r-=g,o-=b;const c=r<s.marginLeft||r>s.width-s.marginRight?1:t,l=o<s.marginTop||o>s.height-s.marginBottom?1:e;let u=null,f=a*a;for(const t of n){const e=c*(I(t)-r),n=l*(A(t)-o),i=e*e+n*n;i<=f&&(u=t,f=i)}if(null!=u&&(1!==t||1!==e)){const t=I(u)-r,e=A(u)-o;f=t*t+e*e}N(u,f)}return l.addEventListener("pointerenter",O),l.addEventListener("pointermove",O),l.addEventListener("pointerdown",(function(t){"mouse"===t.pointerType&&null!=T&&(h.sticky&&h.roots.some((e=>e?.contains(t.target)))||(h.sticky?(h.sticky=!1,h.renders.forEach((t=>t(null)))):(h.sticky=!0,L(T)),t.stopImmediatePropagation()))})),l.addEventListener("pointerleave",(function(t){"mouse"===t.pointerType&&(h.sticky||N(null))})),L(null)}),c)}}function t_(t){return Zv(1,1,t)}function e_(t){return Zv(1,.01,t)}function n_(t){return Zv(.01,1,t)}function i_({x1:t,x2:e,x:n=t},i){return t&&e?n=>(t[n]+e[n])/2:n?t=>n[t]:()=>i}function r_({y1:t,y2:e,y:n=t},i){return t&&e?n=>(t[n]+e[n])/2:n?t=>n[t]:()=>i}function s_(t){return Iv(t)&&void 0===t.interval?void 0:"tabular-nums"}function a_(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:s=44+i,marginTop:a=18,marginRight:o=0,marginBottom:c=16+i,marginLeft:l=0,style:u,ticks:h=(r-l-o)/64,tickFormat:f,fontVariant:d=s_(t),round:p=!0,opacity:m,className:y}=e;const g=sb(e);y=nb(y),m=Gm(m)[1],null===f&&(f=()=>null);const b=ab("svg",g).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",s).attr("viewBox",`0 0 ${r} ${s}`).call((t=>t.append("style").text(`.${y}-ramp {\n  display: block;\n  background: white;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n  overflow: visible;\n}\n.${y}-ramp text {\n  white-space: pre;\n}`))).call(ib,u);let v,_=t=>t.selectAll(".tick line").attr("y1",a+c-s);const x=p?(t,e)=>t.rangeRound(e):(t,e)=>t.range(e),{type:w,domain:S,range:k,interpolate:I,scale:A,pivot:T}=t;if(I){const t=void 0===k?I:dr(1===I.length?Gb(I):I,k);v=x(A.copy(),pr(Ki(l,r-o),Math.min(S.length+(void 0!==T),void 0===k?1/0:k.length)));const e=256,n=g.document.createElement("canvas");n.width=e,n.height=1;const i=n.getContext("2d");for(let n=0,r=e-1;n<e;++n)i.fillStyle=t(n/r),i.fillRect(n,0,1,1);b.append("image").attr("opacity",m).attr("x",l).attr("y",a).attr("width",r-l-o).attr("height",s-a-c).attr("preserveAspectRatio","none").attr("xlink:href",n.toDataURL())}else if("threshold"===w){const t=S,e=void 0===f?t=>t:"string"==typeof f?Ds(f):f;v=x(ul().domain([-1,k.length-1]),[l,r-o]),b.append("g").attr("fill-opacity",m).selectAll().data(k).enter().append("rect").attr("x",((t,e)=>v(e-1))).attr("y",a).attr("width",((t,e)=>v(e)-v(e-1))).attr("height",s-a-c).attr("fill",(t=>t)),h=Jm(t,((t,e)=>e)),f=n=>e(t[n],n)}else v=x(Qc().domain(S),[l,r-o]),b.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",v).attr("y",a).attr("width",Math.max(0,v.bandwidth()-1)).attr("height",s-a-c).attr("fill",A),_=()=>{};return b.append("g").attr("transform",`translate(0,${s-c})`).call(function(t){return oe(Zt,t)}(v).ticks(Array.isArray(h)?null:h,"string"==typeof f?f:void 0).tickFormat("function"==typeof f?f:void 0).tickSize(i).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Zg(d,"normal")).call(_).call((t=>t.select(".domain").remove())),void 0!==n&&b.append("text").attr("x",l).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const o_=Math.PI/180;function c_(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=l_(n),t.markerMid=l_(i),t.markerEnd=l_(r)}function l_(t){if(null==t||!1===t)return null;if(!0===t)return f_;if("function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return u_("auto");case"arrow-reverse":return u_("auto-start-reverse");case"dot":return h_;case"circle":case"circle-fill":return f_;case"circle-stroke":return d_}throw new Error(`invalid marker: ${t}`)}function u_(t){return(e,n)=>ab("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call((t=>t.append("path").attr("d","M-1.5,-3l3,3l-3,3"))).node()}function h_(t,e){return ab("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call((t=>t.append("circle").attr("r",2.5))).node()}function f_(t,e){return ab("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call((t=>t.append("circle").attr("r",3))).node()}function d_(t,e){return ab("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call((t=>t.append("circle").attr("r",3))).node()}let p_=0;function m_(t,e,{stroke:n},i){return g_(t,e,n&&(t=>n[t]),i)}function y_(t,e,{stroke:n},i){return g_(t,e,n&&(([t])=>n[t]),i)}function g_(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},s=(()=>r),a){const o=new Map;function c(t){return function(e){const n=s(e);let i=o.get(t);i||o.set(t,i=new Map);let r=i.get(n);if(!r){const e=this.parentNode.insertBefore(t(n,a),this),s="plot-marker-"+ ++p_;e.setAttribute("id",s),i.set(n,r=`url(#${s})`)}return r}}e&&t.attr("marker-start",c(e)),n&&t.attr("marker-mid",c(n)),i&&t.attr("marker-end",c(i))}function b_({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=__(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function v_({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=__(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function __(t,e,n){return void 0===t&&void 0===e&&void 0===n?Pg?[1,0]:[.5,.5]:[e,n]}function x_(t,{interval:e}){return(t={..._y(t)}).interval=gy(void 0===t.interval?e:t.interval),t}function w_(t,e,n,i){const{[t]:r,[`${t}1`]:s,[`${t}2`]:a}=n,{value:o,interval:c}=x_(r,n);if(null==o||null==c&&!i)return n;const l=dy(r);if(null==c){let e;const i={transform:t=>e||(e=Em(t,o)),label:l};return{...n,[t]:void 0,[`${t}1`]:void 0===s?i:s,[`${t}2`]:void 0===a?i:a}}let u,h;function f(t){return void 0!==h&&t===u?h:h=Jm(Em(u=t,o),(t=>c.floor(t)))}return e({...n,[t]:void 0,[`${t}1`]:void 0===s?{transform:f,label:l}:s,[`${t}2`]:void 0===a?{transform:t=>f(t).map((t=>c.offset(t))),label:l}:a})}function S_(t,e,n){const{[t]:i}=n,{value:r,interval:s}=x_(i,n);return null==r||null==s?n:e({...n,[t]:{label:dy(i),transform:t=>{const e=Jm(Em(t,r),(t=>s.floor(t))),n=e.map((t=>s.offset(t)));return e.map(Iy(e)?(t,e)=>null==t||isNaN(t=+t)||null==(e=n[e])||isNaN(e=+e)?void 0:new Date((t+e)/2):(t,e)=>null==t||null==(e=n[e])?NaN:(+t+ +e)/2)}}})}function k_(t={}){return w_("x",b_,t)}const I_={ariaLabel:"rule",fill:null,stroke:"currentColor"};class A_ extends Hv{constructor(t,e={}){const{x:n,y1:i,y2:r,inset:s=0,insetTop:a=s,insetBottom:o=s}=e;super(t,{x:{value:n,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:r,scale:"y",optional:!0}},Xv(e,"x"),I_),this.insetTop=Vm(a),this.insetBottom=Vm(o),c_(this,e)}render(t,e,n,i,r){const{x:s,y:a}=e,{x:o,y1:c,y2:l}=n,{width:u,height:h,marginTop:f,marginRight:d,marginLeft:p,marginBottom:m}=i,{insetTop:y,insetBottom:g}=this;return ab("svg:g",r).call(Gg,this,i,r).call(Jg,this,{x:o&&s},Pg,0).call((e=>e.selectAll().data(t).enter().append("line").call(Kg,this).attr("x1",o?t=>o[t]:(p+u-d)/2).attr("x2",o?t=>o[t]:(p+u-d)/2).attr("y1",c&&!Tv(a)?t=>c[t]+y:f+y).attr("y2",l&&!Tv(a)?a.bandwidth?t=>l[t]+a.bandwidth()-g:t=>l[t]-g:h-m-g).call(qg,this,n).call(m_,this,n,r))).node()}}class T_ extends Hv{constructor(t,e={}){const{x1:n,x2:i,y:r,inset:s=0,insetRight:a=s,insetLeft:o=s}=e;super(t,{y:{value:r,scale:"y",optional:!0},x1:{value:n,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},Xv(e,"y"),I_),this.insetRight=Vm(a),this.insetLeft=Vm(o),c_(this,e)}render(t,e,n,i,r){const{x:s,y:a}=e,{y:o,x1:c,x2:l}=n,{width:u,height:h,marginTop:f,marginRight:d,marginLeft:p,marginBottom:m}=i,{insetLeft:y,insetRight:g}=this;return ab("svg:g",r).call(Gg,this,i,r).call(Jg,this,{y:o&&a},0,Pg).call((e=>e.selectAll().data(t).enter().append("line").call(Kg,this).attr("x1",c&&!Tv(s)?t=>c[t]+y:p+y).attr("x2",l&&!Tv(s)?s.bandwidth?t=>l[t]+s.bandwidth()-g:t=>l[t]-g:u-d-g).attr("y1",o?t=>o[t]:(f+h-m)/2).attr("y2",o?t=>o[t]:(f+h-m)/2).call(qg,this,n).call(m_,this,n,r))).node()}}function M_(t,e){let{x:n=$m,y:i,y1:r,y2:s,...a}=function(t={}){return w_("y",v_,t)}(e);return[r,s]=C_(i,r,s),new A_(t,{...a,x:n,y1:r,y2:s})}function E_(t,e){let{y:n=$m,x:i,x1:r,x2:s,...a}=k_(e);return[r,s]=C_(i,r,s),new T_(t,{...a,y:n,x1:r,x2:s})}function C_(t,e,n){if(null==t){if(void 0===e){if(void 0!==n)return[0,n]}else if(void 0===n)return[0,e]}else{if(void 0===e)return void 0===n?[0,t]:[t,n];if(void 0===n)return[t,e]}return[e,n]}function N_(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)"function"!=typeof e[i]&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let s=0;s<n;++s)r+=e[s](i)+t[s+1];return r}}const L_={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},O_="­";class D_ extends Hv{constructor(t,e={}){const{x:n,y:i,text:r=(wy(t)&&Sy(t)?$m:Dm),frameAnchor:s,textAnchor:a=(/right$/i.test(s)?"end":/left$/i.test(s)?"start":"middle"),lineAnchor:o=(/^top/i.test(s)?"top":/^bottom/i.test(s)?"bottom":"middle"),lineHeight:c=1,lineWidth:l=1/0,textOverflow:u,monospace:h,fontFamily:f=(h?"ui-monospace, monospace":void 0),fontSize:d,fontStyle:p,fontVariant:m,fontWeight:y,rotate:g}=e,[b,v]=Gm(g,0),[_,x]=function(t){return null==t||"number"==typeof t?[void 0,t]:"string"!=typeof t?[t,void 0]:(t=t.trim().toLowerCase(),R_.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}(d);if(super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:xy(b),optional:!0},text:{value:r,filter:Xp,optional:!0}},e,L_),this.rotate=v,this.textAnchor=Zg(a,"middle"),this.lineAnchor=Qm(o,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+c,this.lineWidth=+l,this.textOverflow=$_(u),this.monospace=!!h,this.fontFamily=Pm(f),this.fontSize=x,this.fontStyle=Pm(p),this.fontVariant=Pm(m),this.fontWeight=Pm(y),this.frameAnchor=$y(s),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${l}`);this.splitLines=Y_(this),this.clipLine=H_(this)}render(t,e,n,i,r){const{x:s,y:a}=e,{x:o,y:c,rotate:l,text:u,title:h,fontSize:f}=n,{rotate:d}=this,[p,m]=rb(this,i);return ab("svg:g",r).call(Gg,this,i,r).call(U_,this,u,i).call(Jg,this,{x:o&&s,y:c&&a}).call((e=>e.selectAll().data(t).enter().append("text").call(Kg,this).call(B_,this,u,h).attr("transform",N_`translate(${o?t=>o[t]:p},${c?t=>c[t]:m})${l?t=>` rotate(${l[t]})`:d?` rotate(${d})`:""}`).call(Xg,"font-size",f&&(t=>f[t])).call(qg,this,n))).node()}}function $_(t){return null==t?null:Qm(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function B_(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:s,textOverflow:a,splitLines:o,clipLine:c}=e;t.each((function(t){const e=o(Dg(n[t])??"").map(c),l=e.length,u="top"===r?.71:"bottom"===r?1-l:(164-100*l)/200;if(l>1){let t=0;for(let n=0;n<l;++n){if(++t,!e[n])continue;const i=this.ownerDocument.createElementNS(pe.svg,"tspan");i.setAttribute("x",0),n===t-1?i.setAttribute("y",(u+n)*s+"em"):i.setAttribute("dy",t*s+"em"),i.textContent=e[n],this.appendChild(i),t=0}}else u&&this.setAttribute("y",u*s+"em"),this.textContent=e[0];if(a&&!i&&e[0]!==n[t]){const e=this.ownerDocument.createElementNS(pe.svg,"title");e.textContent=n[t],this.appendChild(e)}}))}function F_(t,{x:e,y:n,...i}={}){return void 0===i.frameAnchor&&([e,n]=sy(e,n)),new D_(t,{...i,x:e,y:n})}function P_(t,{x:e=$m,...n}={}){return new D_(t,function(t={}){return S_("y",v_,t)}({...n,x:e}))}function V_(t,{y:e=$m,...n}={}){return new D_(t,function(t={}){return S_("x",b_,t)}({...n,y:e}))}function U_(t,e,n){Xg(t,"text-anchor",e.textAnchor),Xg(t,"font-family",e.fontFamily),Xg(t,"font-size",e.fontSize),Xg(t,"font-style",e.fontStyle),Xg(t,"font-variant",void 0===e.fontVariant?function(t){return t&&(function(t){for(const e of t)if(null!=e)return"number"==typeof e}(t)||Iy(t))?"tabular-nums":void 0}(n):e.fontVariant),Xg(t,"font-weight",e.fontWeight)}const R_=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function j_(t,e,n){const i=[];let r,s=0;for(const[a,o,c]of function*(t){let e=0,n=0;const i=t.length;for(;n<i;){let i=1;switch(t[n]){case O_:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];" "===t[++n];);e=n;break;case"\r":"\n"===t[n+1]&&++i;case"\n":yield[e,n,!0],n+=i,e=n;break;default:++n}}yield[e,n,!0]}(t))void 0===r&&(r=a),s>r&&n(t,r,o)>e&&(i.push(t.slice(r,s)+(t[s-1]===O_?"-":"")),r=a),c?(i.push(t.slice(r,o)),r=void 0):s=o;return i}const z_={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function q_(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=tx(t,r))i+=z_[t[r]]??(nx(t,r)?120:z_.e);return i}function W_(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=tx(t,r))i+=nx(t,r)?200:100;return i}function Y_({monospace:t,lineWidth:e,textOverflow:n}){if(null!=n||e==1/0)return t=>t.split(/\r\n?|\n/g);const i=t?W_:q_,r=100*e;return t=>j_(t,r,i)}function H_({monospace:t,lineWidth:e,textOverflow:n}){if(null==n||e==1/0)return t=>t;const i=t?W_:q_,r=100*e;switch(n){case"clip-start":return t=>X_(t,r,i,"");case"clip-end":return t=>Q_(t,r,i,"");case"ellipsis-start":return t=>X_(t,r,i,G_);case"ellipsis-middle":return t=>function(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const s=n(i)/2,[a,o]=K_(t,e/2,n,s),[c]=K_(t,r-e/2-o+s,n,-s);return c<0?i:t.slice(0,a).trimEnd()+i+t.slice(tx(t,c)).trimStart()}(t,r,i,G_);case"ellipsis-end":return t=>Q_(t,r,i,G_)}}const G_="…";function K_(t,e,n,i){const r=[];let s=0;for(let a=0,o=0,c=t.length;a<c;a=o){o=tx(t,a);const c=n(t,a,o);if(s+c>e){for(s+=i;s>e&&a>0;)o=a,a=r.pop(),s-=n(t,a,o);return[a,e-s]}s+=c,r.push(a)}return[-1,0]}function Q_(t,e,n,i){t=t.trim();const r=n(i),[s]=K_(t,e,n,r);return s<0?t:t.slice(0,s).trimEnd()+i}function X_(t,e,n,i){const r=n(t=t.trim());if(r<=e)return t;const s=n(i),[a]=K_(t,r-e+s,n,-s);return a<0?i:i+t.slice(tx(t,a)).trimStart()}const J_=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Z_=/\p{Extended_Pictographic}/uy;function tx(t,e){return e+=function(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const n=t.charCodeAt(e+1);return n>=56320&&n<57344}return!1}(t,e)?2:1,function(t,e){return!ex(t,e)&&(J_.lastIndex=e,J_.test(t))}(t,e)&&(e=J_.lastIndex),function(t,e){return 8205===t.charCodeAt(e)}(t,e)?tx(t,e+1):e}function ex(t,e){return t.charCodeAt(e)<128}function nx(t,e){return!ex(t,e)&&(Z_.lastIndex=e,Z_.test(t))}const ix={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},rx=3.5,sx=5*rx,ax={draw(t,e,n){const i=e*n/sx;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},ox=new Map([["arrow",ax],["spike",{draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}}]]);let cx=class extends Hv{constructor(t,e={}){const{x:n,y:i,r:r=rx,length:s,rotate:a,shape:o=ax,anchor:c="middle",frameAnchor:l}=e,[u,h]=Gm(s,12),[f,d]=Gm(a,0);super(t,{x:{value:n,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:u,scale:"length",optional:!0},rotate:{value:f,optional:!0}},e,ix),this.r=+r,this.length=h,this.rotate=d,this.shape=function(t){if(function(t){return t&&"function"==typeof t.draw}(t))return t;const e=ox.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}(o),this.anchor=Qm(c,"anchor",["start","middle","end"]),this.frameAnchor=$y(l)}render(t,e,n,i,r){const{x:s,y:a}=e,{x:o,y:c,length:l,rotate:u}=n,{length:h,rotate:f,anchor:d,shape:p,r:m}=this,[y,g]=rb(this,i);return ab("svg:g",r).call(Gg,this,i,r).call(Jg,this,{x:o&&s,y:c&&a}).call((e=>e.selectAll().data(t).enter().append("path").call(Kg,this).attr("transform",N_`translate(${o?t=>o[t]:y},${c?t=>c[t]:g})${u?t=>` rotate(${u[t]})`:f?` rotate(${f})`:""}${"start"===d?"":"end"===d?l?t=>` translate(0,${l[t]})`:` translate(0,${h})`:l?t=>` translate(0,${l[t]/2})`:` translate(0,${h/2})`}`).attr("d",l?t=>{const e=Ss();return p.draw(e,l[t],m),e}:(()=>{const t=Ss();return p.draw(t,h,m),t})()).call(qg,this,n))).node()}};function lx(t,e={}){const{x:n=$m,...i}=e;return new cx(t,{...i,x:n})}function ux(t,e={}){const{y:n=$m,...i}=e;return new cx(t,{...i,y:n})}function hx(t,e){return arguments.length<2&&!wy(t)&&(e=t,t=null),void 0===e&&(e={}),[t,e]}function fx({anchor:t}={},e){return void 0===t?e[0]:Qm(t,"anchor",e)}function dx(t){return fx(t,["left","right"])}function px(t){return fx(t,["right","left"])}function mx(t){return fx(t,["bottom","top"])}function yx(t){return fx(t,["top","bottom"])}function gx(){const[t,e]=hx(...arguments);return xx("y",dx(e),t,e)}function bx(){const[t,e]=hx(...arguments);return xx("fy",px(e),t,e)}function vx(){const[t,e]=hx(...arguments);return wx("x",mx(e),t,e)}function _x(){const[t,e]=hx(...arguments);return wx("fx",yx(e),t,e)}function xx(t,e,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:a=r,strokeWidth:o=1,fill:c=i,fillOpacity:l=r,textAnchor:u,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:p=("y"===t?6:0),tickPadding:m,tickRotate:y,x:g,margin:b,marginTop:v=(void 0===b?20:b),marginRight:_=(void 0===b?"right"===e?40:0:b),marginBottom:x=(void 0===b?20:b),marginLeft:w=(void 0===b?"left"===e?40:0:b),label:S,labelAnchor:k,labelArrow:I,labelOffset:A,...T}){return p=Vm(p),m=Vm(m),y=Vm(y),void 0!==k&&(k=Qm(k,"labelAnchor",["center","top","bottom"])),I=Rx(I),Gv(p&&!Ly(s)?function(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:a=e+("y"===t?"-empty":""),frameAnchor:o=e,tickSize:c,inset:l=0,insetLeft:u=l,insetRight:h=l,dx:f=0,y:d=("y"===t?void 0:null),...p}){return Nx(ux,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:s,facetAnchor:a,frameAnchor:o,y:d,...p,dx:"left"===e?+f-Pg+ +u:+f+Pg-h,anchor:"start",length:c,shape:"left"===e?Fx:Px})}(t,e,n,{stroke:s,strokeOpacity:a,strokeWidth:o,tickSize:p,tickPadding:m,tickRotate:y,x:g,...T}):null,Ly(c)?null:function(t,e,n,{facetAnchor:i=e+("y"===t?"-empty":""),frameAnchor:r=e,tickSize:s,tickRotate:a=0,tickPadding:o=Math.max(3,9-s)+(Math.abs(a)>60?4*Math.cos(a*o_):0),text:c,textAnchor:l=(Math.abs(a)>60?"middle":"left"===e?"end":"start"),lineAnchor:u=(a>60?"top":a<-60?"bottom":"middle"),fontVariant:h,inset:f=0,insetLeft:d=f,insetRight:p=f,dx:m=0,y:y=("y"===t?void 0:null),...g}){return Nx(V_,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:c,textAnchor:l,lineAnchor:u,fontVariant:h,rotate:a,y:y,...g,dx:"left"===e?+m-s-o+ +d:+m+ +s+ +o-p},(function(t,n,i,r,s){void 0===h&&(this.fontVariant=Vx(t)),void 0===c&&(s.text=Lx(t,n,i,r,e))}))}(t,e,n,{fill:c,fillOpacity:l,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:y,x:g,marginTop:v,marginRight:_,marginBottom:x,marginLeft:w,...T}),Ly(c)||null===S?null:F_([],Cx({fill:c,fillOpacity:l,...T},(function(n,i,r,s,a){const o=s[t],{marginTop:c,marginRight:l,marginBottom:u,marginLeft:h}="y"===t&&a.inset||a,f=k??(o.bandwidth?"center":"top"),d=A??("right"===e?l:h)-3;return"center"===f?(this.textAnchor=void 0,this.lineAnchor="right"===e?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor="right"===e?"end":"start",this.lineAnchor=f,this.frameAnchor=`${f}-${e}`,this.rotate=0),this.dy="top"===f?3-c:"bottom"===f?u-3:0,this.dx="right"===e?d:-d,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Ux(t,o,{anchor:e,label:S,labelAnchor:f,labelArrow:I})]}}}}))))}function wx(t,e,n,{color:i="currentColor",opacity:r=1,stroke:s=i,strokeOpacity:a=r,strokeWidth:o=1,fill:c=i,fillOpacity:l=r,textAnchor:u,textStroke:h,textStrokeOpacity:f,textStrokeWidth:d,tickSize:p=("x"===t?6:0),tickPadding:m,tickRotate:y,y:g,margin:b,marginTop:v=(void 0===b?"top"===e?30:0:b),marginRight:_=(void 0===b?20:b),marginBottom:x=(void 0===b?"bottom"===e?30:0:b),marginLeft:w=(void 0===b?20:b),label:S,labelAnchor:k,labelArrow:I,labelOffset:A,...T}){return p=Vm(p),m=Vm(m),y=Vm(y),void 0!==k&&(k=Qm(k,"labelAnchor",["center","left","right"])),I=Rx(I),Gv(p&&!Ly(s)?function(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:s=null,facetAnchor:a=e+("x"===t?"-empty":""),frameAnchor:o=e,tickSize:c,inset:l=0,insetTop:u=l,insetBottom:h=l,dy:f=0,x:d=("x"===t?void 0:null),...p}){return Nx(lx,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:s,strokeLinecap:r,facetAnchor:a,frameAnchor:o,x:d,...p,dy:"bottom"===e?+f-Pg-h:+f+Pg+ +u,anchor:"start",length:c,shape:"bottom"===e?$x:Bx})}(t,e,n,{stroke:s,strokeOpacity:a,strokeWidth:o,tickSize:p,tickPadding:m,tickRotate:y,y:g,...T}):null,Ly(c)?null:function(t,e,n,{facetAnchor:i=e+("x"===t?"-empty":""),frameAnchor:r=e,tickSize:s,tickRotate:a=0,tickPadding:o=Math.max(3,9-s)+(Math.abs(a)>=10?4*Math.cos(a*o_):0),text:c,textAnchor:l=(Math.abs(a)>=10?a<0^"bottom"===e?"start":"end":"middle"),lineAnchor:u=(Math.abs(a)>=10?"middle":"bottom"===e?"top":"bottom"),fontVariant:h,inset:f=0,insetTop:d=f,insetBottom:p=f,dy:m=0,x:y=("x"===t?void 0:null),...g}){return Nx(P_,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:void 0===c?null:c,textAnchor:l,lineAnchor:u,fontVariant:h,rotate:a,x:y,...g,dy:"bottom"===e?+m+ +s+ +o-p:+m-s-o+ +d},(function(t,n,i,r,s){void 0===h&&(this.fontVariant=Vx(t)),void 0===c&&(s.text=Lx(t,n,i,r,e))}))}(t,e,n,{fill:c,fillOpacity:l,stroke:h,strokeOpacity:f,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:y,y:g,marginTop:v,marginRight:_,marginBottom:x,marginLeft:w,...T}),Ly(c)||null===S?null:F_([],Cx({fill:c,fillOpacity:l,...T},(function(n,i,r,s,a){const o=s[t],{marginTop:c,marginRight:l,marginBottom:u,marginLeft:h}="x"===t&&a.inset||a,f=k??(o.bandwidth?"center":"right"),d=A??("top"===e?c:u)-3;return"center"===f?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${f}`,this.textAnchor="right"===f?"end":"start"),this.lineAnchor=e,this.dy="top"===e?-d:d,this.dx="right"===f?l-3:"left"===f?3-h:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Ux(t,o,{anchor:e,label:S,labelAnchor:f,labelArrow:I})]}}}}))))}function Sx(){const[t,e]=hx(...arguments);return Tx("y",dx(e),t,e)}function kx(){const[t,e]=hx(...arguments);return Tx("fy",px(e),t,e)}function Ix(){const[t,e]=hx(...arguments);return Mx("x",mx(e),t,e)}function Ax(){const[t,e]=hx(...arguments);return Mx("fx",yx(e),t,e)}function Tx(t,e,n,{y:i=("y"===t?void 0:null),x:r=null,x1:s=("left"===e?r:null),x2:a=("right"===e?r:null),...o}){return Nx(E_,t,e,`${t}-grid`,n,{y:i,x1:s,x2:a,...Ex(o)})}function Mx(t,e,n,{x:i=("x"===t?void 0:null),y:r=null,y1:s=("top"===e?r:null),y2:a=("bottom"===e?r:null),...o}){return Nx(M_,t,e,`${t}-grid`,n,{x:i,y1:s,y2:a,...Ex(o)})}function Ex({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...s}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...s}}function Cx({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:a,monospace:o,pointerEvents:c,shapeRendering:l,clip:u=!1},h){return[,t]=Hm(t),[,e]=Gm(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:s,fontWeight:a,monospace:o,pointerEvents:c,shapeRendering:l,clip:u,initializer:h}}function Nx(t,e,n,i,r,s,a){let o;const c=Jy(s).initializer,l=t(r,Jy({...s,initializer:function(t,n,i,r,c,l){const u=null==t&&("fx"===e||"fy"===e),{[e]:h}=r;if(!h)throw new Error(`missing scale: ${e}`);const f=h.domain();let{interval:d,ticks:p,tickFormat:m,tickSpacing:y=("x"===e?80:35)}=s;if("string"==typeof p&&jx(h)&&(d=p,p=void 0),void 0===p&&(p=by(d,h.type)??function(t,e){const[n,i]=at(t.range());return(i-n)/e}(h,y)),null==t){if(wy(p))t=Xm(p);else if(vy(p))t=Dx(p,...at(f));else if(h.interval){let e=h.interval;if(h.ticks){const[n,i]=at(f);e=wm(e,(i-n)/e[ym]/p)??e,t=Dx(e,n,i)}else{e=wm(e,(t=f).length/p)??e,e!==h.interval&&(t=Dx(e,...at(t)))}if(e===h.interval){const e=Math.round(t.length/p);e>1&&(t=t.filter(((t,n)=>n%e==0)))}}else t=h.ticks?h.ticks(p):f;if(!h.ticks&&t.length&&t!==f){const n=new lt(f);(t=t.filter((t=>n.has(t)))).length||Fg(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}"y"===e||"x"===e?n=[oy(t)]:o[e]={scale:e,value:$m}}a?.call(this,h,t,p,m,o);const g=Object.fromEntries(Object.entries(o).map((([e,n])=>[e,{...n,value:Em(t,n.value)}])));return u&&(n=l.filterFacets(t,g)),{data:t,facets:n,channels:g}}},c));return null==r?(o=l.channels,l.channels={}):o={},l.ariaLabel=i,void 0===l.clip&&(l.clip=!1),l}function Lx(t,e,n,i,r){return{value:Ox(t,e,n,i,r)}}function Ox(t,e,n,i,r){return"function"==typeof i?i:void 0===i&&e&&Iy(e)?km(e,r)??Dg:t.tickFormat?t.tickFormat("number"==typeof n?n:null,i):void 0===i?Dg:"string"==typeof i?(Iy(t.domain())?Tu:Ds)(i):jm(i)}function Dx(t,e,n){return t.range(e,t.offset(t.floor(n)))}const $x={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},Bx={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},Fx={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},Px={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function Vx(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function Ux(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:s}={}){if(!(null==i||i.inferred&&jx(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),"auto"===s&&(s=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(i)),!s)return i;if(!0===s){const n=function(t){return Math.sign(By(t.domain()))*Math.sign(By(t.range()))}(e);n&&(s=/x$/.test(t)||"center"===r?/x$/.test(t)===n<0?"left":"right":n<0?"up":"down")}switch(s){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return"right"===n?`${i} ↑`:`↑ ${i}`;case"down":return"right"===n?`${i} ↓`:`↓ ${i}`}return i}}function Rx(t="auto"){return!Ly(t)&&("boolean"==typeof t?t:Qm(t,"labelArrow",["auto","up","right","down","left"]))}function jx(t){return Iy(t.domain())}function zx(t,e){if(null==e)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function qx(t,e={},n){let{columns:i,tickFormat:r,fontVariant:s=s_(t),swatchSize:a=15,swatchWidth:o=a,swatchHeight:c=a,marginLeft:l=0,className:u,style:h,width:f}=e;const d=sb(e);u=nb(u),r=Ox(t.scale,t.domain,void 0,r);const p=ab("div",d).attr("class",`${u}-swatches ${u}-swatches-${null!=i?"columns":"wrap"}`);let m;return null!=i?(m=`.${u}-swatches-columns .${u}-swatch {\n  display: flex;\n  align-items: center;\n  break-inside: avoid;\n  padding-bottom: 1px;\n}\n.${u}-swatches-columns .${u}-swatch::before {\n  flex-shrink: 0;\n}\n.${u}-swatches-columns .${u}-swatch-label {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}`,p.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,o,c).call((t=>t.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r)))):(m=`.${u}-swatches-wrap {\n  display: flex;\n  align-items: center;\n  min-height: 33px;\n  flex-wrap: wrap;\n}\n.${u}-swatches-wrap .${u}-swatch {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 1em;\n}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,o,c).append((function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))}))),p.call((t=>t.insert("style","*").text(`.${u}-swatches {\n  font-family: system-ui, sans-serif;\n  font-size: 10px;\n  margin-bottom: 0.5em;\n}\n.${u}-swatch > svg {\n  margin-right: 0.5em;\n  overflow: visible;\n}\n${m}`))).style("margin-left",l?+l+"px":null).style("width",void 0===f?null:+f+"px").style("font-variant",Zg(s,"normal")).call(ib,h).node()}const Wx=new Map([["symbol",function(t,{fill:e=(void 0!==t.hint?.fill?t.hint.fill:"none"),fillOpacity:n=1,stroke:i=(void 0!==t.hint?.stroke?t.hint.stroke:Ly(e)?"currentColor":"none"),strokeOpacity:r=1,strokeWidth:s=1.5,r:a=4.5,...o}={},c){const[l,u]=Hm(e),[h,f]=Hm(i),d=zx(c,l),p=zx(c,h),m=a*a*Math.PI;return n=Gm(n)[1],r=Gm(r)[1],s=Gm(s)[1],qx(t,o,((e,i,a,o)=>e.append("svg").attr("viewBox","-8 -8 16 16").attr("width",a).attr("height",o).attr("fill","color"===l?t=>d.scale(t):u).attr("fill-opacity",n).attr("stroke","color"===h?t=>p.scale(t):f).attr("stroke-opacity",r).attr("stroke-width",s).append("path").attr("d",(e=>{const n=Ss();return t.scale(e).draw(n,m),n}))))}],["color",Hx],["opacity",function({type:t,interpolate:e,...n},{legend:i=!0,color:r=Kn(0,0,0),...s}){if(!e)throw new Error(`${t} opacity scales are not supported`);!0===i&&(i="ramp");if("ramp"!==`${i}`.toLowerCase())throw new Error(`${i} opacity legends are not supported`);return Hx({type:t,...n,interpolate:Gx(r)},{legend:i,...s})}]]);function Yx({className:t,...e},{label:n,ticks:i,tickFormat:r}={},s){return function(t={},...e){let n=t;for(const i of e)for(const e in i)if(void 0===n[e]){const r=i[e];n===t?n={...n,[e]:r}:n[e]=r}return n}(s,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function Hx(t,{legend:e=!0,...n}){if(!0===e&&(e="ordinal"===t.type?"swatches":"ramp"),void 0!==t.domain)switch(`${e}`.toLowerCase()){case"swatches":return function(t,{opacity:e,...n}={}){if(!Iv(t)&&!Av(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return qx(t,n,((t,n,i,r)=>t.append("svg").attr("width",i).attr("height",r).attr("fill",n.scale).attr("fill-opacity",Gm(e)[1]).append("rect").attr("width","100%").attr("height","100%")))}(t,n);case"ramp":return a_(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function Gx(t){const{r:e,g:n,b:i}=Kn(t)||Kn(0,0,0);return t=>`rgba(${e},${n},${i},${t})`}const Kx={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},Qx={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Xx extends Hv{constructor(t={}){const{anchor:e=null,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:s=n,insetLeft:a=n,rx:o,ry:c}=t;super(Lm,void 0,t,null==e?Kx:Qx),this.anchor=Km(e,"anchor",["top","right","bottom","left"]),this.insetTop=Vm(i),this.insetRight=Vm(r),this.insetBottom=Vm(s),this.insetLeft=Vm(a),this.rx=Vm(o),this.ry=Vm(c)}render(t,e,n,i,r){const{marginTop:s,marginRight:a,marginBottom:o,marginLeft:c,width:l,height:u}=i,{anchor:h,insetTop:f,insetRight:d,insetBottom:p,insetLeft:m,rx:y,ry:g}=this,b=c+m,v=l-a-d,_=s+f,x=u-o-p;return ab(h?"svg:line":"svg:rect",r).datum(0).call(Gg,this,i,r).call(Kg,this).call(qg,this,n).call(Jg,this,{}).call("left"===h?t=>t.attr("x1",b).attr("x2",b).attr("y1",_).attr("y2",x):"right"===h?t=>t.attr("x1",v).attr("x2",v).attr("y1",_).attr("y2",x):"top"===h?t=>t.attr("x1",b).attr("x2",v).attr("y1",_).attr("y2",_):"bottom"===h?t=>t.attr("x1",b).attr("x2",v).attr("y1",x).attr("y2",x):t=>t.attr("x",b).attr("y",_).attr("width",v-b).attr("height",x-_).attr("rx",y).attr("ry",g)).node()}}const Jx={ariaLabel:"tip",fill:"white",stroke:"currentColor"},Zx=new Set(["geometry","href","src","ariaLabel","scales"]);class tw extends Hv{constructor(t,e={}){e.tip&&(e={...e,tip:!1}),void 0===e.title&&wy(t)&&Sy(t)&&(e={...e,title:$m});const{x:n,y:i,x1:r,x2:s,y1:a,y2:o,anchor:c,monospace:l,fontFamily:u=(l?"ui-monospace, monospace":void 0),fontSize:h,fontStyle:f,fontVariant:d,fontWeight:p,lineHeight:m=1,lineWidth:y=20,frameAnchor:g,format:b,textAnchor:v="start",textOverflow:_,textPadding:x=8,title:w,pointerSize:S=12,pathFilter:k="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=e;super(t,{x:{value:null!=r&&null!=s?null:n,scale:"x",optional:!0},y:{value:null!=a&&null!=o?null:i,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:null==s},y1:{value:a,scale:"y",optional:null==o},x2:{value:s,scale:"x",optional:null==r},y2:{value:o,scale:"y",optional:null==a},title:{value:w,optional:!0}},e,Jx),this.anchor=Dy(c,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=$y(g),this.textAnchor=Zg(v,"middle"),this.textPadding=+x,this.pointerSize=+S,this.pathFilter=Pm(k),this.lineHeight=+m,this.lineWidth=+y,this.textOverflow=$_(_),this.monospace=!!l,this.fontFamily=Pm(u),this.fontSize=Vm(h),this.fontStyle=Pm(f),this.fontVariant=Pm(d),this.fontWeight=Pm(p);for(const t in Jx)t in this.channels&&(this[t]=Jx[t]);this.splitLines=Y_(this),this.clipLine=H_(this),this.format={...b}}render(t,e,n,i,r){const s=this,{x:a,y:o,fx:c,fy:l}=e,{ownerSVGElement:u,document:h}=r,{anchor:f,monospace:d,lineHeight:p,lineWidth:m}=this,{textPadding:y,pointerSize:g,pathFilter:b}=this,{marginTop:v,marginLeft:_}=i,{x1:x,y1:w,x2:S,y2:k,x:I=x??S,y:A=w??k}=n,T=c?c(t.fx)-_:0,M=l?l(t.fy)-v:0,[E,C]=rb(this,i),N=i_(n,E),L=r_(n,C),O=d?W_:q_,D=O(G_);let $,B;"title"in n?($=n.channels,B=rw):($=nw.call(this,n,e),B=sw);const F=ab("svg:g",r).call(Gg,this,i,r).call(U_,this).call(Jg,this,{x:I&&a,y:A&&o}).call((i=>i.selectAll().data(t).enter().append("g").attr("transform",(t=>`translate(${Math.round(N(t))},${Math.round(L(t))})`)).call(Kg,this).call((t=>t.append("path").attr("filter",b))).call((i=>i.append("text").each((function(i){const r=An(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const a=B.call(s,i,t,$,e,n);if("string"==typeof a)for(const t of s.splitLines(a))P(r,{value:s.clipLine(t)});else{const t=new Set;for(const e of a){const{label:n=""}=e;n&&t.has(n)||(t.add(n),P(r,e))}}}))))));function P(t,{label:e,value:n,color:i,opacity:r}){e??="",n??="";const s=null!=i||null!=r;let a,o=100*m;const[c]=K_(e,o,O,D);if(c>=0)e=e.slice(0,c).trimEnd()+G_,a=n.trim(),n="";else{(e||!n&&!s)&&(n=" "+n);const[t]=K_(n,o-O(e),O,D);t>=0&&(a=(n=n.slice(0,t).trimEnd()+G_).trim())}const l=t.append("tspan").attr("x",0).attr("dy",`${p}em`).text("​");e&&l.append("tspan").attr("font-weight","bold").text(e),n&&l.append((()=>h.createTextNode(n))),s&&l.append("tspan").text(" ■").attr("fill",i).attr("fill-opacity",r).style("user-select","none"),a&&l.append("title").text(a)}function V(){const{width:t,height:e}=i.facet??i;F.selectChildren().each((function(n){let{x:i,width:r,height:a}=this.getBBox();r=Math.round(r),a=Math.round(a);let o=f;if(void 0===o){o=s.previousAnchor;const i=N(n)+T,c=L(n)+M,l=i+r+2*y<t,u=i-r-2*y>0,h=c+a+g+2*y+7<e,f=c-a-g-2*y>0,d=(/-left$/.test(o)?l||!u:l&&!u)?"left":"right",p=(/^top-/.test(o)?h||!f:h&&!f)?"top":"bottom";o=s.previousAnchor=`${p}-${d}`}const c=this.firstChild,l=this.lastChild;if(c.setAttribute("d",function(t,e,n,i,r){const s=i+2*n,a=r+2*n;switch(t){case"middle":return`M${-s/2},${-a/2}h${s}v${a}h${-s}z`;case"top-left":return`M0,0l${e},${e}h${s-e}v${a}h${-s}z`;case"top":return`M0,0l${e/2},${e/2}h${(s-e)/2}v${a}h${-s}v${-a}h${(s-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-s}v${a}h${s}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-s}v${a}h${s}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${s-e}v${-a}h${-s}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(s-e)/2}v${-a}h${-s}v${a}h${(s-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-s}v${-a}h${s}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${s}v${a}h${-s}v${e/2-a/2}z`}}(o,g,y,r,a)),i)for(const t of l.childNodes)t.setAttribute("x",-i);l.setAttribute("y",+function(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}(o,l.childNodes.length,p).toFixed(6)+"em"),l.setAttribute("transform",`translate(${function(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}(o,g,y,r,a)})`)})),F.attr("visibility",null)}return t.length&&(F.attr("visibility","hidden"),u.isConnected?Promise.resolve().then(V):"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(V)),F.node()}}function ew(t,{x:e,y:n,...i}={}){return void 0===i.frameAnchor&&([e,n]=sy(e,n)),new tw(t,{...i,x:e,y:n})}function nw({channels:t},e){const n={};let i=this.format;i=iw(i,t,"x"),i=iw(i,t,"y"),this.format=i;for(const e in i){const r=i[e];if(null!==r&&!1!==r)if("fx"===e||"fy"===e)n[e]=!0;else{const i=Ng(t,e);i&&(n[e]=i)}}for(const e in t){if(e in n||e in i||Zx.has(e))continue;const r=Ng(t,e);r&&(n[e]=r)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const t in n){const i=this.format[t];if("string"==typeof i){const r=n[t]?.value??e[t]?.domain()??[];this.format[t]=(Iy(r)?Tu:Ds)(i)}else if(void 0===i||!0===i){const n=e[t];this.format[t]=n?.bandwidth?Ox(n,n.domain()):Dg}}return n}function iw(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if(!(!(i in t)&&i in e||!(r in t)&&r in e))return t;const s=Object.entries(t),a=t[n];return s.splice(s.findIndex((([t])=>t===n))+1,0,[i,a],[r,a]),Object.fromEntries(s)}function rw(t,e,{title:n}){return Dg(n.value[t],t)}function*sw(t,e,n,i,r){for(const s in n){if("fx"===s||"fy"===s){yield{label:cw(i,n,s),value:this.format[s](e[s],t)};continue}if("x1"===s&&"x2"in n)continue;if("y1"===s&&"y2"in n)continue;const a=n[s];if("x2"===s&&"x1"in n)yield{label:ow(i,n,"x"),value:aw(this.format.x2,n.x1,a,t)};else if("y2"===s&&"y1"in n)yield{label:ow(i,n,"y"),value:aw(this.format.y2,n.y1,a,t)};else{const e=a.value[t],o=a.scale;if(!Gp(e)&&null==o)continue;yield{label:cw(i,n,s),value:this.format[s](e,t),color:"color"===o?r[s][t]:null,opacity:"opacity"===o?r[s][t]:null}}}}function aw(t,e,n,i){return n.hint?.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}–${t(n.value[i],i)}`}function ow(t,e,n){const i=cw(t,e,`${n}1`,n),r=cw(t,e,`${n}2`,n);return i===r?i:`${i}–${r}`}function cw(t,e,n,i=n){const r=e[n],s=t[r?.scale??n];return String(s?.label??r?.label??i)}function lw(t={}){const{facet:e,style:n,title:i,subtitle:r,caption:s,ariaLabel:a,ariaDescription:o}=t,c=nb(t.className),l=void 0===t.marks?[]:hw(t.marks);l.push(...function(t){const e=[];for(const n of t){let t=n.tip;if(t){!0===t?t={}:"string"==typeof t&&(t={pointer:t});let{pointer:i}=t;i=/^x$/i.test(i)?e_:/^y$/i.test(i)?n_:t_,t=i(_w(n,t)),t.title=null;const r=ew(n.data,t);r.facet=n.facet,r.facetAnchor=n.facetAnchor,e.push(r)}}return e}(l));const u=function(t,e){if(null==t)return;const{x:n,y:i}=t;if(null==n&&null==i)return;const r=Xm(t.data);if(null==r)throw new Error("missing facet data");const s={};null!=n&&(s.fx=wg(r,{value:n,scale:"fx"}));null!=i&&(s.fy=wg(r,{value:i,scale:"fy"}));pw(s,e);const a=Dv(r,s);return{channels:s,groups:a,data:t.data}}(e,t),h=new Map;for(const e of l){const n=vw(e,u,t);n&&h.set(e,n)}const f=new Map;u&&gw(f,[u],t),gw(f,h,t);const d=hw(function(t,e,n){let{projection:i,x:r={},y:s={},fx:a={},fy:o={},axis:c,grid:l,facet:u={},facet:{axis:h=c,grid:f}=u,x:{axis:d=c,grid:p=(null===d?null:l)}=r,y:{axis:m=c,grid:y=(null===m?null:l)}=s,fx:{axis:g=h,grid:b=(null===g?null:f)}=a,fy:{axis:v=h,grid:_=(null===v?null:f)}=o}=n;(i||!ny(r)&&!Iw("x",t))&&(d=p=null);(i||!ny(s)&&!Iw("y",t))&&(m=y=null);e.has("fx")||(g=b=null);e.has("fy")||(v=_=null);void 0===d&&(d=!kw(t,"x"));void 0===m&&(m=!kw(t,"y"));void 0===g&&(g=!kw(t,"fx"));void 0===v&&(v=!kw(t,"fy"));!0===d&&(d="bottom");!0===m&&(m="left");!0===g&&(g="top"===d||null===d?"bottom":"top");!0===v&&(v="right"===m||null===m?"left":"right");const x=[];return ww(x,_,kx,o),xw(x,v,bx,"right","left",u,o),ww(x,b,Ax,a),xw(x,g,_x,"top","bottom",u,a),ww(x,y,Sx,s),xw(x,m,gx,"left","right",n,s),ww(x,p,Ix,r),xw(x,d,vx,"bottom","top",n,r),x}(l,f,t));for(const e of d){const n=vw(e,u,t);n&&h.set(e,n)}l.unshift(...d);let p=Ov(f,t);if(void 0!==p){const t=u?Yv(p,u):void 0;for(const e of l){if(null===e.facet||"super"===e.facet)continue;const n=h.get(e);void 0!==n&&(n.facetsIndex=null!=e.fx||null!=e.fy?Yv(p,n):t)}const e=new Set;for(const{facetsIndex:t}of h.values())t?.forEach(((t,n)=>{t?.length>0&&e.add(n)}));p.forEach(0<e.size&&e.size<p.length?(t,n)=>t.empty=!e.has(n):t=>t.empty=!1);for(const t of l)if("exclude"===t.facet){const e=h.get(t);void 0!==e&&(e.facetsIndex=$v(e.facetsIndex))}}for(const e of Wy.keys())ny(t[e])&&"fx"!==e&&"fy"!==e&&f.set(e,[]);const m=new Map;for(const e of l){if(m.has(e))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:n,channels:i}=h.get(e)??{},{data:r,facets:s,channels:a}=e.initialize(n,i,t);pw(a,t),m.set(e,{data:r,facets:s,channels:a})}const y=fv(gw(f,m,t),t),g=function(t,e,n={}){let i=.5-Pg,r=.5+Pg,s=.5+Pg,a=.5-Pg;for(const{marginTop:t,marginRight:n,marginBottom:o,marginLeft:c}of e)t>i&&(i=t),n>r&&(r=n),o>s&&(s=o),c>a&&(a=c);let{margin:o,marginTop:c=(void 0!==o?o:i),marginRight:l=(void 0!==o?o:r),marginBottom:u=(void 0!==o?o:s),marginLeft:h=(void 0!==o?o:a)}=n;c=+c,l=+l,u=+u,h=+h;let{width:f=640,height:d=Nv(t,n,{width:f,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:s,marginLeftDefault:a})+Math.max(0,c-i+u-s)}=n;f=+f,d=+d;const p={width:f,height:d,marginTop:c,marginRight:l,marginBottom:u,marginLeft:h};if(t.fx||t.fy){let{margin:t,marginTop:e=(void 0!==t?t:c),marginRight:i=(void 0!==t?t:l),marginBottom:r=(void 0!==t?t:u),marginLeft:s=(void 0!==t?t:h)}=n.facet??{};e=+e,i=+i,r=+r,s=+s,p.facet={marginTop:e,marginRight:i,marginBottom:r,marginLeft:s}}return p}(y,l,t);!function(t,e){const{x:n,y:i,fx:r,fy:s}=t,a=r||s?mv(e):e;r&&gv(r,a),s&&bv(s,a);const o=r||s?yv(t,e):e;n&&gv(n,o),i&&bv(i,o)}(y,g);const b=dv(y),{fx:v,fy:_}=b,x=v||_?yv(y,g):g,w=v||_?function({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:s,marginLeft:a,width:o,height:c}=mv(n),l=t&&Aw(t),u=e&&Aw(e);return{marginTop:e?u[0]:i,marginRight:t?o-l[1]:r,marginBottom:e?c-u[1]:s,marginLeft:t?l[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:o,height:c}}(b,g):g,S=sb(t),k=S.document,I=be("svg").call(k.documentElement);let A=I;S.ownerSVGElement=I,S.className=c,S.projection=ub(t,x),S.filterFacets=(t,e)=>Yv(p,{channels:e,groups:Dv(t,e)}),S.getMarkState=t=>{const e=m.get(t),n=h.get(t);return{...e,channels:{...e.channels,...n?.channels}}},S.dispatchValue=t=>{A.value!==t&&(A.value=t,A.dispatchEvent(new Event("input",{bubbles:!0})))};const T=new Set;for(const[e,n]of m)if(null!=e.initializer){const i="super"===e.facet?w:x,r=e.initializer(n.data,n.facets,n.channels,b,i,S);if(void 0!==r.data&&(n.data=r.data),void 0!==r.facets&&(n.facets=r.facets),void 0!==r.channels){const{fx:i,fy:s,...a}=r.channels;yw(a),Object.assign(n.channels,a);for(const e of Object.values(a)){const{scale:n}=e;null!=n&&((M=Wy.get(n))!==Py&&M!==qy)&&(mw(e,t),T.add(n))}null==i&&null==s||h.set(e,!0)}}var M;if(T.size){const e=new Map;gw(e,m,t,(t=>T.has(t))),gw(f,m,t,(t=>T.has(t)));const n=function(t,e){for(const n in t){const i=t[n],r=e[n];void 0===i.label&&r&&(i.label=r.label)}return t}(fv(e,t),y),{scales:i,...r}=dv(n);Object.assign(y,n),Object.assign(b,r),Object.assign(b.scales,i)}let E,C;void 0!==p&&(E={x:v?.domain(),y:_?.domain()},p=function(t,{x:e,y:n}){return e&&=Pv(e),n&&=Pv(n),t.filter(e&&n?t=>e.has(t.x)&&n.has(t.y):e?t=>e.has(t.x):t=>n.has(t.y)).sort(e&&n?(t,i)=>e.get(t.x)-e.get(i.x)||n.get(t.y)-n.get(i.y):e?(t,n)=>e.get(t.x)-e.get(n.x):(t,e)=>n.get(t.y)-n.get(e.y))}(p,E),C=function(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:s})=>`translate(${t(r)-i},${e(s)-n})`:t?({x:e})=>`translate(${t(e)-i},0)`:({y:t})=>`translate(0,${e(t)-n})`}(v,_,g));for(const[t,e]of m)e.values=t.scale(e.channels,b,S);const{width:N,height:L}=g;An(I).attr("class",c).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",N).attr("height",L).attr("viewBox",`0 0 ${N} ${L}`).attr("aria-label",a).attr("aria-description",o).call((t=>t.append("style").text(`.${c} {\n  display: block;\n  background: white;\n  height: auto;\n  height: intrinsic;\n  max-width: 100%;\n}\n.${c} text,\n.${c} tspan {\n  white-space: pre;\n}`))).call(ib,n);for(const t of l){const{channels:e,values:n,facets:i}=m.get(t);if(void 0===p||"super"===t.facet){let r=null;if(i&&(r=i[0],r=t.filter(r,e,n),0===r.length))continue;const s=t.render(r,b,n,w,S);if(null==s)continue;I.appendChild(s)}else{let r;for(const s of p){if(!(t.facetAnchor?.(p,E,s)??!s.empty))continue;let a=null;if(i){const r=h.has(t);if(a=i[r?s.i:0],a=t.filter(a,e,n),0===a.length)continue;r||a!==i[0]||(a=ly(a)),a.fx=s.x,a.fy=s.y,a.fi=s.i}const o=t.render(a,b,n,x,S);if(null!=o){(r??=An(I).append("g")).append((()=>o)).datum(s);for(const t of["aria-label","aria-description","aria-hidden","transform"])o.hasAttribute(t)&&(r.attr(t,o.getAttribute(t)),o.removeAttribute(t))}}r?.selectChildren().attr("transform",C)}}const O=function(t,e,n){const i=[];for(const[r,s]of Wx){const a=n[r];if(a?.legend&&r in t){const n=s(t[r],Yx(e,t[r],a),(e=>t[e]));null!=n&&i.push(n)}}return i}(y,S,t),{figure:D=null!=i||null!=r||null!=s||O.length>0}=t;D&&(A=k.createElement("figure"),A.className=`${c}-figure`,A.style.maxWidth="initial",null!=i&&A.append(uw(k,i,"h2")),null!=r&&A.append(uw(k,r,"h3")),A.append(...O,I),null!=s&&A.append(function(t,e){const n=t.createElement("figcaption");return n.append(e),n}(k,s))),A.scale=function(t){return e=>{if(!Wy.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}(b.scales),A.legend=function(t,e,n={}){return(i,r)=>{if(!Wx.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return Wx.get(i)(t[i],Yx(e,n[i],r),(e=>t[e]))}}(y,S,t);const $=function(){const t=Bg;return Bg=0,$g=void 0,t}();return $>0&&An(I).append("text").attr("x",N).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${$.toLocaleString("en-US")} warning${1===$?"":"s"}. Please check the console.`),A}function uw(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function hw(t){return t.flat(1/0).filter((t=>null!=t)).map(fw)}function fw(t){return"function"==typeof t.render?t:new dw(t)}Hv.prototype.plot=function({marks:t=[],...e}={}){return lw({...e,marks:[...t,this]})};class dw extends Hv{constructor(t){if("function"!=typeof t)throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function pw(t,e){for(const n in t)mw(t[n],e);return t}function mw(t,e){const{scale:n,transform:i=!0}=t;if(null==n||!i)return;const{type:r,percent:s,interval:a,transform:o=(s?t=>100*t:yy(a,r))}=e[n]??{};null!=o&&(t.value=Jm(t.value,o),t.transform=!1)}function yw(t){for(const e in t)Sg(e,t[e])}function gw(t,e,n,i=Fm){for(const{channels:r}of e.values())for(const e in r){const s=r[e],{scale:a}=s;if(null!=a&&i(a))if("projection"===a){if(!gb(n)){const e=void 0===n.x?.domain,i=void 0===n.y?.domain;if(e||i){const[n,r]=bb(s);e&&bw(t,"x",n),i&&bw(t,"y",r)}}}else bw(t,a,s)}return t}function bw(t,e,n){const i=t.get(e);void 0!==i?i.push(n):t.set(e,[n])}function vw(t,e,n){if(null===t.facet||"super"===t.facet)return;const{fx:i,fy:r}=t;if(null!=i||null!=r){const e=Xm(t.data??i??r);if(void 0===e)throw new Error(`missing facet data in ${t.ariaLabel}`);if(null===e)return;const s={};return null!=i&&(s.fx=wg(e,{value:i,scale:"fx"})),null!=r&&(s.fy=wg(e,{value:r,scale:"fy"})),pw(s,n),{channels:s,groups:Dv(e,s)}}if(void 0===e)return;const{channels:s,groups:a,data:o}=e;if("auto"!==t.facet||t.data===o)return{channels:s,groups:a};o.length>0&&(a.size>1||1===a.size&&s.fx&&s.fy&&[...a][0][1].size>1)&&Xm(t.data)?.length===o.length&&Fg(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function _w(t,e={}){return Jy({...e,x:null,y:null},((e,n,i,r,s,a)=>a.getMarkState(t)))}function xw(t,e,n,i,r,s,a){if(!e)return;const o=/^\s*both\s*$/i.test(e);a=function(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:s,tickPadding:a,tickFormat:o,tickRotate:c,fontVariant:l,ariaLabel:u,ariaDescription:h,label:f=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:s,tickPadding:a,tickFormat:o,tickRotate:c,fontVariant:l,ariaLabel:u,ariaDescription:h,label:f,labelAnchor:d,labelArrow:p,labelOffset:m}}(o?i:e,s,a);const{line:c}=a;n!==gx&&n!==vx||!c||Oy(c)||t.push(function(t){return new Xx(t)}(function(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:!0===n?void 0:n}}(a))),t.push(n(a)),o&&t.push(n({...a,anchor:r,label:null}))}function ww(t,e,n,i){e&&!Oy(e)&&t.push(n(function(t,{stroke:e=(Cy(t)?t:void 0),ticks:n=(Sw(t)?t:void 0),tickSpacing:i,ariaLabel:r,ariaDescription:s}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:s}}(e,i)))}function Sw(t){switch(typeof t){case"number":return!0;case"string":return!Cy(t)}return wy(t)||"function"==typeof t?.range}function kw(t,e){const n=`${e}-axis `;return t.some((t=>t.ariaLabel?.startsWith(n)))}function Iw(t,e){for(const n of e)for(const e in n.channels){const{scale:i}=n.channels[e];if(i===t||"projection"===i)return!0}return!1}function Aw(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const Tw=new Map([["basis",function(t){return new gp(t)}],["basis-closed",function(t){return new bp(t)}],["basis-open",function(t){return new vp(t)}],["bundle",xp],["bump-x",function(t){return new Rd(t,!0)}],["bump-y",function(t){return new Rd(t,!1)}],["cardinal",kp],["cardinal-closed",Ap],["cardinal-open",Mp],["catmull-rom",Np],["catmull-rom-closed",Op],["catmull-rom-open",$p],["linear",Fd],["linear-closed",function(t){return new Bp(t)}],["monotone-x",function(t){return new Rp(t)}],["monotone-y",function(t){return new jp(t)}],["natural",function(t){return new qp(t)}],["step",function(t){return new Yp(t,.5)}],["step-after",function(t){return new Yp(t,1)}],["step-before",function(t){return new Yp(t,0)}]]);function Mw(t=Ew,e){return"function"!=typeof t&&"auto"===`${t}`.toLowerCase()?Ew:function(t=Fd,e){if("function"==typeof t)return t;const n=Tw.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(void 0!==e){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}(t,e)}function Ew(t){return Fd(t)}function Cw(t={y:"count"},e={}){[t,e]=function({cumulative:t,domain:e,thresholds:n,interval:i,...r},s){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...s}]}(t,e);const{x:n,y:i}=e;return function(t,e,n,i,{data:r=pg,filter:s=bg,sort:a,reverse:o,...c}={},l={}){t=Lw(t),e=Lw(e),c=function(t,e){return function(t,e,n=og){const i=Object.entries(t);return null!=e.title&&void 0===t.title&&i.push(["title",yg]),null!=e.href&&void 0===t.href&&i.push(["href",mg]),i.filter((([,t])=>void 0!==t)).map((([t,i])=>null===i?function(t){return{name:t,initialize(){},scope(){},reduce(){}}}(t):n(t,i,e)))}(t,e,Ow)}(c,l),r=$w(r,$m),a=null==a?void 0:Ow("sort",a,l),s=null==s?void 0:Dw("filter",s,l),null!=n&&ag(c,"x","x1","x2")&&(n=null);null!=i&&ag(c,"y","y1","y2")&&(i=null);const[u,h]=fy(t),[f,d]=fy(t),[p,m]=fy(e),[y,g]=fy(e),[b,v]=null!=n?[n,"x"]:null!=i?[i,"y"]:[],[_,x]=fy(b),{x:w,y:S,z:k,fill:I,stroke:A,x1:T,x2:M,y1:E,y2:C,domain:N,cumulative:L,thresholds:O,interval:D,...$}=l,[B,F]=fy(k),[P]=Hm(I),[V]=Hm(A),[U,R]=fy(P),[j,z]=fy(V);return{..."z"in l&&{z:B||k},..."fill"in l&&{fill:U||I},..."stroke"in l&&{stroke:j||A},...Xy($,((n,i,l)=>{const u=my(Em(n,b),l?.[v]),f=Em(n,k),p=Em(n,P),y=Em(n,V),_=function(t,e){for(const n in e){const i=e[n];if(void 0!==i&&!t.some((t=>t.name===n)))return i}}(c,{z:f,fill:p,stroke:y}),w=[],S=[],I=u&&x([]),A=f&&F([]),T=p&&R([]),M=y&&z([]),E=t&&h([]),C=t&&d([]),N=e&&m([]),L=e&&g([]),O=(D=t?.(n),$=e?.(n),D&&$?function*(t){const e=D.bin(t);for(const[t,[n,i]]of D.entries()){const r=$.bin(e[t]);for(const[t,[e,s]]of $.entries())yield[r[t],{x1:n,y1:e,x2:i,y2:s}]}}:D?function*(t){const e=D.bin(t);for(const[t,[n,i]]of D.entries())yield[e[t],{x1:n,x2:i}]}:function*(t){const e=$.bin(t);for(const[t,[n,i]]of $.entries())yield[e[t],{y1:n,y2:i}]});var D,$;let B=0;for(const t of c)t.initialize(n);a&&a.initialize(n),s&&s.initialize(n);for(const t of i){const e=[];for(const e of c)e.scope("facet",t);a&&a.scope("facet",t),s&&s.scope("facet",t);for(const[i,o]of lg(t,_))for(const[t,l]of lg(o,u))for(const[o,h]of O(l))if(!s||s.reduce(o,h)){e.push(B++),S.push(r.reduceIndex(o,n,h)),u&&I.push(t),f&&A.push(_===f?i:f[(o.length>0?o:l)[0]]),p&&T.push(_===p?i:p[(o.length>0?o:l)[0]]),y&&M.push(_===y?i:y[(o.length>0?o:l)[0]]),E&&(E.push(h.x1),C.push(h.x2)),N&&(N.push(h.y1),L.push(h.y2));for(const t of c)t.reduce(o,h);a&&a.reduce(o)}w.push(e)}return function(t,e,n){if(e){const n=e.output.transform(),i=(t,e)=>Kp(n[t],n[e]);t.forEach((t=>t.sort(i)))}n&&t.forEach((t=>t.reverse()))}(w,a,o),{data:S,facets:w}})),...!ag(c,"x")&&(u?{x1:u,x2:f,x:py(u,f)}:{x:w,x1:T,x2:M}),...!ag(c,"y")&&(p?{y1:p,y2:y,y:py(p,y)}:{y:S,y1:E,y2:C}),..._&&{[v]:_},...Object.fromEntries(c.map((({name:t,output:e})=>[t,e])))}}(function(t,{cumulative:e,domain:n,thresholds:i,interval:r},s){void 0===(t={..._y(t)}).domain&&(t.domain=n);void 0===t.cumulative&&(t.cumulative=e);void 0===t.thresholds&&(t.thresholds=i);void 0===t.interval&&(t.interval=r);void 0===t.value&&(t.value=s);return t.thresholds=function(t,e,n=Fw){if(void 0===t)return void 0===e?n:by(e);if("string"==typeof t){switch(t.toLowerCase()){case"freedman-diaconis":return Ut;case"scott":return Rt;case"sturges":return Ct;case"auto":return Fw}return xm(t)}return t}(t.thresholds,t.interval),t}(n,e,$m),null,null,i,t,b_(e))}function Nw(t={}){return function(t,e,n={}){if(null==n?.interval)return n;const{reduce:i=mg}=n,r={filter:null};return null!=n[e]&&(r[e]=i),null!=n[`${e}1`]&&(r[`${e}1`]=i),null!=n[`${e}2`]&&(r[`${e}2`]=i),t(r,n)}(Cw,"y",Xv(t,"x"))}function Lw(t){if(null==t)return;const{value:e,cumulative:n,domain:i=at,thresholds:r}=t,s=t=>{let s,a=Em(t,e);if(Iy(a)||function(t){return function(t){return vy(t)&&"function"==typeof t?.floor&&t.floor()instanceof Date}(t)||wy(t)&&Iy(t)}(r)){a=Jm(a,Ym,Float64Array);let[t,e]="function"==typeof i?i(a):i,n="function"!=typeof r||vy(r)?r:r(a,t,e);"number"==typeof n&&(n=vu(t,e,n)),vy(n)&&(i===at&&(t=n.floor(t),e=n.offset(n.floor(e))),n=n.range(t,n.offset(e))),s=n}else{a=zm(a);let[t,e]="function"==typeof i?i(a):i,n="function"!=typeof r||vy(r)?r:r(a,t,e);if("number"==typeof n)if(i===at){let i=Mt(t,e,n);if(isFinite(i))if(i>0){let r=Math.round(t/i),s=Math.round(e/i);r*i<=t||--r,s*i>e||++s;let a=s-r+1;n=new Float64Array(a);for(let t=0;t<a;++t)n[t]=(r+t)*i}else if(i<0){i=-i;let r=Math.round(t*i),s=Math.round(e*i);r/i<=t||--r,s/i>e||++s;let a=s-r+1;n=new Float64Array(a);for(let t=0;t<a;++t)n[t]=(r+t)/i}else n=[t];else n=[t]}else n=Tt(t,e,n);else vy(n)&&(i===at&&(t=n.floor(t),e=n.offset(n.floor(e))),n=n.range(t,n.offset(e)));s=n}const o=[];if(1===s.length)o.push([s[0],s[0]]);else for(let t=1;t<s.length;++t)o.push([s[t-1],s[t]]);return o.bin=(n<0?Uw:n>0?Vw:Pw)(o,s,a),o};return s.label=dy(e),s}function Ow(t,e,n){return og(t,e,n,Dw)}function Dw(t,e,n){return cg(t,e,n,$w)}function $w(t,e){return ug(t,e,Bw)}function Bw(t){switch(`${t}`.toLowerCase()){case"x":return jw;case"x1":return qw;case"x2":return Ww;case"y":return zw;case"y1":return Yw;case"y2":return Hw}throw new Error(`invalid bin reduce: ${t}`)}function Fw(t,e,n){return Math.min(200,Rt(t,e,n))}function Pw(t,e,n){return e=zm(e),i=>{const r=t.map((()=>[]));for(const t of i)r[X(e,n[t])-1]?.push(t);return r}}function Vw(t,e,n){const i=Pw(t,e,n);return t=>{const e=i(t);for(let t=1,n=e.length;t<n;++t){const n=e[t-1],i=e[t];for(const t of n)i.push(t)}return e}}function Uw(t,e,n){const i=Pw(t,e,n);return t=>{const e=i(t);for(let t=e.length-2;t>=0;--t){const n=e[t+1],i=e[t];for(const t of n)i.push(t)}return e}}function Rw(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const jw={reduceIndex:(t,e,{x1:n,x2:i})=>Rw(n,i)},zw={reduceIndex:(t,e,{y1:n,y2:i})=>Rw(n,i)},qw={reduceIndex:(t,e,{x1:n})=>n},Ww={reduceIndex:(t,e,{x2:n})=>n},Yw={reduceIndex:(t,e,{y1:n})=>n},Hw={reduceIndex:(t,e,{y2:n})=>n};function Gw(t={},e={}){1===arguments.length&&([t,e]=function(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}(t));const{y1:n,y:i=n,x:r,...s}=e,[a,o,c,l]=function(t,e=Bm,n,i,{offset:r,order:s,reverse:a},o){if(null===e)throw new Error(`stack requires ${i}`);const c=ay(o),[l,u]=fy(t),[h,f]=hy(e),[d,p]=hy(e);return h.hint=d.hint=Qw,r=function(t){if(null==t)return;if("function"==typeof t)return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return Jw;case"center":case"silhouette":return Zw;case"wiggle":return tS}throw new Error(`unknown offset: ${t}`)}(r),s=function(t,e,n){if(void 0===t&&e===tS)return iS(Kp);if(null==t)return;if("string"==typeof t){const e=t.startsWith("-"),i=e?Qp:Kp;switch((e?t.slice(1):t).toLowerCase()){case"value":case n:return function(t){return(e,n,i)=>(e,n)=>t(i[e],i[n])}(i);case"z":return function(t){return(e,n,i,r)=>(e,n)=>t(r[e],r[n])}(i);case"sum":return function(t){return aS(t,((t,e,n,i)=>wt(oy(t),(t=>Gt(t,(t=>n[t]))),(t=>i[t]))))}(i);case"appearance":return function(t){return aS(t,((t,e,n,i)=>wt(oy(t),(t=>e[Ft(t,(t=>n[t]))]),(t=>i[t]))))}(i);case"inside-out":return iS(i)}return rS(Om(t))}if("function"==typeof t)return(1===t.length?rS:sS)(t);if(Array.isArray(t))return i=t,aS(Kp,(()=>i));var i;throw new Error(`invalid order: ${t}`)}(s,r,i),[Xy(o,((i,o,l)=>{({data:i,facets:o}=function(t,e){if(1===e.length)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const t of e)for(const e of t)i[e]&&++r,i[e]=1;if(0===r)return{data:t,facets:e};const s=(t=Zm(t))[Mm]=new Uint32Array(n+r);e=e.map((t=>Zm(t,Uint32Array)));let a=n;i.fill(0);for(const n of e)for(let e=0,r=n.length;e<r;++e){const r=n[e];i[r]?(n[e]=a,t[a]=t[r],s[a]=r,++a):s[r]=r,i[r]=1}return{data:t,facets:e}}(i,o));const h=null==t?void 0:u(my(Em(i,t),l?.[n])),d=Em(i,e,Float64Array),m=Em(i,c),y=s&&s(i,h,d,m),g=i.length,b=f(new Float64Array(g)),v=p(new Float64Array(g)),_=[];for(const t of o){const e=h?Array.from(mt(t,(t=>h[t])).values()):[t];if(y)for(const t of e)t.sort(y);for(const t of e){let e=0,n=0;a&&t.reverse();for(const i of t){const t=d[i];t<0?e=v[i]=(b[i]=e)+t:t>0?n=v[i]=(b[i]=n)+t:v[i]=b[i]=n}}_.push(e)}return r&&r(_,b,v,m),{data:i,facets:o}})),l,h,d]}(i,r,"y","x",t,s);return{...a,y1:n,y:o,x1:c,x2:l,x:py(c,l)}}function Kw({x:t,x1:e,x2:n,...i}={}){return i=Xv(i,"y"),void 0===e&&void 0===n?Gw({x:t,...i}):([e,n]=function(t,e,n,i=$m){return void 0===e&&void 0===n?(e=0,n=void 0===t?i:t):void 0===e?e=void 0===t?0:t:void 0===n&&(n=void 0===t?0:t),[e,n]}(t,e,n),{...i,x1:e,x2:n})}const Qw={length:!0};function Xw(t,e){let n=0,i=0;for(const r of t){const t=e[r];t<n&&(n=t),t>i&&(i=t)}return[n,i]}function Jw(t,e,n){for(const i of t)for(const t of i){const[i,r]=Xw(t,n);for(const s of t){const t=1/(r-i||1);e[s]=t*(e[s]-i),n[s]=t*(n[s]-i)}}}function Zw(t,e,n){for(const i of t){for(const t of i){const[i,r]=Xw(t,n);for(const s of t){const t=(r+i)/2;e[s]-=t,n[s]-=t}}eS(i,e,n)}nS(t,e,n)}function tS(t,e,n,i){for(const r of t){const t=new ct;let s=0;for(const a of r){let r=-1;const o=a.map((t=>Math.abs(n[t]-e[t]))),c=a.map((s=>{r=i?i[s]:++r;const a=n[s]-e[s],o=t.has(r)?a-t.get(r):0;return t.set(r,a),o})),l=[0,...nt(c)];for(const t of a)e[t]+=s,n[t]+=s;const u=Gt(o);u&&(s-=Gt(o,((t,e)=>(c[e]/2+l[e])*t))/u)}eS(r,e,n)}nS(t,e,n)}function eS(t,e,n){const i=Ot(t,(t=>Ot(t,(t=>e[t]))));for(const r of t)for(const t of r)e[t]-=i,n[t]-=i}function nS(t,e,n){const i=t.length;if(1===i)return;const r=t.map((t=>t.flat())),s=r.map((t=>(Ot(t,(t=>e[t]))+Nt(t,(t=>n[t])))/2)),a=Ot(s);for(let t=0;t<i;t++){const i=a-s[t];for(const s of r[t])e[s]+=i,n[s]+=i}}function iS(t){return aS(t,((t,e,n,i)=>{const r=oy(t),s=wt(r,(t=>e[Ft(t,(t=>n[t]))]),(t=>i[t])),a=yt(r,(t=>Gt(t,(t=>n[t]))),(t=>i[t])),o=[],c=[];let l=0;for(const t of s)l<0?(l+=a.get(t),o.push(t)):(l-=a.get(t),c.push(t));return c.reverse().concat(o)}))}function rS(t){return e=>{const n=Em(e,t);return(t,e)=>Kp(n[t],n[e])}}function sS(t){return e=>(n,i)=>t(e[n],e[i])}function aS(t,e){return(n,i,r,s)=>{if(!s)throw new Error("missing channel: z");const a=new ct(e(n,i,r,s).map(((t,e)=>[t,e])));return(e,n)=>t(a.get(s[e]),a.get(s[n]))}}class oS extends Hv{constructor(t,e,n={},i){super(t,e,n,i);const{inset:r=0,insetTop:s=r,insetRight:a=r,insetBottom:o=r,insetLeft:c=r,rx:l,ry:u}=n;this.insetTop=Vm(s),this.insetRight=Vm(a),this.insetBottom=Vm(o),this.insetLeft=Vm(c),this.rx=Zg(l,"auto"),this.ry=Zg(u,"auto")}render(t,e,n,i,r){const{rx:s,ry:a}=this;return ab("svg:g",r).call(Gg,this,i,r).call(this._transform,this,e).call((r=>r.selectAll().data(t).enter().append("rect").call(Kg,this).attr("x",this._x(e,n,i)).attr("width",this._width(e,n,i)).attr("y",this._y(e,n,i)).attr("height",this._height(e,n,i)).call(Xg,"rx",s).call(Xg,"ry",a).call(qg,this,n))).node()}_x(t,{x:e},{marginLeft:n}){const{insetLeft:i}=this;return e?t=>e[t]+i:n+i}_y(t,{y:e},{marginTop:n}){const{insetTop:i}=this;return e?t=>e[t]+i:n+i}_width({x:t},{x:e},{marginRight:n,marginLeft:i,width:r}){const{insetLeft:s,insetRight:a}=this,o=e&&t?t.bandwidth():r-n-i;return Math.max(0,o-s-a)}_height({y:t},{y:e},{marginTop:n,marginBottom:i,height:r}){const{insetTop:s,insetBottom:a}=this,o=e&&t?t.bandwidth():r-n-i;return Math.max(0,o-s-a)}}const cS={ariaLabel:"bar"};class lS extends oS{constructor(t,e={}){const{x1:n,x2:i,y:r}=e;super(t,{x1:{value:n,scale:"x"},x2:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},e,cS)}_transform(t,e,{x:n}){t.call(Jg,e,{x:n},0,0)}_x({x:t},{x1:e,x2:n},{marginLeft:i}){const{insetLeft:r}=this;return Tv(t)?i+r:t=>Math.min(e[t],n[t])+r}_width({x:t},{x1:e,x2:n},{marginRight:i,marginLeft:r,width:s}){const{insetLeft:a,insetRight:o}=this;return Tv(t)?s-i-r-a-o:t=>Math.max(0,Math.abs(n[t]-e[t])-a-o)}}function uS(t,e={}){return function(t){return ty(t)||function({y:t,y1:e,y2:n}){return void 0!==t||void 0!==e||void 0!==n}(t)||void 0!==t.interval}(e)||(e={...e,y:Dm,x2:$m}),new lS(t,Kw(k_(function(t={}){return ty(t)?t:{...t,x:$m}}(e))))}const hS={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class fS extends Hv{constructor(t,e={}){const{x:n,y:i,z:r,curve:s,tension:a}=e;super(t,{x:{value:n,scale:"x"},y:{value:i,scale:"y"},z:{value:ay(e),optional:!0}},e,hS),this.z=r,this.curve=Mw(s,a),c_(this,e)}filter(t){return t}project(t,e,n){this.curve!==Ew&&super.project(t,e,n)}render(t,e,n,i,r){const{x:s,y:a}=n,{curve:o}=this;return ab("svg:g",r).call(Gg,this,i,r).call(Jg,this,e).call((e=>e.selectAll().data(Yg(t,[s,a],this,n)).enter().append("path").call(Kg,this).call(Wg,this,n).call(y_,this,n,r).attr("d",o===Ew&&r.projection?function(t,e,n){const i=Go(t);return e=zm(e),n=zm(n),t=>{let r=[];const s=[r];for(const i of t)-1===i?(r=[],s.push(r)):r.push([e[i],n[i]]);return i({type:"MultiLineString",coordinates:s})}}(r.projection,s,a):Ud().curve(o).defined((t=>t>=0)).x((t=>s[t])).y((t=>a[t]))))).node()}}function dS(t,{x:e=Dm,y:n=$m,...i}={}){return new fS(t,Nw({...i,x:e,y:n}))}function pS(n){let i,r,a,o=[n[2]],c={};for(let t=0;t<o.length;t+=1)c=e(c,o[t]);return{c(){i=h("div"),g(i,c)},m(e,o){var c;l(e,i,o),r||(c=n[1].call(null,i),a=c&&s(c.destroy)?c.destroy:t,r=!0)},p(t,e){g(i,c=function(t,e){const n={},i={},r={$$scope:1};let s=t.length;for(;s--;){const a=t[s],o=e[s];if(o){for(const t in a)t in o||(i[t]=1);for(const t in o)r[t]||(n[t]=o[t],r[t]=1);t[s]=o}else for(const t in a)r[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}(o,[4&e&&t[2]]))},d(t){t&&u(i),r=!1,a()}}}function mS(e){let n,i=e[0],r=pS(e);return{c(){r.c(),n=p()},m(t,e){r.m(t,e),l(t,n,e)},p(t,[e]){1&e&&a(i,i=t[0])?(r.d(1),r=pS(t),r.c(),r.m(n.parentNode,n)):r.p(t,e)},i:t,o:t,d(t){t&&u(n),r.d(t)}}}function yS(t,n,i){const r=["options"];let s=o(n,r),{options:a}=n;return t.$$set=t=>{n=e(e({},n),function(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}(t)),i(2,s=o(n,r)),"options"in t&&i(0,a=t.options)},[a,function(t){t.appendChild(lw(a))},s]}class gS extends q{constructor(t){super(),z(this,t,yS,mS,a,{options:0})}}var bS=Array.isArray;function vS(t){return null!=t?bS(t)?t:[t]:[]}function _S(t){return t<0?`count() + ${t}`:t}class xS{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,e){return this.__derive(this,t,e)}filter(t){return this.__filter(this,t)}slice(t,e){return this.filter(function(t=0,e=1/0){return`${_S(t)} < row_number() && row_number() <= ${_S(e)}`}(t,e)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,e){return this.__relocate(this,vS(t),e)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,e){return this.__sample(this,t,e)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,e){return this.__impute(this,t,e)}fold(t,e){return this.__fold(this,t,e)}pivot(t,e,n){return this.__pivot(this,t,e,n)}spread(t,e){return this.__spread(this,t,e)}unroll(t,e){return this.__unroll(this,t,e)}lookup(t,e,...n){return this.__lookup(this,t,e,n.flat())}join(t,e,n,i){return this.__join(this,t,e,n,i)}join_left(t,e,n,i){const r={...i,left:!0,right:!1};return this.__join(this,t,e,n,r)}join_right(t,e,n,i){const r={...i,left:!1,right:!0};return this.__join(this,t,e,n,r)}join_full(t,e,n,i){const r={...i,left:!0,right:!0};return this.__join(this,t,e,n,r)}cross(t,e,n){return this.__cross(this,t,e,n)}semijoin(t,e){return this.__semijoin(this,t,e)}antijoin(t,e){return this.__antijoin(this,t,e)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function wS(t){throw Error(t)}function SS(t){return"number"==typeof t}function kS(t){return"function"==typeof t}function IS(t,e){const n=Array(t);if(kS(e))for(let i=0;i<t;++i)n[i]=e(i);else n.fill(e);return n}let AS=class extends xS{constructor(t,e,n,i,r,s,a){super(a),this._names=Object.freeze(t),this._data=n,this._total=e,this._nrows=i?i.count():e,this._mask=e!==this._nrows&&i||null,this._group=r||null,this._order=s||null}create(t){wS("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(1!==this.numRows()?"s":"");return`Table: ${this.numCols()+" col"+(1!==this.numCols()?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,e){return this.array(t,e)}array(t,e){wS("Not implemented")}*values(t){const e=this.getter(t),n=this.numRows();for(let t=0;t<n;++t)yield e(t)}get(t,e=0){wS("Not implemented")}getter(t){wS("Not implemented")}objects(t){wS("Not implemented")}object(t){wS("Not implemented")}[Symbol.iterator](){wS("Not implemented")}print(t={}){SS(t)?t={limit:t}:null==t.limit&&(t.limit=10);const e=this.objects({...t,grouped:!1}),n=`${this[Symbol.toStringTag]}. Showing ${e.length} rows.`;return console.log(n),console.table(e),this}indices(t=!0){if(this._index)return this._index;const e=this.numRows(),n=new Uint32Array(e),i=this.isOrdered(),r=this.mask();let s=-1;if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))n[++s]=t;else for(let t=0;t<e;++t)n[++s]=t;if(t&&i){const t=this._order,e=this._data;n.sort(((n,i)=>t(n,i,e)))}return!t&&i||(this._index=n),n}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:e,size:n}=this._group,i=IS(n,(()=>[])),r=this._index,s=this.mask(),a=this.numRows();if(r&&this.isOrdered())for(let t,n=0;n<a;++n)t=r[n],i[e[t]].push(t);else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))i[e[t]].push(t);else for(let t=0;t<a;++t)i[e[t]].push(t);if(t&&!r&&this.isOrdered()){const t=this._order,e=this._data;for(let r=0;r<n;++r)i[r].sort(((n,i)=>t(n,i,e)))}return!t&&this.isOrdered()||(this._partitions=i),i}scan(t,e,n=1/0,i=0){const r=this._mask,s=this._nrows,a=this._data;let o=i||0;if(o>s)return;const c=Math.min(s,o+n),l=()=>o=this._total;if(e&&this.isOrdered()||r&&this._index){const e=this.indices(),n=this._data;for(;o<c;++o)t(e[o],n,l)}else if(r){let e=c-o+1;for(o=r.nth(o);--e&&o>-1;o=r.next(o+1))t(o,a,l)}else for(;o<c;++o)t(o,a,l)}slice(t=0,e=1/0){if(this.isGrouped())return super.slice(t,e);const n=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),e=Math.min(i,Math.max(0,e+(e<0?i:0))),this.scan((t=>n.push(t)),!0,e-t,t),this.reify(n)}reduce(t){return this.__reduce(this,t)}},TS=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},MS=function(t){return t&&kS(t.get)?t:new TS(t)};function ES(t){return t instanceof Date}function CS(t){return t===Object(t)}function NS(t){return t instanceof RegExp}function LS(t){return"string"==typeof t}function OS(t,e){const n=e=>wS(`Illegal argument type: ${e||typeof t}`);return t instanceof Map?DS(t.entries(),e):ES(t)?n("Date"):NS(t)?n("RegExp"):LS(t)?n():bS(t)?function(t,e){const n=t.length,i={},r=t=>i[t]=Array(n);if(n){const i=(e=e||Object.keys(t[0])).map(r),s=i.length;for(let r=0;r<n;++r){const n=t[r];for(let t=0;t<s;++t)i[t][r]=n[e[t]]}}else e&&e.forEach(r);return i}(t,e):kS(t[Symbol.iterator])?function(t,e){const n={},i=t=>n[t]=[];let r,s;for(const n of t){r||(r=(e=e||Object.keys(n)).map(i),s=r.length);for(let t=0;t<s;++t)r[t].push(n[e[t]])}!r&&e&&e.forEach(i);return n}(t,e):CS(t)?DS(Object.entries(t),e):n()}function DS(t,e=["key","value"]){const n=[],i=[];for(const[e,r]of t)n.push(e),i.push(r);const r={};return e[0]&&(r[e[0]]=n),e[1]&&(r[e[1]]=i),r}const{hasOwnProperty:$S}=Object.prototype;function BS(t,e){return $S.call(t,e)}function FS(t){return t?new PS({...t.data()},t.columnNames()):new PS}class PS{constructor(t,e){this.data=t||{},this.names=e||[]}add(t,e){return this.has(t)||this.names.push(t+""),this.data[t]=e}has(t){return BS(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}var VS=void 0;const US=Object.getPrototypeOf(Int8Array);function RS(t){return t instanceof US}function jS(t){return bS(t)||RS(t)}function zS(t){return null!=t&&t==t}const qS=t=>jS(t)||LS(t);var WS={compact:t=>jS(t)?t.filter((t=>zS(t))):t,concat:(...t)=>[].concat(...t),includes:(t,e,n)=>!!qS(t)&&t.includes(e,n),indexof:(t,e)=>qS(t)?t.indexOf(e):-1,join:(t,e)=>jS(t)?t.join(e):VS,lastindexof:(t,e)=>qS(t)?t.lastIndexOf(e):-1,length:t=>qS(t)?t.length:0,pluck:(t,e)=>jS(t)?t.map((t=>zS(t)?t[e]:VS)):VS,reverse:t=>jS(t)?t.slice().reverse():LS(t)?t.split("").reverse().join(""):VS,slice:(t,e,n)=>qS(t)?t.slice(e,n):VS};function YS(t,e,n="0"){const i=t+"",r=i.length;return r<e?Array(e-r+1).join(n)+i:i}const HS=t=>(t<10?"0":"")+t,GS=t=>t<0?"-"+YS(-t,6):t>9999?"+"+YS(t,6):YS(t,4);function KS(t,e,n,i,r,s,a,o,c){const l=o?"Z":"";return GS(t)+"-"+HS(e+1)+"-"+HS(n)+(!c||a?"T"+HS(i)+":"+HS(r)+":"+HS(s)+"."+YS(a,3)+l:s?"T"+HS(i)+":"+HS(r)+":"+HS(s)+l:r||i||!o?"T"+HS(i)+":"+HS(r)+l:"")}function QS(t,e){return isNaN(t)?"Invalid Date":KS(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function XS(t,e){return isNaN(t)?"Invalid Date":KS(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}const JS=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function ZS(t,e=Date.parse){return function(t){return t.match(JS)}(t)?e(t):t}const tk=864e5,ek=6048e5,nk=new Date,ik=new Date,rk=t=>(nk.setTime("string"==typeof t?ZS(t):t),nk);var sk={format_date:(t,e)=>QS(rk(t),!e),format_utcdate:(t,e)=>XS(rk(t),!e),timestamp:t=>+rk(t),year:t=>rk(t).getFullYear(),quarter:t=>Math.floor(rk(t).getMonth()/3),month:t=>rk(t).getMonth(),date:t=>rk(t).getDate(),dayofweek:t=>rk(t).getDay(),hours:t=>rk(t).getHours(),minutes:t=>rk(t).getMinutes(),seconds:t=>rk(t).getSeconds(),milliseconds:t=>rk(t).getMilliseconds(),utcyear:t=>rk(t).getUTCFullYear(),utcquarter:t=>Math.floor(rk(t).getUTCMonth()/3),utcmonth:t=>rk(t).getUTCMonth(),utcdate:t=>rk(t).getUTCDate(),utcdayofweek:t=>rk(t).getUTCDay(),utchours:t=>rk(t).getUTCHours(),utcminutes:t=>rk(t).getUTCMinutes(),utcseconds:t=>rk(t).getUTCSeconds(),utcmilliseconds:t=>rk(t).getUTCMilliseconds(),datetime:function(t,e,n,i,r,s,a){return arguments.length?new Date(t,e||0,null==n?1:n,i||0,r||0,s||0,a||0):new Date(Date.now())},dayofyear:function(t){ik.setTime(+t),ik.setHours(0,0,0,0),nk.setTime(+ik),nk.setMonth(0),nk.setDate(1);const e=6e4*(ik.getTimezoneOffset()-nk.getTimezoneOffset());return Math.floor(1+(ik-nk-e)/tk)},week:function(t,e){const n=e||0;ik.setTime(+t),ik.setDate(ik.getDate()-(ik.getDay()+7-n)%7),ik.setHours(0,0,0,0),nk.setTime(+t),nk.setMonth(0),nk.setDate(1),nk.setDate(1-(nk.getDay()+7-n)%7),nk.setHours(0,0,0,0);const i=6e4*(ik.getTimezoneOffset()-nk.getTimezoneOffset());return Math.floor((ik-nk+1-i)/ek)},utcdatetime:function(t,e,n,i,r,s,a){return arguments.length?new Date(Date.UTC(t,e||0,null==n?1:n,i||0,r||0,s||0,a||0)):new Date(Date.now())},utcdayofyear:function(t){ik.setTime(+t),ik.setUTCHours(0,0,0,0);const e=Date.UTC(ik.getUTCFullYear(),0,1);return Math.floor(1+(ik-e)/tk)},utcweek:function(t,e){const n=e||0;return ik.setTime(+t),ik.setUTCDate(ik.getUTCDate()-(ik.getUTCDay()+7-n)%7),ik.setUTCHours(0,0,0,0),nk.setTime(+t),nk.setUTCMonth(0),nk.setUTCDate(1),nk.setUTCDate(1-(nk.getUTCDay()+7-n)%7),nk.setUTCHours(0,0,0,0),Math.floor((ik-nk+1)/ek)},now:Date.now};function ak(t,e){return null!=t&&null!=e&&t==t&&e==e&&(t===e||(ES(t)||ES(e)?+t==+e:NS(t)&&NS(e)?t+""==e+"":!(!CS(t)||!CS(e))&&function(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return ok(t,e);const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(n.sort(),i.sort(),!ok(n,i,((t,e)=>t===e)))return!1;const r=n.length;for(let i=0;i<r;++i){const r=n[i];if(!ak(t[r],e[r]))return!1}return!0}(t,e)))}function ok(t,e,n=ak){const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;++r)if(!n(t[r],e[r]))return!1;return!0}var ck={parse_json:t=>JSON.parse(t),to_json:t=>JSON.stringify(t)};let lk=Math.random;function uk(){return lk()}function hk(t){return t instanceof Map}function fk(t){return hk(t)||function(t){return t instanceof Set}(t)}function dk(t){return Array.from(t)}var pk={has:(t,e)=>fk(t)?t.has(e):null!=t&&BS(t,e),keys:t=>hk(t)?dk(t.keys()):null!=t?Object.keys(t):[],values:t=>fk(t)?dk(t.values()):null!=t?Object.values(t):[],entries:t=>fk(t)?dk(t.entries()):null!=t?Object.entries(t):[],object:t=>t?Object.fromEntries(t):VS};var mk={parse_date:t=>null==t?t:new Date(t),parse_float:t=>null==t?t:Number.parseFloat(t),parse_int:(t,e)=>null==t?t:Number.parseInt(t,e),endswith:(t,e,n)=>null!=t&&String(t).endsWith(e,n),match:(t,e,n)=>{const i=null==t?t:String(t).match(e);return null==n||null==i?i:"number"==typeof n?i[n]:i.groups?i.groups[n]:null},normalize:(t,e)=>null==t?t:String(t).normalize(e),padend:(t,e,n)=>null==t?t:String(t).padEnd(e,n),padstart:(t,e,n)=>null==t?t:String(t).padStart(e,n),upper:t=>null==t?t:String(t).toUpperCase(),lower:t=>null==t?t:String(t).toLowerCase(),repeat:(t,e)=>null==t?t:String(t).repeat(e),replace:(t,e,n)=>null==t?t:String(t).replace(e,String(n)),substring:(t,e,n)=>null==t?t:String(t).substring(e,n),split:(t,e,n)=>null==t?[]:String(t).split(e,n),startswith:(t,e,n)=>null!=t&&String(t).startsWith(e,n),trim:t=>null==t?t:String(t).trim()},yk={bin:function(t,e,n,i,r){return null==t?null:t<e?-1/0:t>n?1/0:(t=Math.max(e,Math.min(t,n)),e+i*Math.floor(1e-14+(t-e)/i+(r||0)))},equal:ak,recode:function(t,e,n){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(BS(e,t))return e[t];return void 0!==n?n:t},sequence:function(t,e,n){let i=arguments.length;t=+t,e=+e,n=i<2?(e=t,t=0,1):i<3?1:+n,i=0|Math.max(0,Math.ceil((e-t)/n));const r=new Array(i);for(let e=0;e<i;++e)r[e]=t+e*n;return r},...WS,...sk,...ck,...{random:uk,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh},...pk,...mk};function gk(t){return"bigint"==typeof t}function bk(t){return void 0===t?t+"":gk(t)?t+"n":JSON.stringify(t)}function vk(t,e=[],n=[]){return new _k(t,vS(e),vS(n))}let _k=class{constructor(t,e,n){this.name=t,this.fields=e,this.params=n}toString(){const t=[...this.fields.map((t=>`d[${bk(t)}]`)),...this.params.map(bk)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const xk=t=>vk("any",t),wk=()=>vk("count"),Sk=t=>vk("array_agg",t),kk=t=>vk("array_agg_distinct",t),Ik=(t,e)=>vk("map_agg",[t,e]),Ak=(t,e)=>vk("object_agg",[t,e]),Tk=(t,e)=>vk("entries_agg",[t,e]);function Mk(t,e,n,i){const r="map"===i||!0===i?Ik:"entries"===i?Tk:"object"===i?Ak:wS('groups option must be "map", "entries", or "object".'),{names:s}=t.groups(),a=function(t,e){t=fk(t)?t:new Set(t);let n=e,i=0;for(;t.has(n);)n=e+ ++i;return n}(t.columnNames(),"_");let o=t.select().reify(e).create({data:{[a]:n}}).rollup({[a]:Sk(a)});for(let t=s.length;--t>=0;)o=o.groupby(s.slice(0,t)).rollup({[a]:r(s[t],a)});return o.get(a)}const Ek="ArrowFunctionExpression",Ck="FunctionExpression",Nk="Identifier",Lk="Literal",Ok="MemberExpression",Dk="ObjectExpression",$k="ObjectPattern",Bk="Property",Fk="Column",Pk="Constant",Vk="Dictionary",Uk="Parameter",Rk=(t,e)=>{const n=Gk[t.type];return n?n(t,e):wS(`Unsupported expression construct: ${t.type}`)},jk=(t,e)=>"("+Rk(t.left,e)+" "+t.operator+" "+Rk(t.right,e)+")",zk=(t,e)=>"("+Wk(t.params,e)+")=>"+Rk(t.body,e),qk=(t,e)=>Rk(t.callee,e)+"("+Wk(t.arguments,e)+")",Wk=(t,e,n=",")=>t.map((t=>Rk(t,e))).join(n),Yk=t=>t.computed?`[${bk(t.name)}]`:`.${t.name}`,Hk=(t,e,n)=>{const i=t.table||"";return`data${i}${Yk(t)}.${n}(${e.index}${i})`},Gk={Constant:t=>t.raw,Column:(t,e)=>Hk(t,e,"get"),Dictionary:(t,e)=>Hk(t,e,"key"),Function:t=>`fn.${t.name}`,Parameter:t=>`$${Yk(t)}`,Op:(t,e)=>`op(${bk(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:n,expressions:i}=t,r=i.length;let s=n[0].value.raw;for(let t=0;t<r;)s+="${"+Rk(i[t],e)+"}"+n[++t].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const n=!t.computed,i=Rk(t.object,e),r=Rk(t.property,e);return i+(n?"."+r:"["+r+"]")},CallExpression:qk,NewExpression:(t,e)=>"new "+qk(t,e),ArrayExpression:(t,e)=>"["+Wk(t.elements,e)+"]",AssignmentExpression:jk,BinaryExpression:jk,LogicalExpression:jk,UnaryExpression:(t,e)=>"("+t.operator+Rk(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+Rk(t.test,e)+"?"+Rk(t.consequent,e)+":"+Rk(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+Wk(t.properties,e)+"})",Property:(t,e)=>{const n=Rk(t.key,e);return(t.computed?`[${n}]`:n)+":"+Rk(t.value,e)},ArrowFunctionExpression:zk,FunctionExpression:zk,FunctionDeclaration:zk,ArrayPattern:(t,e)=>"["+Wk(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+Wk(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+Wk(t.declarations,e,","),VariableDeclarator:(t,e)=>Rk(t.id,e)+"="+Rk(t.init,e),SpreadElement:(t,e)=>"..."+Rk(t.argument,e),BlockStatement:(t,e)=>"{"+Wk(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>Rk(t.expression,e),IfStatement:(t,e)=>"if ("+Rk(t.test,e)+")"+Rk(t.consequent,e)+(t.alternate?" else "+Rk(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+Rk(t.discriminant,e)+") {"+Wk(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+Rk(t.test,e):"default")+": "+Wk(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+Rk(t.argument,e),Program:(t,e)=>Rk(t.body[0],e)};function Kk(t,e={index:"row"}){return Rk(t,e)}function Qk(t){const e=typeof t;return"string"===e?`"${t}"`:"object"===e&&t?ES(t)?+t:bS(t)||RS(t)?`[${t.map(Qk)}]`:NS(t)?t+"":function(t){let e="{",n=-1;for(const i in t)++n>0&&(e+=","),e+=`"${i}":${Qk(t[i])}`;return e+="}",e}(t):t}function Xk(t,e){const n=t.length;return 1===n?(e,n)=>Qk(t[0](e,n)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const n=t[a](i,r);if(e&&(null==n||n!=n))return null;s+=Qk(n)}return s}}function Jk(){}function Zk(t){return t.init=t.init||Jk,t.add=t.add||Jk,t.rem=t.rem||Jk,t}function tI(t,e){return t.product_v=!1,t.product=e}var eI={count:{create:()=>Zk({value:t=>t.count}),param:[]},array_agg:{create:()=>Zk({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[1]},object_agg:{create:()=>Zk({init:t=>t.values=!0,value:t=>Object.fromEntries(t.list.values())}),param:[2]},map_agg:{create:()=>Zk({init:t=>t.values=!0,value:t=>new Map(t.list.values())}),param:[2]},entries_agg:{create:()=>Zk({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[2]},any:{create:()=>Zk({add:(t,e)=>{null==t.any&&(t.any=e)},value:t=>t.valid?t.any:VS}),param:[1]},valid:{create:()=>Zk({value:t=>t.valid}),param:[1]},invalid:{create:()=>Zk({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=function(){const t=new Map;return{count:()=>t.size,values:()=>Array.from(t.values(),(t=>t.v)),increment(e){const n=Qk(e),i=t.get(n);i?++i.n:t.set(n,{v:e,n:1})},decrement(e){const n=Qk(e),i=t.get(n);1===i.n?t.delete(n):--i.n},forEach(e){t.forEach((({v:t,n:n})=>e(t,n)))}}}(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},array_agg_distinct:{create:()=>Zk({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Zk({value:t=>{let e=VS,n=0;return t.distinct.forEach(((t,i)=>{i>n&&(n=i,e=t)})),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:VS,add:(t,e)=>gk(e)?0===t.sum?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>tI(t,1),value:t=>t.valid?t.product_v?tI(t,function(t,e=0,n=t.length){let i=t[e++];for(let r=e;r<n;++r)i*=t[r];return i}(t.list.values())):t.product:void 0,add:(t,e)=>gk(e)&&1===t.product?t.product=e:t.product*=e,rem:(t,e)=>0==e||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:VS,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>Zk({value:t=>t.valid?t.mean:VS}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):VS,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Zk({value:t=>t.valid>1?t.dev/t.valid:VS}),param:[1],req:["variance"]},stdev:{create:()=>Zk({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):VS}),param:[1],req:["variance"]},stdevp:{create:()=>Zk({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):VS}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=VS,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===VS)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:t=>t.max=VS,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===VS)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:t=>Zk({value:e=>e.list.quantile(t)}),param:[1,1],req:["array_agg"]},median:{create:()=>Zk({value:t=>t.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):VS,add:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=r/t.valid;const s=n-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=r*s,t.cov+=i*s},rem:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?r/t.valid:t.mean_y;const s=n-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=r*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>Zk({value:t=>t.valid>1?t.cov/t.valid:VS}),param:[2],req:["covariance"]},corr:{create:()=>Zk({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):VS}),param:[2],req:["covariance"]},bins:{create:(t,e,n,i)=>Zk({value:r=>function(t,e,n=15,i=!0,r=0,s){const a=Math.LN10;if(null==s){const i=Math.ceil(Math.log(n)/a),o=e-t||Math.abs(t)||1,c=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(o)/a)-i));Math.ceil(o/s)>n;)s*=10;const l=c.length;for(let t=0;t<l;++t){const e=s/c[t];e>=r&&o/e<=n&&(s=e)}}if(i){let n=Math.log(s);const i=n>=0?0:1+~~(-n/a),r=Math.pow(10,-i-1);n=Math.floor(t/s+r)*s,t=t<n?n-s:n,e=Math.ceil(e/s)*s}return[t,e===t?t+s:e,s]}(r.min,r.max,t,e,n,i)}),param:[1,4],req:["min","max"]}};const nI={create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?t=n+1:t}}},param:[]},iI={create(){let t;return{init:()=>t=0,value:e=>{const{index:n,peer:i,size:r}=e;let s=n;if(t<s){for(;s+1<r&&i(s+1);)++s;t=s}return(1+t)/r}}},param:[]};var rI={row_number:{create:()=>({init:Jk,value:t=>t.index+1}),param:[]},rank:nI,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:n=>{const i=n.index;if(i>=t){for(e=t=i+1;n.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=nI.create();return{init:t,value:t=>(e(t)-1)/(t.size-1)}},param:[]},cume_dist:iI,ntile:{create(t){(t=+t)>0||wS("ntile num must be greater than zero.");const{init:e,value:n}=iI.create();return{init:e,value:e=>Math.ceil(t*n(e))}},param:[0,1]},lag:{create:(t,e=VS)=>(t=+t||1,{init:Jk,value:(n,i)=>{const r=n.index-t;return r>=0?n.value(r,i):e}}),param:[1,2]},lead:{create:(t,e=VS)=>(t=+t||1,{init:Jk,value:(n,i)=>{const r=n.index+t;return r<n.size?n.value(r,i):e}}),param:[1,2]},first_value:{create:()=>({init:Jk,value:(t,e)=>t.value(t.i0,e)}),param:[1]},last_value:{create:()=>({init:Jk,value:(t,e)=>t.value(t.i1-1,e)}),param:[1]},nth_value:{create:t=>((t=+t)>0||wS("nth_value nth must be greater than zero."),{init:Jk,value:(e,n)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,n):VS}}),param:[1,1]},fill_down:{create(t=VS){let e;return{init:()=>e=t,value:(t,n)=>{const i=t.value(t.index,n);return zS(i)?e=i:e}}},param:[1,1]},fill_up:{create(t=VS){let e,n;return{init:()=>(e=t,n=-1),value:(i,r)=>i.index<=n?e:(n=function(t,e,n){for(const i=t.size;n<i;++n)if(zS(t.value(n,e)))return n;return-1}(i,r,i.index))>=0?e=i.value(n,r):(n=i.size,e=t)}},param:[1,1]}};function sI(t){return BS(eI,t)}function aI(t){return BS(rI,t)}function oI(t){return BS(yk,t)||"row_object"===t}function cI(t){return sI(t)&&eI[t]}function lI(t){return aI(t)&&rI[t]}function uI(t,e,n){return t=`"use strict"; return ${t};`,Function("fn","$",t)(e,n)}var hI={escape:(t,e,n)=>uI(t,e,n),expr:(t,e)=>uI(`(row,data,op)=>${t}`,yk,e),expr2:(t,e)=>uI(`(row0,data0,row,data)=>${t}`,yk,e),join:(t,e)=>uI(`(row1,data1,row2,data2)=>${t}`,yk,e),param:(t,e)=>uI(t,yk,e)};const fI={"==":1,"!=":1,"===":1,"!==":1};function dI(t,e,n=0,i,r){if(t.type=Fk,t.name=e,t.table=n,r&&i&&kS(i.keyFor)){const e=fI[r.operator]?r.left===t?r.right:r.left:r.callee&&"equal"===r.callee.name?r.arguments[r.arguments[0]===t?1:0]:null;e&&e.type===Lk&&function(t,e,n,i){i<0?(t.type=Lk,t.value=!1,t.raw="false"):(e.type=Vk,n.value=i,n.raw=i+"")}(r,t,e,i.keyFor(e.value))}return t}function pI(t){return bS(t)?t:hk(t)?t.entries():t?Object.entries(t):[]}const mI="row_object";function yI(t,e){t.type=Dk;const n=t.properties=[];for(const t of pI(e)){const[e,i]=bS(t)?t:[t,t];n.push({type:Bk,key:{type:Lk,raw:bk(i)},value:dI({computed:!0},e)})}return t}function gI(t){return Kk(yI({},t))}function bI(t){return hI.expr(gI(t))}function vI(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function o(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}c((i=i.apply(t,e||[])).next())}))}function _I(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xI(t){return this instanceof xI?(this.v=t,this):new xI(t)}function wI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||o(t,e)}))})}function o(t,e){try{(n=r[t](e)).value instanceof xI?Promise.resolve(n.value.v).then(c,l):u(s[0][2],n)}catch(t){u(s[0][3],t)}var n}function c(t){o("next",t)}function l(t){o("throw",t)}function u(t,e){t(e),s.shift(),s.length&&o(s[0][0],s[0][1])}}function SI(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:xI(t[i](e)),done:!1}:r?r(e):e}:r}}function kI(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=_I(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}"function"==typeof SuppressedError&&SuppressedError;const II=new TextDecoder("utf-8"),AI=t=>II.decode(t),TI=new TextEncoder,MI=t=>TI.encode(t),[EI,CI]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[NI,LI]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[OI,DI]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),$I=t=>"function"==typeof t,BI=t=>null!=t&&Object(t)===t,FI=t=>BI(t)&&$I(t.then),PI=t=>BI(t)&&$I(t[Symbol.iterator]),VI=t=>BI(t)&&$I(t[Symbol.asyncIterator]),UI=t=>BI(t)&&"done"in t&&"value"in t,RI=t=>"_getDOMStream"in t&&"_getNodeStream"in t,jI=t=>BI(t)&&$I(t.clear)&&$I(t.bytes)&&$I(t.position)&&$I(t.setPosition)&&$I(t.capacity)&&$I(t.getBufferIdentifier)&&$I(t.createLong),zI="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function qI(t,e,n=0,i=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(a,n),t}function WI(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,i,r,s;for(let a,o,c=0,l=0,u=t.length;++c<u;)a=e[l],o=t[c],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(e[++l]=o):(({byteOffset:n,byteLength:r}=a),({byteOffset:i,byteLength:s}=o),n+r<i||i+s<n?o&&(e[++l]=o):e[l]=new Uint8Array(a.buffer,n,i-n+s));return e}(t),i=n.reduce(((t,e)=>t+e.byteLength),0);let r,s,a,o=0,c=-1;const l=Math.min(e||Number.POSITIVE_INFINITY,i);for(const t=n.length;++c<t;){if(r=n[c],s=r.subarray(0,Math.min(r.length,l-o)),l<=o+s.length){s.length<r.length?n[c]=r.subarray(s.length):s.length===r.length&&c++,a?qI(a,s,o):a=s;break}qI(a||(a=new Uint8Array(l)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(c),i-(a?a.byteLength:0)]}function YI(t,e){let n=UI(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=MI(n)),n instanceof ArrayBuffer||n instanceof zI?new t(n):jI(n)?YI(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const HI=t=>YI(Int32Array,t),GI=t=>YI(Uint8Array,t),KI=t=>(t.next(),t);const QI=t=>function*(t,e){const n=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof zI?n(e):PI(e)?e:n(e);return yield*KI(function*(e){let n=null;do{n=e.next(yield YI(t,n))}while(!n.done)}(i[Symbol.iterator]())),new t}(Uint8Array,t);function XI(t,e){return wI(this,arguments,(function*(){if(FI(e))return yield xI(yield xI(yield*SI(kI(XI(t,yield xI(e))))));const n=function(t){return wI(this,arguments,(function*(){yield yield xI(yield xI(t))}))},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof zI?n(e):PI(e)?function(t){return wI(this,arguments,(function*(){yield xI(yield*SI(kI(KI(function*(t){let e=null;do{e=t.next(yield null==e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):VI(e)?e:n(e);return yield xI(yield*SI(kI(KI(function(e){return wI(this,arguments,(function*(){let n=null;do{n=yield xI(e.next(yield yield xI(YI(t,n))))}while(!n.done)}))}(i[Symbol.asyncIterator]()))))),yield xI(new t)}))}const JI=t=>XI(Uint8Array,t);function ZI(t,e,n){if(0!==t){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}var tA={fromIterable:t=>eA(function*(t){let e,n,i,r,s=!1,a=[],o=0;function c(){return"peek"===i?WI(a,r)[0]:([n,a,o]=WI(a,r),n)}({cmd:i,size:r}=yield null);const l=QI(t)[Symbol.iterator]();try{do{if(({done:e,value:n}=Number.isNaN(r-o)?l.next():l.next(r-o)),!e&&n.byteLength>0&&(a.push(n),o+=n.byteLength),e||r<=o)do{({cmd:i,size:r}=yield c())}while(r<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof l.throw&&l.throw(t)}finally{!1===s&&"function"==typeof l.return&&l.return(null)}return null}(t)),fromAsyncIterable:t=>eA(function(t){return wI(this,arguments,(function*(){let e,n,i,r,s=!1,a=[],o=0;function c(){return"peek"===i?WI(a,r)[0]:([n,a,o]=WI(a,r),n)}({cmd:i,size:r}=yield yield xI(null));const l=JI(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:n}=Number.isNaN(r-o)?yield xI(l.next()):yield xI(l.next(r-o))),!e&&n.byteLength>0&&(a.push(n),o+=n.byteLength),e||r<=o)do{({cmd:i,size:r}=yield yield xI(c()))}while(r<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof l.throw&&(yield xI(l.throw(t)))}finally{!1===s&&"function"==typeof l.return&&(yield xI(l.return(new Uint8Array(0))))}return yield xI(null)}))}(t)),fromDOMStream:t=>eA(function(t){return wI(this,arguments,(function*(){let e,n,i,r=!1,s=!1,a=[],o=0;function c(){return"peek"===n?WI(a,i)[0]:([e,a,o]=WI(a,i),e)}({cmd:n,size:i}=yield yield xI(null));const l=new nA(t);try{do{if(({done:r,value:e}=Number.isNaN(i-o)?yield xI(l.read()):yield xI(l.read(i-o))),!r&&e.byteLength>0&&(a.push(GI(e)),o+=e.byteLength),r||i<=o)do{({cmd:n,size:i}=yield yield xI(c()))}while(i<o)}while(!r)}catch(t){(s=!0)&&(yield xI(l.cancel(t)))}finally{!1===s?yield xI(l.cancel()):t.locked&&l.releaseLock()}return yield xI(null)}))}(t)),fromNodeStream:t=>eA(function(t){return wI(this,arguments,(function*(){const e=[];let n,i,r,s="error",a=!1,o=null,c=0,l=[];function u(){return"peek"===n?WI(l,i)[0]:([r,l,c]=WI(l,i),r)}if(({cmd:n,size:i}=yield yield xI(null)),t.isTTY)return yield yield xI(new Uint8Array(0)),yield xI(null);try{e[0]=iA(t,"end"),e[1]=iA(t,"error");do{if(e[2]=iA(t,"readable"),[s,o]=yield xI(Promise.race(e.map((t=>t[2])))),"error"===s)break;if((a="end"===s)||(Number.isFinite(i-c)?(r=GI(t.read(i-c)),r.byteLength<i-c&&(r=GI(t.read()))):r=GI(t.read()),r.byteLength>0&&(l.push(r),c+=r.byteLength)),a||i<=c)do{({cmd:n,size:i}=yield yield xI(u()))}while(i<c)}while(!a)}finally{yield xI(h(e,"error"===s?o:null))}return yield xI(null);function h(e,n){return r=l=null,new Promise(((i,r)=>{for(const[n,i]of e)t.off(n,i);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(t){n=t||n}finally{null!=n?r(n):i()}}))}}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}};const eA=t=>(t.next(),t);class nA{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return vI(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return vI(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=GI(e)),e}))}}const iA=(t,e)=>{const n=t=>i([e,t]);let i;return[e,n,new Promise((r=>(i=r)&&t.once(e,n)))]};var rA,sA,aA,oA,cA,lA,uA,hA,fA;!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(rA||(rA={})),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(sA||(sA={})),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(aA||(aA={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(oA||(oA={})),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(cA||(cA={})),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(lA||(lA={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(uA||(uA={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(hA||(hA={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(fA||(fA={}));const dA=void 0;function pA(t){if(null===t)return"null";if(t===dA)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof NI||t instanceof OI?`[${[...t].map((t=>pA(t)))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,((t,e)=>"bigint"==typeof e?`${e}`:e))}const mA=Symbol.for("isArrowBigNum");function yA(t,...e){return 0===e.length?Object.setPrototypeOf(YI(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function gA(...t){return yA.apply(this,t)}function bA(...t){return yA.apply(this,t)}function vA(...t){return yA.apply(this,t)}function _A(t){const{buffer:e,byteOffset:n,length:i,signed:r}=t,s=new OI(e,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let o=a?BigInt(1):BigInt(0),c=BigInt(0);if(a){for(const t of s)o+=~t*(BigInt(1)<<BigInt(32)*c++);o*=BigInt(-1)}else for(const t of s)o+=t*(BigInt(1)<<BigInt(32)*c++);return o}let xA,wA;function SA(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return null!=e?e:"0"}yA.prototype[mA]=!0,yA.prototype.toJSON=function(){return`"${xA(this)}"`},yA.prototype.valueOf=function(){return _A(this)},yA.prototype.toString=function(){return xA(this)},yA.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return _A(this);case"string":return xA(this);case"default":return wA(this)}return xA(this)},Object.setPrototypeOf(gA.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(bA.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(vA.prototype,Object.create(Uint32Array.prototype)),Object.assign(gA.prototype,yA.prototype,{constructor:gA,signed:!0,TypedArray:Int32Array,BigIntArray:NI}),Object.assign(bA.prototype,yA.prototype,{constructor:bA,signed:!1,TypedArray:Uint32Array,BigIntArray:OI}),Object.assign(vA.prototype,yA.prototype,{constructor:vA,signed:!0,TypedArray:Uint32Array,BigIntArray:OI}),CI?(wA=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:SA(t),xA=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:SA(t)):(xA=SA,wA=xA);class kA{static new(t,e){switch(e){case!0:return new gA(t);case!1:return new bA(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case NI:return new gA(t)}return 16===t.byteLength?new vA(t):new bA(t)}static signed(t){return new gA(t)}static unsigned(t){return new bA(t)}static decimal(t){return new vA(t)}constructor(t,e){return kA.new(t,e)}}var IA,AA,TA,MA,EA,CA,NA,LA,OA,DA,$A,BA,FA,PA,VA,UA,RA,jA,zA,qA;class WA{static isNull(t){return(null==t?void 0:t.typeId)===hA.Null}static isInt(t){return(null==t?void 0:t.typeId)===hA.Int}static isFloat(t){return(null==t?void 0:t.typeId)===hA.Float}static isBinary(t){return(null==t?void 0:t.typeId)===hA.Binary}static isUtf8(t){return(null==t?void 0:t.typeId)===hA.Utf8}static isBool(t){return(null==t?void 0:t.typeId)===hA.Bool}static isDecimal(t){return(null==t?void 0:t.typeId)===hA.Decimal}static isDate(t){return(null==t?void 0:t.typeId)===hA.Date}static isTime(t){return(null==t?void 0:t.typeId)===hA.Time}static isTimestamp(t){return(null==t?void 0:t.typeId)===hA.Timestamp}static isInterval(t){return(null==t?void 0:t.typeId)===hA.Interval}static isList(t){return(null==t?void 0:t.typeId)===hA.List}static isStruct(t){return(null==t?void 0:t.typeId)===hA.Struct}static isUnion(t){return(null==t?void 0:t.typeId)===hA.Union}static isFixedSizeBinary(t){return(null==t?void 0:t.typeId)===hA.FixedSizeBinary}static isFixedSizeList(t){return(null==t?void 0:t.typeId)===hA.FixedSizeList}static isMap(t){return(null==t?void 0:t.typeId)===hA.Map}static isDictionary(t){return(null==t?void 0:t.typeId)===hA.Dictionary}static isDenseUnion(t){return WA.isUnion(t)&&t.mode===sA.Dense}static isSparseUnion(t){return WA.isUnion(t)&&t.mode===sA.Sparse}get typeId(){return hA.NONE}}IA=Symbol.toStringTag,WA[IA]=((qA=WA.prototype).children=null,qA.ArrayType=Array,qA[Symbol.toStringTag]="DataType");let YA=class extends WA{toString(){return"Null"}get typeId(){return hA.Null}};AA=Symbol.toStringTag,YA[AA]=YA.prototype[Symbol.toStringTag]="Null";class HA extends WA{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return hA.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?NI:OI}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}TA=Symbol.toStringTag,HA[TA]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(HA.prototype);class GA extends HA{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class KA extends HA{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class QA extends HA{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class XA extends HA{constructor(){super(!0,64)}get ArrayType(){return NI}}class JA extends HA{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class ZA extends HA{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class tT extends HA{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class eT extends HA{constructor(){super(!1,64)}get ArrayType(){return OI}}Object.defineProperty(GA.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(KA.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(QA.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(XA.prototype,"ArrayType",{value:NI}),Object.defineProperty(JA.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(ZA.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(tT.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(eT.prototype,"ArrayType",{value:OI});class nT extends WA{constructor(t){super(),this.precision=t}get typeId(){return hA.Float}get ArrayType(){switch(this.precision){case aA.HALF:return Uint16Array;case aA.SINGLE:return Float32Array;case aA.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}MA=Symbol.toStringTag,nT[MA]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(nT.prototype);class iT extends nT{constructor(){super(aA.HALF)}}class rT extends nT{constructor(){super(aA.SINGLE)}}class sT extends nT{constructor(){super(aA.DOUBLE)}}Object.defineProperty(iT.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(rT.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(sT.prototype,"ArrayType",{value:Float64Array});let aT=class extends WA{constructor(){super()}get typeId(){return hA.Binary}toString(){return"Binary"}};EA=Symbol.toStringTag,aT[EA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(aT.prototype);let oT=class extends WA{constructor(){super()}get typeId(){return hA.Utf8}toString(){return"Utf8"}};CA=Symbol.toStringTag,oT[CA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(oT.prototype);let cT=class extends WA{constructor(){super()}get typeId(){return hA.Bool}toString(){return"Bool"}};NA=Symbol.toStringTag,cT[NA]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(cT.prototype);let lT=class extends WA{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return hA.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};LA=Symbol.toStringTag,lT[LA]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(lT.prototype);class uT extends WA{constructor(t){super(),this.unit=t}get typeId(){return hA.Date}toString(){return`Date${32*(this.unit+1)}<${oA[this.unit]}>`}}OA=Symbol.toStringTag,uT[OA]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(uT.prototype);class hT extends uT{constructor(){super(oA.DAY)}}class fT extends uT{constructor(){super(oA.MILLISECOND)}}class dT extends WA{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return hA.Time}toString(){return`Time${this.bitWidth}<${cA[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return NI}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}DA=Symbol.toStringTag,dT[DA]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(dT.prototype);class pT extends dT{constructor(){super(cA.SECOND,32)}}class mT extends dT{constructor(){super(cA.MILLISECOND,32)}}class yT extends dT{constructor(){super(cA.MICROSECOND,64)}}class gT extends dT{constructor(){super(cA.NANOSECOND,64)}}class bT extends WA{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return hA.Timestamp}toString(){return`Timestamp<${cA[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}$A=Symbol.toStringTag,bT[$A]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(bT.prototype);class vT extends WA{constructor(t){super(),this.unit=t}get typeId(){return hA.Interval}toString(){return`Interval<${lA[this.unit]}>`}}BA=Symbol.toStringTag,vT[BA]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(vT.prototype);class _T extends vT{constructor(){super(lA.DAY_TIME)}}class xT extends vT{constructor(){super(lA.YEAR_MONTH)}}let wT=class extends WA{constructor(t){super(),this.children=[t]}get typeId(){return hA.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};FA=Symbol.toStringTag,wT[FA]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(wT.prototype);class ST extends WA{constructor(t){super(),this.children=t}get typeId(){return hA.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}PA=Symbol.toStringTag,ST[PA]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(ST.prototype);class kT extends WA{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return hA.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}VA=Symbol.toStringTag,kT[VA]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(kT.prototype);let IT=class extends WA{constructor(t){super(),this.byteWidth=t}get typeId(){return hA.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};UA=Symbol.toStringTag,IT[UA]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(IT.prototype);let AT=class extends WA{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return hA.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};RA=Symbol.toStringTag,AT[RA]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(AT.prototype);class TT extends WA{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return hA.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}jA=Symbol.toStringTag,TT[jA]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(TT.prototype);const MT=(ET=-1,()=>++ET);var ET;class CT extends WA{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?MT():"number"==typeof n?n:n.low}get typeId(){return hA.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function NT(t){const e=t;switch(t.typeId){case hA.Decimal:return t.bitWidth/32;case hA.Timestamp:return 2;case hA.Date:case hA.Interval:return 1+e.unit;case hA.FixedSizeList:return e.listSize;case hA.FixedSizeBinary:return e.byteWidth;default:return 1}}zA=Symbol.toStringTag,CT[zA]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(CT.prototype);class LT{visitMany(t,...e){return t.map(((t,n)=>this.visit(t,...e.map((t=>t[n])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,n=!0){if("number"==typeof e)return OT(t,e,n);if("string"==typeof e&&e in hA)return OT(t,hA[e],n);if(e&&e instanceof WA)return OT(t,DT(e),n);if((null==e?void 0:e.type)&&e.type instanceof WA)return OT(t,DT(e.type),n);return OT(t,hA.NONE,n)}(this,t,e)}getVisitFnByTypeId(t,e=!0){return OT(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function OT(t,e,n=!0){let i=null;switch(e){case hA.Null:i=t.visitNull;break;case hA.Bool:i=t.visitBool;break;case hA.Int:i=t.visitInt;break;case hA.Int8:i=t.visitInt8||t.visitInt;break;case hA.Int16:i=t.visitInt16||t.visitInt;break;case hA.Int32:i=t.visitInt32||t.visitInt;break;case hA.Int64:i=t.visitInt64||t.visitInt;break;case hA.Uint8:i=t.visitUint8||t.visitInt;break;case hA.Uint16:i=t.visitUint16||t.visitInt;break;case hA.Uint32:i=t.visitUint32||t.visitInt;break;case hA.Uint64:i=t.visitUint64||t.visitInt;break;case hA.Float:i=t.visitFloat;break;case hA.Float16:i=t.visitFloat16||t.visitFloat;break;case hA.Float32:i=t.visitFloat32||t.visitFloat;break;case hA.Float64:i=t.visitFloat64||t.visitFloat;break;case hA.Utf8:i=t.visitUtf8;break;case hA.Binary:i=t.visitBinary;break;case hA.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case hA.Date:i=t.visitDate;break;case hA.DateDay:i=t.visitDateDay||t.visitDate;break;case hA.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case hA.Timestamp:i=t.visitTimestamp;break;case hA.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case hA.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case hA.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case hA.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case hA.Time:i=t.visitTime;break;case hA.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case hA.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case hA.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case hA.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case hA.Decimal:i=t.visitDecimal;break;case hA.List:i=t.visitList;break;case hA.Struct:i=t.visitStruct;break;case hA.Union:i=t.visitUnion;break;case hA.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case hA.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case hA.Dictionary:i=t.visitDictionary;break;case hA.Interval:i=t.visitInterval;break;case hA.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case hA.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case hA.FixedSizeList:i=t.visitFixedSizeList;break;case hA.Map:i=t.visitMap}if("function"==typeof i)return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${hA[e]}'`)}function DT(t){switch(t.typeId){case hA.Null:return hA.Null;case hA.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?hA.Int8:hA.Uint8;case 16:return n?hA.Int16:hA.Uint16;case 32:return n?hA.Int32:hA.Uint32;case 64:return n?hA.Int64:hA.Uint64}return hA.Int}case hA.Float:switch(t.precision){case aA.HALF:return hA.Float16;case aA.SINGLE:return hA.Float32;case aA.DOUBLE:return hA.Float64}return hA.Float;case hA.Binary:return hA.Binary;case hA.Utf8:return hA.Utf8;case hA.Bool:return hA.Bool;case hA.Decimal:return hA.Decimal;case hA.Time:switch(t.unit){case cA.SECOND:return hA.TimeSecond;case cA.MILLISECOND:return hA.TimeMillisecond;case cA.MICROSECOND:return hA.TimeMicrosecond;case cA.NANOSECOND:return hA.TimeNanosecond}return hA.Time;case hA.Timestamp:switch(t.unit){case cA.SECOND:return hA.TimestampSecond;case cA.MILLISECOND:return hA.TimestampMillisecond;case cA.MICROSECOND:return hA.TimestampMicrosecond;case cA.NANOSECOND:return hA.TimestampNanosecond}return hA.Timestamp;case hA.Date:switch(t.unit){case oA.DAY:return hA.DateDay;case oA.MILLISECOND:return hA.DateMillisecond}return hA.Date;case hA.Interval:switch(t.unit){case lA.DAY_TIME:return hA.IntervalDayTime;case lA.YEAR_MONTH:return hA.IntervalYearMonth}return hA.Interval;case hA.Map:return hA.Map;case hA.List:return hA.List;case hA.Struct:return hA.Struct;case hA.Union:switch(t.mode){case sA.Dense:return hA.DenseUnion;case sA.Sparse:return hA.SparseUnion}return hA.Union;case hA.FixedSizeBinary:return hA.FixedSizeBinary;case hA.FixedSizeList:return hA.FixedSizeList;case hA.Dictionary:return hA.Dictionary}throw new Error(`Unrecognized type '${hA[t.typeId]}'`)}LT.prototype.visitInt8=null,LT.prototype.visitInt16=null,LT.prototype.visitInt32=null,LT.prototype.visitInt64=null,LT.prototype.visitUint8=null,LT.prototype.visitUint16=null,LT.prototype.visitUint32=null,LT.prototype.visitUint64=null,LT.prototype.visitFloat16=null,LT.prototype.visitFloat32=null,LT.prototype.visitFloat64=null,LT.prototype.visitDateDay=null,LT.prototype.visitDateMillisecond=null,LT.prototype.visitTimestampSecond=null,LT.prototype.visitTimestampMillisecond=null,LT.prototype.visitTimestampMicrosecond=null,LT.prototype.visitTimestampNanosecond=null,LT.prototype.visitTimeSecond=null,LT.prototype.visitTimeMillisecond=null,LT.prototype.visitTimeMicrosecond=null,LT.prototype.visitTimeNanosecond=null,LT.prototype.visitDenseUnion=null,LT.prototype.visitSparseUnion=null,LT.prototype.visitIntervalDayTime=null,LT.prototype.visitIntervalYearMonth=null;const $T=new Float64Array(1),BT=new Uint32Array($T.buffer);function FT(t){const e=(31744&t)>>10,n=(1023&t)/1024,i=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function PT(t){if(t!=t)return 32256;$T[0]=t;const e=(2147483648&BT[1])>>16&65535;let n=2146435072&BT[1],i=0;return n>=1089470464?BT[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&BT[1])>>10):n<=1056964608?(i=1048576+(1048575&BT[1]),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&BT[1])>>10),e|n|65535&i}class VT extends LT{}function UT(t){return(e,n,i)=>{if(e.setValid(n,null!=i))return t(e,n,i)}}const RT=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},jT=(t,e,n,i)=>{if(n+1<e.length){const{[n]:r,[n+1]:s}=e;t.set(i.subarray(0,s-r),r)}},zT=({values:t},e,n)=>{t[e]=n},qT=({values:t},e,n)=>{t[e]=n},WT=({values:t},e,n)=>{t[e]=PT(n)},YT=({values:t},e,n)=>{((t,e,n)=>{t[e]=Math.trunc(n/864e5)})(t,e,n.valueOf())},HT=({values:t},e,n)=>{RT(t,2*e,n.valueOf())},GT=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},KT=(t,e,n)=>{t.type.unit===oA.DAY?YT(t,e,n):HT(t,e,n)},QT=({values:t},e,n)=>RT(t,2*e,n/1e3),XT=({values:t},e,n)=>RT(t,2*e,n),JT=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e3*n%4294967296),t[e+1]=Math.trunc(1e3*n/4294967296)})(t,2*e,n),ZT=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e6*n%4294967296),t[e+1]=Math.trunc(1e6*n/4294967296)})(t,2*e,n),tM=(t,e,n)=>{switch(t.type.unit){case cA.SECOND:return QT(t,e,n);case cA.MILLISECOND:return XT(t,e,n);case cA.MICROSECOND:return JT(t,e,n);case cA.NANOSECOND:return ZT(t,e,n)}},eM=({values:t},e,n)=>{t[e]=n},nM=({values:t},e,n)=>{t[e]=n},iM=({values:t},e,n)=>{t[e]=n},rM=({values:t},e,n)=>{t[e]=n},sM=(t,e,n)=>{switch(t.type.unit){case cA.SECOND:return eM(t,e,n);case cA.MILLISECOND:return nM(t,e,n);case cA.MICROSECOND:return iM(t,e,n);case cA.NANOSECOND:return rM(t,e,n)}},aM=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},oM=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];fM.visit(r,t.valueOffsets[e],n)},cM=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];fM.visit(r,e,n)},lM=(t,e,n)=>{t.type.unit===lA.DAY_TIME?uM(t,e,n):hM(t,e,n)},uM=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},hM=({values:t},e,n)=>{t[e]=12*n[0]+n[1]%12};VT.prototype.visitBool=UT((({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)})),VT.prototype.visitInt=UT(zT),VT.prototype.visitInt8=UT(zT),VT.prototype.visitInt16=UT(zT),VT.prototype.visitInt32=UT(zT),VT.prototype.visitInt64=UT(zT),VT.prototype.visitUint8=UT(zT),VT.prototype.visitUint16=UT(zT),VT.prototype.visitUint32=UT(zT),VT.prototype.visitUint64=UT(zT),VT.prototype.visitFloat=UT(((t,e,n)=>{switch(t.type.precision){case aA.HALF:return WT(t,e,n);case aA.SINGLE:case aA.DOUBLE:return qT(t,e,n)}})),VT.prototype.visitFloat16=UT(WT),VT.prototype.visitFloat32=UT(qT),VT.prototype.visitFloat64=UT(qT),VT.prototype.visitUtf8=UT((({values:t,valueOffsets:e},n,i)=>{jT(t,e,n,MI(i))})),VT.prototype.visitBinary=UT((({values:t,valueOffsets:e},n,i)=>jT(t,e,n,i))),VT.prototype.visitFixedSizeBinary=UT(GT),VT.prototype.visitDate=UT(KT),VT.prototype.visitDateDay=UT(YT),VT.prototype.visitDateMillisecond=UT(HT),VT.prototype.visitTimestamp=UT(tM),VT.prototype.visitTimestampSecond=UT(QT),VT.prototype.visitTimestampMillisecond=UT(XT),VT.prototype.visitTimestampMicrosecond=UT(JT),VT.prototype.visitTimestampNanosecond=UT(ZT),VT.prototype.visitTime=UT(sM),VT.prototype.visitTimeSecond=UT(eM),VT.prototype.visitTimeMillisecond=UT(nM),VT.prototype.visitTimeMicrosecond=UT(iM),VT.prototype.visitTimeNanosecond=UT(rM),VT.prototype.visitDecimal=UT(aM),VT.prototype.visitList=UT(((t,e,n)=>{const i=t.children[0],r=t.valueOffsets,s=fM.getVisitFn(i);if(Array.isArray(n))for(let t=-1,a=r[e],o=r[e+1];a<o;)s(i,a++,n[++t]);else for(let t=-1,a=r[e],o=r[e+1];a<o;)s(i,a++,n.get(++t))})),VT.prototype.visitStruct=UT(((t,e,n)=>{const i=t.type.children.map((t=>fM.getVisitFn(t.type))),r=n instanceof Map?(s=e,a=n,(t,e,n,i)=>e&&t(e,s,a.get(n.name))):n instanceof LE?((t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(s)))(e,n):Array.isArray(n)?((t,e)=>(n,i,r,s)=>i&&n(i,t,e[s]))(e,n):((t,e)=>(n,i,r,s)=>i&&n(i,t,e[r.name]))(e,n);var s,a;t.type.children.forEach(((e,n)=>r(i[n],t.children[n],e,n)))})),VT.prototype.visitUnion=UT(((t,e,n)=>{t.type.mode===sA.Dense?oM(t,e,n):cM(t,e,n)})),VT.prototype.visitDenseUnion=UT(oM),VT.prototype.visitSparseUnion=UT(cM),VT.prototype.visitDictionary=UT(((t,e,n)=>{var i;null===(i=t.dictionary)||void 0===i||i.set(t.values[e],n)})),VT.prototype.visitInterval=UT(lM),VT.prototype.visitIntervalDayTime=UT(uM),VT.prototype.visitIntervalYearMonth=UT(hM),VT.prototype.visitFixedSizeList=UT(((t,e,n)=>{const{stride:i}=t,r=t.children[0],s=fM.getVisitFn(r);if(Array.isArray(n))for(let t=-1,a=e*i;++t<i;)s(r,a+t,n[t]);else for(let t=-1,a=e*i;++t<i;)s(r,a+t,n.get(t))})),VT.prototype.visitMap=UT(((t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,s=fM.getVisitFn(i);let{[e]:a,[e+1]:o}=r;const c=n instanceof Map?n.entries():Object.entries(n);for(const t of c)if(s(i,a,t),++a>=o)break}));const fM=new VT,dM=Symbol.for("parent"),pM=Symbol.for("rowIndex");class mM{constructor(t,e){return this[dM]=t,this[pM]=e,new Proxy(this,new gM)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[pM],e=this[dM],n=e.type.children,i={};for(let r=-1,s=n.length;++r<s;)i[n[r].name]=VM.visit(e.children[r],t);return i}toString(){return`{${[...this].map((([t,e])=>`${pA(t)}: ${pA(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new yM(this[dM],this[pM])}}class yM{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,VM.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(mM.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[dM]:{writable:!0,enumerable:!1,configurable:!1,value:null},[pM]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class gM{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[dM].type.children.map((t=>t.name))}has(t,e){return-1!==t[dM].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[dM].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[dM].type.children.findIndex((t=>t.name===e));if(-1!==n){const i=VM.visit(t[dM].children[n],t[pM]);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[dM].type.children.findIndex((t=>t.name===e));return-1!==i?(fM.visit(t[dM].children[i],t[pM],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!=typeof e)&&Reflect.set(t,e,n)}}class bM extends LT{}function vM(t){return(e,n)=>e.getValid(n)?t(e,n):null}const _M=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),xM=t=>new Date(t),wM=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],r=e[n+1];return t.subarray(i,r)},SM=({values:t},e)=>((t,e)=>xM(((t,e)=>864e5*t[e])(t,e)))(t,e),kM=({values:t},e)=>((t,e)=>xM(_M(t,e)))(t,2*e),IM=({stride:t,values:e},n)=>e[t*n],AM=({values:t},e)=>t[e],TM=({values:t},e)=>1e3*_M(t,2*e),MM=({values:t},e)=>_M(t,2*e),EM=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),CM=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),NM=({values:t},e)=>t[e],LM=({values:t},e)=>t[e],OM=({values:t},e)=>t[e],DM=({values:t},e)=>t[e],$M=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return VM.visit(i,t.valueOffsets[e])},BM=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return VM.visit(i,e)},FM=({values:t},e)=>t.subarray(2*e,2*(e+1)),PM=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i};bM.prototype.visitNull=vM(((t,e)=>null)),bM.prototype.visitBool=vM((({offset:t,values:e},n)=>{const i=t+n;return 0!=(e[i>>3]&1<<i%8)})),bM.prototype.visitInt=vM((({values:t},e)=>t[e])),bM.prototype.visitInt8=vM(IM),bM.prototype.visitInt16=vM(IM),bM.prototype.visitInt32=vM(IM),bM.prototype.visitInt64=vM(AM),bM.prototype.visitUint8=vM(IM),bM.prototype.visitUint16=vM(IM),bM.prototype.visitUint32=vM(IM),bM.prototype.visitUint64=vM(AM),bM.prototype.visitFloat=vM((({type:t,values:e},n)=>t.precision!==aA.HALF?e[n]:FT(e[n]))),bM.prototype.visitFloat16=vM((({stride:t,values:e},n)=>FT(e[t*n]))),bM.prototype.visitFloat32=vM(IM),bM.prototype.visitFloat64=vM(IM),bM.prototype.visitUtf8=vM((({values:t,valueOffsets:e},n)=>{const i=wM(t,e,n);return null!==i?AI(i):null})),bM.prototype.visitBinary=vM((({values:t,valueOffsets:e},n)=>wM(t,e,n))),bM.prototype.visitFixedSizeBinary=vM((({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)))),bM.prototype.visitDate=vM(((t,e)=>t.type.unit===oA.DAY?SM(t,e):kM(t,e))),bM.prototype.visitDateDay=vM(SM),bM.prototype.visitDateMillisecond=vM(kM),bM.prototype.visitTimestamp=vM(((t,e)=>{switch(t.type.unit){case cA.SECOND:return TM(t,e);case cA.MILLISECOND:return MM(t,e);case cA.MICROSECOND:return EM(t,e);case cA.NANOSECOND:return CM(t,e)}})),bM.prototype.visitTimestampSecond=vM(TM),bM.prototype.visitTimestampMillisecond=vM(MM),bM.prototype.visitTimestampMicrosecond=vM(EM),bM.prototype.visitTimestampNanosecond=vM(CM),bM.prototype.visitTime=vM(((t,e)=>{switch(t.type.unit){case cA.SECOND:return NM(t,e);case cA.MILLISECOND:return LM(t,e);case cA.MICROSECOND:return OM(t,e);case cA.NANOSECOND:return DM(t,e)}})),bM.prototype.visitTimeSecond=vM(NM),bM.prototype.visitTimeMillisecond=vM(LM),bM.prototype.visitTimeMicrosecond=vM(OM),bM.prototype.visitTimeNanosecond=vM(DM),bM.prototype.visitDecimal=vM((({values:t,stride:e},n)=>kA.decimal(t.subarray(e*n,e*(n+1))))),bM.prototype.visitList=vM(((t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:s,[e*i+1]:a}=n,o=r[0].slice(s,a-s);return new LE([o])})),bM.prototype.visitStruct=vM(((t,e)=>new mM(t,e))),bM.prototype.visitUnion=vM(((t,e)=>t.type.mode===sA.Dense?$M(t,e):BM(t,e))),bM.prototype.visitDenseUnion=vM($M),bM.prototype.visitSparseUnion=vM(BM),bM.prototype.visitDictionary=vM(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),bM.prototype.visitInterval=vM(((t,e)=>t.type.unit===lA.DAY_TIME?FM(t,e):PM(t,e))),bM.prototype.visitIntervalDayTime=vM(FM),bM.prototype.visitIntervalYearMonth=vM(PM),bM.prototype.visitFixedSizeList=vM(((t,e)=>{const{stride:n,children:i}=t,r=i[0].slice(e*n,n);return new LE([r])})),bM.prototype.visitMap=vM(((t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:s}=n,a=i[0];return new jM(a.slice(r,s-r))}));const VM=new bM,UM=Symbol.for("keys"),RM=Symbol.for("vals");class jM{constructor(t){return this[UM]=new LE([t.children[0]]).memoize(),this[RM]=t.children[1],new Proxy(this,new qM)}[Symbol.iterator](){return new zM(this[UM],this[RM])}get size(){return this[UM].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[UM],e=this[RM],n={};for(let i=-1,r=t.length;++i<r;)n[t.get(i)]=VM.visit(e,i);return n}toString(){return`{${[...this].map((([t,e])=>`${pA(t)}: ${pA(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class zM{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),VM.visit(this.vals,t)]})}}class qM{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[UM].toArray().map(String)}has(t,e){return t[UM].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[UM].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[UM].indexOf(e);if(-1!==n){const i=VM.visit(Reflect.get(t,RM),n);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[UM].indexOf(e);return-1!==i?(fM.visit(Reflect.get(t,RM),i,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}let WM;function YM(t,e,n,i){const{length:r=0}=t;let s="number"!=typeof e?0:e,a="number"!=typeof n?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(WM=s,s=a,a=WM),a>r&&(a=r),i?i(t,s,a):[s,a]}Object.defineProperties(jM.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[UM]:{writable:!0,enumerable:!1,configurable:!1,value:null},[RM]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const HM=t=>t!=t;function GM(t){if("object"!==typeof t||null===t)return HM(t)?HM:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const i of t.values())n[++e]=GM(i);return KM(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=GM(t[n]);return KM(e)}(t):t instanceof LE?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=GM(t.get(n));return KM(e)}(t):function(t,e=!1){const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const i=[];for(let e=-1,r=n.length;++e<r;)i[e]=GM(t[n[e]]);return KM(i,n)}(t,!0)}function KM(t,e){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:return QM(t,n,n.keys());case jM:case mM:case Object:case void 0:return QM(t,n,e||Object.keys(n))}return n instanceof LE&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function QM(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const o=t.length;let c=s.next(),l=i.next(),u=r.next();for(;a<o&&!l.done&&!u.done&&!c.done&&(l.value===u.value&&t[a](c.value));++a,l=i.next(),u=r.next(),c=s.next());return!!(a===o&&l.done&&u.done&&c.done)||(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function XM(t,e,n,i){return 0!=(n&1<<i)}function JM(t,e,n,i){return(n&1<<i)>>i}function ZM(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8==0?n.subarray(t>>3):tE(new eE(n,t,e,null,XM)).subarray(0,i)),r}return n}function tE(t){const e=[];let n=0,i=0,r=0;for(const s of t)s&&(r|=1<<i),8==++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class eE{constructor(t,e,n,i,r){this.bytes=t,this.length=n,this.context=i,this.get=r,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function nE(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const r of new eE(t,e,n-e,t,JM))i+=r;return i}const i=n>>3<<3,r=e+(e%8==0?0:8-e%8);return nE(t,e,r)+nE(t,i,n)+function(t,e,n){let i=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===n?t.byteLength:r+n;for(;a-r>=4;)i+=iE(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=iE(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=iE(s.getUint8(r)),r+=1;return i}(t,r>>3,i-r>>3)}function iE(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class rE{constructor(t,e,n,i,r,s=[],a){let o;this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),r instanceof rE?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=NT(t),r&&((o=r[0])&&(this.valueOffsets=o),(o=r[1])&&(this.values=o),(o=r[2])&&(this.nullBitmap=o),(o=r[3])&&(this.typeIds=o))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-nE(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return 0!=(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:n,offset:i}=this,r=i+t>>3,s=(i+t)%8,a=n[r]>>s&1;return e?0===a&&(n[r]|=1<<s,this._nullCount=this.nullCount+1):1===a&&(n[r]&=~(1<<s),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,n=this.length,i=this._nullCount,r=this,s=this.children){return new rE(t,e,n,i,r,s,this.dictionary)}slice(t,e){const{stride:n,typeId:i,children:r}=this,s=+(0===this._nullCount)-1,a=16===i?n:1,o=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,s,o,0===r.length||this.valueOffsets?r:this._sliceChildren(r,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===hA.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(ZM(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[fA.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r;const{buffers:s}=this;return(r=s[fA.TYPE])&&(s[fA.TYPE]=r.subarray(t,t+e)),(r=s[fA.OFFSET])&&(s[fA.OFFSET]=r.subarray(t,t+e+1))||(r=s[fA.DATA])&&(s[fA.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),s}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}rE.prototype.children=Object.freeze([]);class sE extends LT{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:i=0}=t;return new rE(e,n,i,0)}visitBool(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length>>3,nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitInt(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitFloat(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitUtf8(t){const{type:e,offset:n=0}=t,i=GI(t.data),r=GI(t.nullBitmap),s=HI(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new rE(e,n,a,o,[s,i,r])}visitBinary(t){const{type:e,offset:n=0}=t,i=GI(t.data),r=GI(t.nullBitmap),s=HI(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new rE(e,n,a,o,[s,i,r])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length/NT(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitDate(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length/NT(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitTimestamp(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length/NT(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitTime(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length/NT(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitDecimal(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length/NT(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitList(t){const{type:e,offset:n=0,child:i}=t,r=GI(t.nullBitmap),s=HI(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new rE(e,n,a,o,[s,void 0,r],[i])}visitStruct(t){const{type:e,offset:n=0,children:i=[]}=t,r=GI(t.nullBitmap),{length:s=i.reduce(((t,{length:e})=>Math.max(t,e)),0),nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,void 0,r],i)}visitUnion(t){const{type:e,offset:n=0,children:i=[]}=t,r=GI(t.nullBitmap),s=YI(e.ArrayType,t.typeIds),{length:a=s.length,nullCount:o=(t.nullBitmap?-1:0)}=t;if(WA.isSparseUnion(e))return new rE(e,n,a,o,[void 0,void 0,r,s],i);const c=HI(t.valueOffsets);return new rE(e,n,a,o,[c,void 0,r,s],i)}visitDictionary(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.indices.ArrayType,t.data),{dictionary:s=new LE([(new sE).visit({type:e.dictionary})])}=t,{length:a=r.length,nullCount:o=(t.nullBitmap?-1:0)}=t;return new rE(e,n,a,o,[void 0,r,i],[],s)}visitInterval(t){const{type:e,offset:n=0}=t,i=GI(t.nullBitmap),r=YI(e.ArrayType,t.data),{length:s=r.length/NT(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,r,i])}visitFixedSizeList(t){const{type:e,offset:n=0,child:i=(new sE).visit({type:e.valueType})}=t,r=GI(t.nullBitmap),{length:s=i.length/NT(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new rE(e,n,s,a,[void 0,void 0,r],[i])}visitMap(t){const{type:e,offset:n=0,child:i=(new sE).visit({type:e.childType})}=t,r=GI(t.nullBitmap),s=HI(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new rE(e,n,a,o,[s,void 0,r],[i])}}function aE(t){return(new sE).visit(t)}class oE{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function cE(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function lE(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function uE(t,e,n,i){const r=[];for(let s=-1,a=t.length;++s<a;){const a=t[s],o=e[s],{length:c}=a;if(o>=i)break;if(n>=o+c)continue;if(o>=n&&o+c<=i){r.push(a);continue}const l=Math.max(0,n-o),u=Math.min(i-o,c);r.push(a.slice(l,u-l))}return 0===r.length&&r.push(t[0].slice(0,0)),r}function hE(t,e,n,i){let r=0,s=0,a=e.length-1;do{if(r>=a-1)return n<e[a]?i(t,r,n-e[r]):null;s=r+Math.trunc(.5*(a-r)),n<e[s]?a=s:r=s}while(r<a)}function fE(t,e){return t.getValid(e)}function dE(t){function e(e,n,i){return t(e[n],i)}return function(t){return hE(this.data,this._offsets,t,e)}}function pE(t){let e;function n(n,i,r){return t(n[i],r,e)}return function(t,i){const r=this.data;e=i;const s=hE(r,this._offsets,t,n);return e=void 0,s}}function mE(t){let e;function n(n,i,r){let s=r,a=0,o=0;for(let r=i-1,c=n.length;++r<c;){const i=n[r];if(~(a=t(i,e,s)))return o+a;s=0,o+=i.length}return-1}return function(t,i){e=t;const r=this.data,s="number"!=typeof i?n(r,0,0):hE(r,this._offsets,i,n);return e=void 0,s}}class yE extends LT{}function gE(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new eE(n,t.offset+(e||0),t.length,n,XM)){if(!r)return i;++i}return-1}(t,n);const i=VM.getVisitFn(t),r=GM(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}function bE(t,e,n){const i=VM.getVisitFn(t),r=GM(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}yE.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},yE.prototype.visitBool=gE,yE.prototype.visitInt=gE,yE.prototype.visitInt8=gE,yE.prototype.visitInt16=gE,yE.prototype.visitInt32=gE,yE.prototype.visitInt64=gE,yE.prototype.visitUint8=gE,yE.prototype.visitUint16=gE,yE.prototype.visitUint32=gE,yE.prototype.visitUint64=gE,yE.prototype.visitFloat=gE,yE.prototype.visitFloat16=gE,yE.prototype.visitFloat32=gE,yE.prototype.visitFloat64=gE,yE.prototype.visitUtf8=gE,yE.prototype.visitBinary=gE,yE.prototype.visitFixedSizeBinary=gE,yE.prototype.visitDate=gE,yE.prototype.visitDateDay=gE,yE.prototype.visitDateMillisecond=gE,yE.prototype.visitTimestamp=gE,yE.prototype.visitTimestampSecond=gE,yE.prototype.visitTimestampMillisecond=gE,yE.prototype.visitTimestampMicrosecond=gE,yE.prototype.visitTimestampNanosecond=gE,yE.prototype.visitTime=gE,yE.prototype.visitTimeSecond=gE,yE.prototype.visitTimeMillisecond=gE,yE.prototype.visitTimeMicrosecond=gE,yE.prototype.visitTimeNanosecond=gE,yE.prototype.visitDecimal=gE,yE.prototype.visitList=gE,yE.prototype.visitStruct=gE,yE.prototype.visitUnion=gE,yE.prototype.visitDenseUnion=bE,yE.prototype.visitSparseUnion=bE,yE.prototype.visitDictionary=gE,yE.prototype.visitInterval=gE,yE.prototype.visitIntervalDayTime=gE,yE.prototype.visitIntervalYearMonth=gE,yE.prototype.visitFixedSizeList=gE,yE.prototype.visitMap=gE;const vE=new yE;class _E extends LT{}function xE(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===hA.Timestamp||e instanceof HA&&64!==e.bitWidth||e instanceof dT&&64!==e.bitWidth||e instanceof nT&&e.precision!==aA.HALF))return new oE(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new oE(t.data.length,(e=>{const i=t.data[e].length,r=t.slice(n,n+i);return n+=i,new wE(r)}))}class wE{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}_E.prototype.visitNull=xE,_E.prototype.visitBool=xE,_E.prototype.visitInt=xE,_E.prototype.visitInt8=xE,_E.prototype.visitInt16=xE,_E.prototype.visitInt32=xE,_E.prototype.visitInt64=xE,_E.prototype.visitUint8=xE,_E.prototype.visitUint16=xE,_E.prototype.visitUint32=xE,_E.prototype.visitUint64=xE,_E.prototype.visitFloat=xE,_E.prototype.visitFloat16=xE,_E.prototype.visitFloat32=xE,_E.prototype.visitFloat64=xE,_E.prototype.visitUtf8=xE,_E.prototype.visitBinary=xE,_E.prototype.visitFixedSizeBinary=xE,_E.prototype.visitDate=xE,_E.prototype.visitDateDay=xE,_E.prototype.visitDateMillisecond=xE,_E.prototype.visitTimestamp=xE,_E.prototype.visitTimestampSecond=xE,_E.prototype.visitTimestampMillisecond=xE,_E.prototype.visitTimestampMicrosecond=xE,_E.prototype.visitTimestampNanosecond=xE,_E.prototype.visitTime=xE,_E.prototype.visitTimeSecond=xE,_E.prototype.visitTimeMillisecond=xE,_E.prototype.visitTimeMicrosecond=xE,_E.prototype.visitTimeNanosecond=xE,_E.prototype.visitDecimal=xE,_E.prototype.visitList=xE,_E.prototype.visitStruct=xE,_E.prototype.visitUnion=xE,_E.prototype.visitDenseUnion=xE,_E.prototype.visitSparseUnion=xE,_E.prototype.visitDictionary=xE,_E.prototype.visitInterval=xE,_E.prototype.visitIntervalDayTime=xE,_E.prototype.visitIntervalYearMonth=xE,_E.prototype.visitFixedSizeList=xE,_E.prototype.visitMap=xE;const SE=new _E,kE=(t,e)=>t+e;class IE extends LT{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===cA.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,n)=>t+ME.visit(n,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,n)=>t+ME.visit(n,e)),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+((null===(n=t.dictionary)||void 0===n?void 0:n.getByteLength(t.values[e]))||0)}}const AE=({type:t,children:e,typeIds:n,valueOffsets:i},r)=>{const s=t.typeIdToChildIndex[n[r]];return 8+ME.visit(e[s],i[r])},TE=({children:t},e)=>4+ME.visitMany(t,t.map((()=>e))).reduce(kE,0);IE.prototype.visitUtf8=({valueOffsets:t},e)=>t[e+1]-t[e]+8,IE.prototype.visitBinary=({valueOffsets:t},e)=>t[e+1]-t[e]+8,IE.prototype.visitList=({valueOffsets:t,stride:e,children:n},i)=>{const r=n[0],{[i*e]:s}=t,{[i*e+1]:a}=t,o=ME.getVisitFn(r.type),c=r.slice(s,a-s);let l=8;for(let t=-1,e=a-s;++t<e;)l+=o(c,t);return l},IE.prototype.visitFixedSizeList=({stride:t,children:e},n)=>{const i=e[0],r=i.slice(n*t,t),s=ME.getVisitFn(i.type);let a=0;for(let t=-1,e=r.length;++t<e;)a+=s(r,t);return a},IE.prototype.visitUnion=(t,e)=>t.type.mode===sA.Dense?AE(t,e):TE(t,e),IE.prototype.visitDenseUnion=AE,IE.prototype.visitSparseUnion=TE;const ME=new IE;var EE;const CE={},NE={};class LE{constructor(t){var e,n,i;const r=t[0]instanceof LE?t.flatMap((t=>t.data)):t;if(0===r.length||r.some((t=>!(t instanceof rE))))throw new TypeError("Vector constructor expects an Array of Data instances.");const s=null===(e=r[0])||void 0===e?void 0:e.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n,byteLength:i}=CE[s.typeId],a=r[0];this.isValid=t=>fE(a,t),this.get=e=>t(a,e),this.set=(t,n)=>e(a,t,n),this.indexOf=t=>n(a,t),this.getByteLength=t=>i(a,t),this._offsets=[0,a.length];break}default:Object.setPrototypeOf(this,NE[s.typeId]),this._offsets=lE(r)}this.data=r,this.type=s,this.stride=NT(s),this.numChildren=null!==(i=null===(n=s.children)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=cE(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${hA[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return SE.visit(this)}concat(...t){return new LE(this.data.concat(t.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new LE(YM(this,t,e,(({data:t,_offsets:e},n,i)=>uE(t,e,n,i))))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:i,ArrayType:r}=this;switch(t.typeId){case hA.Int:case hA.Float:case hA.Decimal:case hA.Time:case hA.Timestamp:switch(e.length){case 0:return new r;case 1:return e[0].values.subarray(0,n*i);default:return e.reduce(((t,{values:e,length:n})=>(t.array.set(e.subarray(0,n*i),t.offset),t.offset+=n*i,t)),{array:new r(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new LE(this.data.map((({children:e})=>e[t]))):null}get isMemoized(){return!!WA.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(WA.isDictionary(this.type)){const t=new OE(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new LE(e)}return new OE(this)}unmemoize(){if(WA.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new LE(e)}return this}}EE=Symbol.toStringTag,LE[EE]=(t=>{t.type=WA.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(hA).map((t=>hA[t])).filter((t=>"number"==typeof t&&t!==hA.NONE));for(const n of e){const e=VM.getVisitFnByTypeId(n),i=fM.getVisitFnByTypeId(n),r=vE.getVisitFnByTypeId(n),s=ME.getVisitFnByTypeId(n);CE[n]={get:e,set:i,indexOf:r,byteLength:s},NE[n]=Object.create(t,{isValid:{value:dE(fE)},get:{value:dE(VM.getVisitFnByTypeId(n))},set:{value:pE(fM.getVisitFnByTypeId(n))},indexOf:{value:mE(vE.getVisitFnByTypeId(n))},getByteLength:{value:dE(ME.getVisitFnByTypeId(n))}})}return"Vector"})(LE.prototype);class OE extends LE{constructor(t){super(t.data);const e=this.get,n=this.set,i=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=r[t];if(void 0!==n)return n;const i=e.call(this,t);return r[t]=i,i}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),r[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new OE(i.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new LE(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function DE(t){if(!t||t.length<=0)return function(t){return!0};let e="";const n=t.filter((t=>t==t));return n.length>0&&(e=`\n    switch (x) {${n.map((t=>`\n        case ${function(t){if("bigint"!=typeof t)return pA(t);if(CI)return`${pA(t)}n`;return`"${pA(t)}"`}(t)}:`)).join("")}\n            return false;\n    }`),t.length!==n.length&&(e=`if (x !== x) return false;\n${e}`),new Function("x",`${e}\nreturn true;`)}const $E=(t,e)=>(Math.ceil(t)*e+63&-64||64)/e;class BE{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/e))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,n=this.length*e,i=this.buffer.length;n>=i&&this._resize($E(0===i?1*n:2*n,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=$E(t*this.stride,this.BYTES_PER_ELEMENT);const e=((t,e=0)=>t.length>=e?t.subarray(0,e):qI(new t.constructor(e),t,0))(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=qI(new this.ArrayType(t),this.buffer)}}BE.prototype.offset=0;class FE extends BE{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class PE extends FE{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:n}=this.reserve(t-this.length+1),i=t>>3,r=t%8,s=n[i]>>r&1;return e?0===s&&(n[i]|=1<<r,++this.numValid):1===s&&(n[i]&=~(1<<r),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class VE extends FE{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&i.fill(i[n],n,t),i[t]=i[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let UE=class{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=NT(t),this._nulls=new PE,e&&e.length>0&&(this._isValid=DE(e))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new LE([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:e,_values:n,_nulls:i,_typeIds:r,children:s}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s.reduce(((t,e)=>t+e.byteLength),t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce(((t,e)=>t+e.reservedByteLength),t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,e,n,i;const{type:r,length:s,nullCount:a,_typeIds:o,_offsets:c,_values:l,_nulls:u}=this;(e=null==o?void 0:o.flush(s))?i=null==c?void 0:c.flush(s):t=(i=null==c?void 0:c.flush(s))?null==l?void 0:l.flush(c.last()):null==l?void 0:l.flush(s),a>0&&(n=null==u?void 0:u.flush(s));const h=this.children.map((t=>t.flush()));return this.clear(),aE({type:r,length:s,nullCount:a,children:h,child:h[0],data:t,typeIds:e,nullBitmap:n,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,e,n,i;this.length=0,null===(t=this._nulls)||void 0===t||t.clear(),null===(e=this._values)||void 0===e||e.clear(),null===(n=this._offsets)||void 0===n||n.clear(),null===(i=this._typeIds)||void 0===i||i.clear();for(const t of this.children)t.clear();return this}};UE.prototype.length=1,UE.prototype.stride=1,UE.prototype.children=null,UE.prototype.finished=!1,UE.prototype.nullValues=null,UE.prototype._isValid=()=>!0;class RE extends UE{constructor(t){super(t),this._values=new FE(new this.ArrayType(0),this.stride)}setValue(t,e){const n=this._values;return n.reserve(t-n.length+1),super.setValue(t,e)}}class jE extends UE{constructor(t){super(t),this._pendingLength=0,this._offsets=new VE}setValue(t,e){const n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e instanceof jM?e[UM].length:e.length,n.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class zE{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const qE=new Int32Array(2),WE=new Float32Array(qE.buffer),YE=new Float64Array(qE.buffer),HE=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];let GE=class t{constructor(t,e){this.low=0|t,this.high=0|e}static create(e,n){return 0==e&&0==n?t.ZERO:new t(e,n)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}};var KE;GE.ZERO=new GE(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(KE||(KE={}));let QE=class t{constructor(t){this.bytes_=t,this.position_=0}static allocate(e){return new t(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new GE(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new GE(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return qE[0]=this.readInt32(t),WE[0]}readFloat64(t){return qE[HE?0:1]=this.readInt32(t),qE[HE?1:0]=this.readInt32(t+4),YE[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){WE[0]=e,this.writeInt32(t,qE[0])}writeFloat64(t,e){YE[0]=e,this.writeInt32(t,qE[HE?0:1]),this.writeInt32(t+4,qE[HE?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let i="",r=0;if(t+=4,e===KE.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){let e;const n=this.readUint8(t+r++);if(n<192)e=n;else{const i=this.readUint8(t+r++);if(n<224)e=(31&n)<<6|63&i;else{const s=this.readUint8(t+r++);if(n<240)e=(15&n)<<12|(63&i)<<6|63&s;else{e=(7&n)<<18|(63&i)<<12|(63&s)<<6|63&this.readUint8(t+r++)}}}e<65536?i+=String.fromCharCode(e):(e-=65536,i+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return i}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return GE.create(t,e)}createScalarList(t,e){const n=[];for(let i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n}createObjList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e.unpack())}return n}},XE=class t{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=QE.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const i=1+~(this.bb.capacity()-this.space+n)&e-1;for(;this.space<i+e+n;){const e=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,i=QE.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const i=2*(n+2);this.addInt16(i);let r=0;const s=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(t)){for(let e=2;e<i;e+=2)if(this.bb.readInt16(s+e)!=this.bb.readInt16(t+e))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const i=n?4:0;if(e){const t=e;if(this.prep(this.minalign,8+i),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(0!=this.bb.readInt16(i+e)))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let i;const r=t.charCodeAt(n++);if(r<55296||r>=56320)i=r;else{i=(r<<10)+t.charCodeAt(n++)+-56613888}i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let t=0,n=this.space,i=this.bb.bytes();t<e.length;t++)i[n++]=e[t];return this.endVector()}createLong(t,e){return GE.create(t,e)}createObjectOffset(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];if(null===i)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class JE{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new JE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new JE).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return JE.startKeyValue(t),JE.addKey(t,e),JE.addValue(t,n),JE.endKeyValue(t)}}var ZE,tC,eC,nC;!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(ZE||(ZE={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(tC||(tC={})),function(t){t[t.DenseArray=0]="DenseArray"}(eC||(eC={}));class iC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new iC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new iC).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return iC.startInt(t),iC.addBitWidth(t,e),iC.addIsSigned(t,n),iC.endInt(t)}}class rC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new rC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new rC).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new iC).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):eC.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,eC.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class sC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new sC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new sC).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return sC.startBinary(t),sC.endBinary(t)}}class aC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new aC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new aC).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return aC.startBool(t),aC.endBool(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(nC||(nC={}));let oC=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nC.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,nC.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(e,n){return t.startDate(e),t.addUnit(e,n),t.endDate(e)}};class cC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new cC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new cC).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,i){return cC.startDecimal(t),cC.addPrecision(t,e),cC.addScale(t,n),cC.addBitWidth(t,i),cC.endDecimal(t)}}var lC,uC,hC;!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(lC||(lC={}));class fC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new fC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new fC).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return fC.startFixedSizeBinary(t),fC.addByteWidth(t,e),fC.endFixedSizeBinary(t)}}class dC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new dC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new dC).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return dC.startFixedSizeList(t),dC.addListSize(t,e),dC.endFixedSizeList(t)}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(uC||(uC={}));class pC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new pC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new pC).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):uC.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,uC.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return pC.startFloatingPoint(t),pC.addPrecision(t,e),pC.endFloatingPoint(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(hC||(hC={}));class mC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new mC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new mC).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):hC.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,hC.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return mC.startInterval(t),mC.addUnit(t,e),mC.endInterval(t)}}class yC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new yC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new yC).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return yC.startList(t),yC.endList(t)}}let gC=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(e,n){return t.startMap(e),t.addKeysSorted(e,n),t.endMap(e)}};class bC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new bC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new bC).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return bC.startNull(t),bC.endNull(t)}}class vC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new vC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new vC).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return vC.startStruct_(t),vC.endStruct_(t)}}class _C{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new _C).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new _C).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lC.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,lC.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return _C.startTime(t),_C.addUnit(t,e),_C.addBitWidth(t,n),_C.endTime(t)}}class xC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new xC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new xC).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):lC.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,lC.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return xC.startTimestamp(t),xC.addUnit(t,e),xC.addTimezone(t,n),xC.endTimestamp(t)}}var wC,SC;!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(wC||(wC={}));class kC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new kC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new kC).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wC.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,wC.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return kC.startUnion(t),kC.addMode(t,e),kC.addTypeIds(t,n),kC.endUnion(t)}}class IC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new IC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new IC).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return IC.startUtf8(t),IC.endUtf8(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(SC||(SC={}));let AC=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):SC.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new rC).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new JE).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,SC.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}},TC=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):tC.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new AC).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new JE).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,tC.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(e,n,i,r,s){return t.startSchema(e),t.addEndianness(e,n),t.addFields(e,i),t.addCustomMetadata(e,r),t.addFeatures(e,s),t.endSchema(e)}};class MC{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new MC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new MC).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ZE.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new TC).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new zE).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new zE).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new JE).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,ZE.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}class EC{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=LC(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new EC(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new EC(e,this.metadata)}assign(...t){const e=t[0]instanceof EC?t[0]:Array.isArray(t[0])?new EC(t[0]):new EC(t),n=[...this.fields],i=NC(NC(new Map,this.metadata),e.metadata),r=e.fields.filter((t=>{const e=n.findIndex((e=>e.name===t.name));return!~e||(n[e]=t.clone({metadata:NC(NC(new Map,n[e].metadata),t.metadata)}))&&!1})),s=LC(r,new Map);return new EC([...n,...r],i,new Map([...this.dictionaries,...s]))}}EC.prototype.fields=null,EC.prototype.metadata=null,EC.prototype.dictionaries=null;class CC{constructor(t,e,n=!1,i){this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}static new(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===n&&(n=t[0].type),void 0===i&&(i=t[0].nullable),void 0===r&&(r=t[0].metadata)),new CC(`${e}`,n,i,r)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:n=this.type,nullable:i=this.nullable,metadata:r=this.metadata}=t[0]):[e=this.name,n=this.type,i=this.nullable,r=this.metadata]=t,CC.new(e,n,i,r)}}function NC(t,e){return new Map([...t||new Map,...e||new Map])}function LC(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(WA.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&LC(i.children,e)}return e}CC.prototype.type=null,CC.prototype.name=null,CC.prototype.nullable=null,CC.prototype.metadata=null;var OC=GE,DC=XE,$C=QE;class BC{constructor(t,e=rA.V4,n,i){this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new $C(GI(t));const e=MC.getRootAsFooter(t),n=EC.decode(e.schema());return new FC(n,e)}static encode(t){const e=new DC,n=EC.encode(e,t.schema);MC.startRecordBatchesVector(e,t.numRecordBatches);for(const n of[...t.recordBatches()].slice().reverse())PC.encode(e,n);const i=e.endVector();MC.startDictionariesVector(e,t.numDictionaries);for(const n of[...t.dictionaryBatches()].slice().reverse())PC.encode(e,n);const r=e.endVector();return MC.startFooter(e),MC.addSchema(e,n),MC.addVersion(e,rA.V4),MC.addRecordBatches(e,i),MC.addDictionaries(e,r),MC.finishFooterBuffer(e,MC.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class FC extends BC{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return PC.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return PC.decode(e)}return null}}class PC{constructor(t,e,n){this.metaDataLength=t,this.offset="number"==typeof n?n:n.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new PC(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,i=new OC(e.offset,0),r=new OC(e.bodyLength,0);return zE.createBlock(t,i,n,r)}}const VC=Object.freeze({done:!0,value:void 0});class UC{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class RC extends UC{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return vI(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(VC);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return tA.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return tA.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return vI(this,void 0,void 0,(function*(){return yield this.abort(t),VC}))}return(t){return vI(this,void 0,void 0,(function*(){return yield this.close(),VC}))}read(t){return vI(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return vI(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(VC)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class jC extends RC{write(t){if((t=GI(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?AI(this.toUint8Array(!0)):this.toUint8Array(!1).then(AI)}toUint8Array(t=!1){return t?WI(this._values)[0]:(()=>vI(this,void 0,void 0,(function*(){var t,e;const n=[];let i=0;try{for(var r,s=kI(this);!(r=yield s.next()).done;){const t=r.value;n.push(t),i+=t.byteLength}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=s.return)&&(yield e.call(s))}finally{if(t)throw t.error}}return WI(n,i)[0]})))()}}class zC extends jE{constructor(t){super(t),this._values=new BE(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,GI(e))}_flushPending(t,e){const n=this._offsets,i=this._values.reserve(e).buffer;let r=0;for(const[e,s]of t)if(void 0===s)n.set(e,0);else{const t=s.length;i.set(s,r),n.set(e,t),r+=t}}}class qC extends UE{constructor(t){super(t),this._values=new PE}setValue(t,e){this._values.set(t,+e)}}class WC extends RE{}WC.prototype._setValue=KT;class YC extends WC{}YC.prototype._setValue=YT;class HC extends WC{}HC.prototype._setValue=HT;class GC extends RE{}GC.prototype._setValue=aM;class KC extends UE{constructor({type:t,nullValues:e,dictionaryHashFunction:n}){super({type:new CT(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=WN({type:this.type.indices,nullValues:e}),this.dictionary=WN({type:this.type.dictionary,nullValues:null}),"function"==typeof n&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const n=this.indices;return e=n.setValid(t,e),this.length=n.length,e}setValue(t,e){const n=this._keysToIndices,i=this.valueToKey(e);let r=n[i];return void 0===r&&(n[i]=r=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,r)}flush(){const t=this.type,e=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"==typeof t?t:`${t}`}}class QC extends RE{}QC.prototype._setValue=GT;class XC extends UE{setValue(t,e){const[n]=this.children,i=t*this.stride;for(let t=-1,r=e.length;++t<r;)n.set(i+t,e[t])}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(t);return this.type=new AT(this.type.listSize,new CC(e,t.type,!0)),n}}class JC extends RE{setValue(t,e){this._values.set(t,e)}}class ZC extends JC{setValue(t,e){super.setValue(t,PT(e))}}class tN extends JC{}class eN extends JC{}class nN extends RE{}nN.prototype._setValue=lM;class iN extends nN{}iN.prototype._setValue=uM;class rN extends nN{}rN.prototype._setValue=hM;class sN extends RE{setValue(t,e){this._values.set(t,e)}}class aN extends sN{}class oN extends sN{}class cN extends sN{}class lN extends sN{}class uN extends sN{}class hN extends sN{}class fN extends sN{}class dN extends sN{}class pN extends jE{constructor(t){super(t),this._offsets=new VE}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new wT(new CC(e,t.type,!0)),this.numChildren-1}_flushPending(t){const e=this._offsets,[n]=this.children;for(const[i,r]of t)if(void 0===r)e.set(i,0);else{const t=r.length,s=e.set(i,t).buffer[i];for(let e=-1;++e<t;)n.set(s+e,r[e])}}}class mN extends jE{set(t,e){return super.set(t,e)}setValue(t,e){const n=e instanceof Map?e:new Map(Object.entries(e)),i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.size),this._pendingLength+=n.size,i.set(t,n)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new TT(new CC(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,[n]=this.children;for(const[i,r]of t)if(void 0===r)e.set(i,0);else{let{[i]:t,[i+1]:s}=e.set(i,r.size).buffer;for(const e of r.entries())if(n.set(t,e),++t>=s)break}}}class yN extends UE{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class gN extends UE{setValue(t,e){const{children:n,type:i}=this;switch(Array.isArray(e)||e.constructor){case!0:return i.children.forEach(((i,r)=>n[r].set(t,e[r])));case Map:return i.children.forEach(((i,r)=>n[r].set(t,e.get(i.name))));default:return i.children.forEach(((i,r)=>n[r].set(t,e[i.name])))}}setValid(t,e){return super.setValid(t,e)||this.children.forEach((n=>n.setValid(t,e))),e}addChild(t,e=`${this.numChildren}`){const n=this.children.push(t);return this.type=new ST([...this.type.children,new CC(e,t.type,!0)]),n}}class bN extends RE{}bN.prototype._setValue=tM;class vN extends bN{}vN.prototype._setValue=QT;class _N extends bN{}_N.prototype._setValue=XT;class xN extends bN{}xN.prototype._setValue=JT;class wN extends bN{}wN.prototype._setValue=ZT;class SN extends RE{}SN.prototype._setValue=sM;class kN extends SN{}kN.prototype._setValue=eM;class IN extends SN{}IN.prototype._setValue=nM;class AN extends SN{}AN.prototype._setValue=iM;class TN extends SN{}TN.prototype._setValue=rM;class MN extends UE{constructor(t){super(t),this._typeIds=new FE(new Int8Array(0),1),"function"==typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,n){return void 0===n&&(n=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,n),this}setValue(t,e,n){this._typeIds.set(t,n);const i=this.type.typeIdToChildIndex[n],r=this.children[i];null==r||r.set(t,e)}addChild(t,e=`${this.children.length}`){const n=this.children.push(t),{type:{children:i,mode:r,typeIds:s}}=this,a=[...i,new CC(e,t.type)];return this.type=new kT(r,[...s,n],a),n}_valueToChildTypeId(t,e,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class EN extends MN{}class CN extends MN{constructor(t){super(t),this._offsets=new FE(new Int32Array(0))}setValue(t,e,n){const i=this._typeIds.set(t,n).buffer[t],r=this.getChildAt(this.type.typeIdToChildIndex[i]),s=this._offsets.set(t,r.length).buffer[t];null==r||r.set(s,e)}}class NN extends jE{constructor(t){super(t),this._values=new BE(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,MI(e))}_flushPending(t,e){}}NN.prototype._flushPending=zC.prototype._flushPending;const LN=new class extends LT{visitNull(){return yN}visitBool(){return qC}visitInt(){return sN}visitInt8(){return aN}visitInt16(){return oN}visitInt32(){return cN}visitInt64(){return lN}visitUint8(){return uN}visitUint16(){return hN}visitUint32(){return fN}visitUint64(){return dN}visitFloat(){return JC}visitFloat16(){return ZC}visitFloat32(){return tN}visitFloat64(){return eN}visitUtf8(){return NN}visitBinary(){return zC}visitFixedSizeBinary(){return QC}visitDate(){return WC}visitDateDay(){return YC}visitDateMillisecond(){return HC}visitTimestamp(){return bN}visitTimestampSecond(){return vN}visitTimestampMillisecond(){return _N}visitTimestampMicrosecond(){return xN}visitTimestampNanosecond(){return wN}visitTime(){return SN}visitTimeSecond(){return kN}visitTimeMillisecond(){return IN}visitTimeMicrosecond(){return AN}visitTimeNanosecond(){return TN}visitDecimal(){return GC}visitList(){return pN}visitStruct(){return gN}visitUnion(){return MN}visitDenseUnion(){return CN}visitSparseUnion(){return EN}visitDictionary(){return KC}visitInterval(){return nN}visitIntervalDayTime(){return iN}visitIntervalYearMonth(){return rN}visitFixedSizeList(){return XC}visitMap(){return mN}};class ON extends LT{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function DN(t,e){return e instanceof t.constructor}function $N(t,e){return t===e||DN(t,e)}function BN(t,e){return t===e||DN(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function FN(t,e){return t===e||DN(t,e)&&t.precision===e.precision}function PN(t,e){return t===e||DN(t,e)&&t.unit===e.unit}function VN(t,e){return t===e||DN(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function UN(t,e){return t===e||DN(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function RN(t,e){return t===e||DN(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&zN.compareManyFields(t.children,e.children)}function jN(t,e){return t===e||DN(t,e)&&t.unit===e.unit}ON.prototype.visitNull=$N,ON.prototype.visitBool=$N,ON.prototype.visitInt=BN,ON.prototype.visitInt8=BN,ON.prototype.visitInt16=BN,ON.prototype.visitInt32=BN,ON.prototype.visitInt64=BN,ON.prototype.visitUint8=BN,ON.prototype.visitUint16=BN,ON.prototype.visitUint32=BN,ON.prototype.visitUint64=BN,ON.prototype.visitFloat=FN,ON.prototype.visitFloat16=FN,ON.prototype.visitFloat32=FN,ON.prototype.visitFloat64=FN,ON.prototype.visitUtf8=$N,ON.prototype.visitBinary=$N,ON.prototype.visitFixedSizeBinary=function(t,e){return t===e||DN(t,e)&&t.byteWidth===e.byteWidth},ON.prototype.visitDate=PN,ON.prototype.visitDateDay=PN,ON.prototype.visitDateMillisecond=PN,ON.prototype.visitTimestamp=VN,ON.prototype.visitTimestampSecond=VN,ON.prototype.visitTimestampMillisecond=VN,ON.prototype.visitTimestampMicrosecond=VN,ON.prototype.visitTimestampNanosecond=VN,ON.prototype.visitTime=UN,ON.prototype.visitTimeSecond=UN,ON.prototype.visitTimeMillisecond=UN,ON.prototype.visitTimeMicrosecond=UN,ON.prototype.visitTimeNanosecond=UN,ON.prototype.visitDecimal=$N,ON.prototype.visitList=function(t,e){return t===e||DN(t,e)&&t.children.length===e.children.length&&zN.compareManyFields(t.children,e.children)},ON.prototype.visitStruct=function(t,e){return t===e||DN(t,e)&&t.children.length===e.children.length&&zN.compareManyFields(t.children,e.children)},ON.prototype.visitUnion=RN,ON.prototype.visitDenseUnion=RN,ON.prototype.visitSparseUnion=RN,ON.prototype.visitDictionary=function(t,e){return t===e||DN(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&zN.visit(t.indices,e.indices)&&zN.visit(t.dictionary,e.dictionary)},ON.prototype.visitInterval=jN,ON.prototype.visitIntervalDayTime=jN,ON.prototype.visitIntervalYearMonth=jN,ON.prototype.visitFixedSizeList=function(t,e){return t===e||DN(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&zN.compareManyFields(t.children,e.children)},ON.prototype.visitMap=function(t,e){return t===e||DN(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&zN.compareManyFields(t.children,e.children)};const zN=new ON;function qN(t,e){return zN.compareSchemas(t,e)}function WN(t){const e=t.type,n=new(LN.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const i=t.children||[],r={nullValues:t.nullValues},s=Array.isArray(i)?(t,e)=>i[e]||r:({name:t})=>i[t]||r;for(const[t,i]of e.children.entries()){const{type:e}=i,r=s(i,t);n.children.push(WN(Object.assign(Object.assign({},r),{type:e})))}}return n}function YN(t,e){return function(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s=0,a=0,o=-1;const c=e.length;let l,u=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<c;)u[o]=l=e[o].shift(),a=Math.min(a,l?l.length:a);Number.isFinite(a)&&(u=HN(n,a,u,e,r),a>0&&(i[s++]=aE({type:new ST(n),length:a,nullCount:0,children:u.slice()})))}return[t=t.assign(n),i.map((e=>new XN(t,e)))]}(t,e.map((t=>t.data.concat())))}function HN(t,e,n,i,r){var s;const a=(e+63&-64)>>3;for(let o=-1,c=i.length;++o<c;){const c=n[o],l=null==c?void 0:c.length;if(l>=e)l===e?n[o]=c:(n[o]=c.slice(0,e),r.numBatches=Math.max(r.numBatches,i[o].unshift(c.slice(e,l-e))));else{const i=t[o];t[o]=i.clone({nullable:!0}),n[o]=null!==(s=null==c?void 0:c._changeLengthAndBackfillNullBitmap(e))&&void 0!==s?s:aE({type:i.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return n}var GN,KN;class QN{constructor(...t){var e,n;if(0===t.length)return this.batches=[],this.schema=new EC([]),this._offsets=[0],this;let i,r;t[0]instanceof EC&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(r=t.pop());const s=t=>{if(t){if(t instanceof XN)return[t];if(t instanceof QN)return t.batches;if(t instanceof rE){if(t.type instanceof ST)return[new XN(new EC(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>s(t)));if("function"==typeof t[Symbol.iterator])return[...t].flatMap((t=>s(t)));if("object"==typeof t){const e=Object.keys(t),n=e.map((e=>new LE([t[e]]))),i=new EC(e.map(((t,e)=>new CC(String(t),n[e].type)))),[,r]=YN(i,n);return 0===r.length?[new XN(t)]:r}}}return[]},a=t.flatMap((t=>s(t)));if(i=null!==(n=null!=i?i:null===(e=a[0])||void 0===e?void 0:e.schema)&&void 0!==n?n:new EC([]),!(i instanceof EC))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const t of a){if(!(t instanceof XN))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!qN(i,t.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=null!=r?r:lE(this.data)}get data(){return this.batches.map((({data:t})=>t))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=cE(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?SE.visit(new LE(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap((({data:t})=>t)));return new QN(e,n.map((t=>new XN(e,t))))}slice(t,e){const n=this.schema;[t,e]=YM({length:this.numRows},t,e);const i=uE(this.data,this._offsets,t,e);return new QN(n,i.map((t=>new XN(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],i=aE({type:n,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new LE(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new LE([aE({type:new YA,length:this.numRows})]));const r=n.fields.slice(),s=r[t].clone({type:e.type}),a=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[r[t],a[t]]=[s,e],[n,i]=YN(n,a)}return new QN(n,i)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new QN(e,n)}assign(t){const e=this.schema.fields,[n,i]=t.schema.fields.reduce(((t,n,i)=>{const[r,s]=t,a=e.findIndex((t=>t.name===n.name));return~a?s[a]=i:r.push(i),t}),[[],[]]),r=this.schema.assign(t.schema),s=[...e.map(((t,e)=>[e,i[e]])).map((([e,n])=>void 0===n?this.getChildAt(e):t.getChildAt(n))),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new QN(...YN(r,s))}}GN=Symbol.toStringTag,QN[GN]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=dE(fE),t.get=dE(VM.getVisitFn(hA.Struct)),t.set=pE(fM.getVisitFn(hA.Struct)),t.indexOf=mE(vE.getVisitFn(hA.Struct)),t.getByteLength=dE(ME.getVisitFn(hA.Struct)),"Table"))(QN.prototype);let XN=class t{constructor(...t){switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof EC))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=aE({nullCount:0,type:new ST(this.schema.fields),children:this.schema.fields.map((t=>aE({type:t.type,nullCount:0})))})]=t,!(this.data instanceof rE))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=JN(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:n,children:i,length:r}=Object.keys(e).reduce(((t,n,i)=>(t.children[i]=e[n],t.length=Math.max(t.length,e[n].length),t.fields[i]=CC.new({name:n,type:e[n].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),s=new EC(n),a=aE({type:new ST(n),length:r,children:i,nullCount:0});[this.schema,this.data]=JN(s,a.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ZN(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return VM.visit(this.data,t)}set(t,e){return fM.visit(this.data,t,e)}indexOf(t,e){return vE.visit(this.data,t,e)}getByteLength(t){return ME.visit(this.data,t)}[Symbol.iterator](){return SE.visit(new LE([this.data]))}toArray(){return[...this]}concat(...t){return new QN(this.schema,[this,...t])}slice(e,n){const[i]=new LE([this.data]).slice(e,n).data;return new t(this.schema,i)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new LE([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(e,n){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){n||(n=new LE([aE({type:new YA,length:this.numRows})]));const t=i.fields.slice(),s=r.children.slice(),a=t[e].clone({type:n.type});[t[e],s[e]]=[a,n.data[0]],i=new EC(t,new Map(this.schema.metadata)),r=aE({type:new ST(t),children:s})}return new t(i,r)}select(e){const n=this.schema.select(e),i=new ST(n.fields),r=[];for(const t of e){const e=this.schema.fields.findIndex((e=>e.name===t));~e&&(r[e]=this.data.children[e])}return new t(n,aE({type:i,length:this.numRows,children:r}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map((t=>this.data.children[t])).filter(Boolean),r=aE({type:new ST(n.fields),length:this.numRows,children:i});return new t(n,r)}};function JN(t,e,n=e.reduce(((t,e)=>Math.max(t,e.length)),0)){var i;const r=[...t.fields],s=[...e],a=(n+63&-64)>>3;for(const[o,c]of t.fields.entries()){const t=e[o];t&&t.length===n||(r[o]=c.clone({nullable:!0}),s[o]=null!==(i=null==t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==i?i:aE({type:c.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[t.assign(r),aE({type:new ST(r),length:n,children:s})]}function ZN(t,e,n=new Map){for(let i=-1,r=t.length;++i<r;){const r=t[i].type,s=e[i];if(WA.isDictionary(r))if(n.has(r.id)){if(n.get(r.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else s.dictionary&&n.set(r.id,s.dictionary);r.children&&r.children.length>0&&ZN(r.children,s.children,n)}return n}KN=Symbol.toStringTag,XN[KN]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(XN.prototype);class tL extends XN{constructor(t){const e=t.fields.map((t=>aE({type:t.type})));super(t,aE({type:new ST(t.fields),nullCount:0,children:e}))}}var eL,nL;!function(t){t[t.BUFFER=0]="BUFFER"}(eL||(eL={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(nL||(nL={}));class iL{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new iL).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new iL).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):nL.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):eL.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,nL.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,eL.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return iL.startBodyCompression(t),iL.addCodec(t,e),iL.addMethod(t,n),iL.endBodyCompression(t)}}class rL{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}let sL=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}},aL=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new sL).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new rL).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new iL).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}},oL=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new aL).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}};var cL;!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(cL||(cL={}));let lL=class t{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ZE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):cL.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new JE).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,ZE.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,cL.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(e,n,i,r,s,a){return t.startMessage(e),t.addVersion(e,n),t.addHeaderType(e,i),t.addHeader(e,r),t.addBodyLength(e,s),t.addCustomMetadata(e,a),t.endMessage(e)}};var uL=GE;const hL=new class extends LT{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return bC.startNull(e),bC.endNull(e)}visitInt(t,e){return iC.startInt(e),iC.addBitWidth(e,t.bitWidth),iC.addIsSigned(e,t.isSigned),iC.endInt(e)}visitFloat(t,e){return pC.startFloatingPoint(e),pC.addPrecision(e,t.precision),pC.endFloatingPoint(e)}visitBinary(t,e){return sC.startBinary(e),sC.endBinary(e)}visitBool(t,e){return aC.startBool(e),aC.endBool(e)}visitUtf8(t,e){return IC.startUtf8(e),IC.endUtf8(e)}visitDecimal(t,e){return cC.startDecimal(e),cC.addScale(e,t.scale),cC.addPrecision(e,t.precision),cC.addBitWidth(e,t.bitWidth),cC.endDecimal(e)}visitDate(t,e){return oC.startDate(e),oC.addUnit(e,t.unit),oC.endDate(e)}visitTime(t,e){return _C.startTime(e),_C.addUnit(e,t.unit),_C.addBitWidth(e,t.bitWidth),_C.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return xC.startTimestamp(e),xC.addUnit(e,t.unit),void 0!==n&&xC.addTimezone(e,n),xC.endTimestamp(e)}visitInterval(t,e){return mC.startInterval(e),mC.addUnit(e,t.unit),mC.endInterval(e)}visitList(t,e){return yC.startList(e),yC.endList(e)}visitStruct(t,e){return vC.startStruct_(e),vC.endStruct_(e)}visitUnion(t,e){kC.startTypeIdsVector(e,t.typeIds.length);const n=kC.createTypeIdsVector(e,t.typeIds);return kC.startUnion(e),kC.addMode(e,t.mode),kC.addTypeIds(e,n),kC.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return rC.startDictionaryEncoding(e),rC.addId(e,new uL(t.id,0)),rC.addIsOrdered(e,t.isOrdered),void 0!==n&&rC.addIndexType(e,n),rC.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return fC.startFixedSizeBinary(e),fC.addByteWidth(e,t.byteWidth),fC.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return dC.startFixedSizeList(e),dC.addListSize(e,t.listSize),dC.endFixedSizeList(e)}visitMap(t,e){return gC.startMap(e),gC.addKeysSorted(e,t.keysSorted),gC.endMap(e)}};function fL(t){return new SL(t.count,pL(t.columns),mL(t.columns))}function dL(t,e){return(t.children||[]).filter(Boolean).map((t=>CC.fromJSON(t,e)))}function pL(t){return(t||[]).reduce(((t,e)=>{return[...t,new AL(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...pL(e.children)];var n}),[])}function mL(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const i=t[n];i.VALIDITY&&e.push(new IL(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new IL(e.length,i.TYPE.length)),i.OFFSET&&e.push(new IL(e.length,i.OFFSET.length)),i.DATA&&e.push(new IL(e.length,i.DATA.length)),e=mL(i.children,e)}return e}function yL(t){return new Map(Object.entries(t||{}))}function gL(t){return new HA(t.isSigned,t.bitWidth)}function bL(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new YA;case"binary":return new aT;case"utf8":return new oT;case"bool":return new cT;case"list":return new wT((e||[])[0]);case"struct":case"struct_":return new ST(e||[])}switch(n){case"int":{const e=t.type;return new HA(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new nT(aA[e.precision])}case"decimal":{const e=t.type;return new lT(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new uT(oA[e.unit])}case"time":{const e=t.type;return new dT(cA[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new bT(cA[e.unit],e.timezone)}case"interval":{const e=t.type;return new vT(lA[e.unit])}case"union":{const n=t.type;return new kT(sA[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new IT(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new AT(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new TT((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var vL=GE,_L=XE,xL=QE;class wL{constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const n=new wL(0,rA.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case uA.Schema:return EC.fromJSON(t);case uA.RecordBatch:return SL.fromJSON(t);case uA.DictionaryBatch:return kL.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${uA[e]}, type: ${e} }`)}}(t,e),n}static decode(t){t=new xL(GI(t));const e=lL.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),r=e.headerType(),s=new wL(n,i,r);return s._createHeader=function(t,e){return()=>{switch(e){case uA.Schema:return EC.decode(t.header(new TC));case uA.RecordBatch:return SL.decode(t.header(new aL),t.version());case uA.DictionaryBatch:return kL.decode(t.header(new oL),t.version())}throw new Error(`Unrecognized Message type: { name: ${uA[e]}, type: ${e} }`)}}(e,r),s}static encode(t){const e=new _L;let n=-1;return t.isSchema()?n=EC.encode(e,t.header()):t.isRecordBatch()?n=SL.encode(e,t.header()):t.isDictionaryBatch()&&(n=kL.encode(e,t.header())),lL.startMessage(e),lL.addVersion(e,rA.V4),lL.addHeader(e,n),lL.addHeaderType(e,t.headerType),lL.addBodyLength(e,new vL(t.bodyLength,0)),lL.finishMessageBuffer(e,lL.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof EC)return new wL(0,rA.V4,uA.Schema,t);if(t instanceof SL)return new wL(e,rA.V4,uA.RecordBatch,t);if(t instanceof kL)return new wL(e,rA.V4,uA.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===uA.Schema}isRecordBatch(){return this.headerType===uA.RecordBatch}isDictionaryBatch(){return this.headerType===uA.DictionaryBatch}}class SL{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class kL{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class IL{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class AL{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function TL(t,e){const n=[];for(let i,r=-1,s=-1,a=t.childrenLength();++r<a;)(i=t.children(r))&&(n[++s]=CC.decode(i,e));return n}function ML(t){const e=new Map;if(t)for(let n,i,r=-1,s=Math.trunc(t.customMetadataLength());++r<s;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function EL(t){return new HA(t.isSigned(),t.bitWidth())}function CL(t,e){const n=t.typeType();switch(n){case SC.NONE:case SC.Null:return new YA;case SC.Binary:return new aT;case SC.Utf8:return new oT;case SC.Bool:return new cT;case SC.List:return new wT((e||[])[0]);case SC.Struct_:return new ST(e||[])}switch(n){case SC.Int:{const e=t.type(new iC);return new HA(e.isSigned(),e.bitWidth())}case SC.FloatingPoint:{const e=t.type(new pC);return new nT(e.precision())}case SC.Decimal:{const e=t.type(new cC);return new lT(e.scale(),e.precision(),e.bitWidth())}case SC.Date:{const e=t.type(new oC);return new uT(e.unit())}case SC.Time:{const e=t.type(new _C);return new dT(e.unit(),e.bitWidth())}case SC.Timestamp:{const e=t.type(new xC);return new bT(e.unit(),e.timezone())}case SC.Interval:{const e=t.type(new mC);return new vT(e.unit())}case SC.Union:{const n=t.type(new kC);return new kT(n.mode(),n.typeIdsArray()||[],e||[])}case SC.FixedSizeBinary:{const e=t.type(new fC);return new IT(e.byteWidth())}case SC.FixedSizeList:{const n=t.type(new dC);return new AT(n.listSize(),(e||[])[0])}case SC.Map:{const n=t.type(new gC);return new TT((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${SC[n]}" (${n})`)}CC.encode=function(t,e){let n=-1,i=-1,r=-1;const s=e.type;let a=e.typeId;WA.isDictionary(s)?(a=s.dictionary.typeId,r=hL.visit(s,t),i=hL.visit(s.dictionary,t)):i=hL.visit(s,t);const o=(s.children||[]).map((e=>CC.encode(t,e))),c=AC.createChildrenVector(t,o),l=e.metadata&&e.metadata.size>0?AC.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return JE.startKeyValue(t),JE.addKey(t,i),JE.addValue(t,r),JE.endKeyValue(t)}))):-1;e.name&&(n=t.createString(e.name));AC.startField(t),AC.addType(t,i),AC.addTypeType(t,a),AC.addChildren(t,c),AC.addNullable(t,!!e.nullable),-1!==n&&AC.addName(t,n);-1!==r&&AC.addDictionary(t,r);-1!==l&&AC.addCustomMetadata(t,l);return AC.endField(t)},CC.decode=function(t,e){let n,i,r,s,a,o;e&&(o=t.dictionary())?e.has(n=o.id().low)?(s=(s=o.indexType())?EL(s):new QA,a=new CT(e.get(n),s,n,o.isOrdered()),i=new CC(t.name(),a,t.nullable(),ML(t))):(s=(s=o.indexType())?EL(s):new QA,e.set(n,r=CL(t,TL(t,e))),a=new CT(r,s,n,o.isOrdered()),i=new CC(t.name(),a,t.nullable(),ML(t))):(r=CL(t,TL(t,e)),i=new CC(t.name(),r,t.nullable(),ML(t)));return i||null},CC.fromJSON=function(t,e){let n,i,r,s,a,o;return e&&(s=t.dictionary)?e.has(n=s.id)?(i=(i=s.indexType)?gL(i):new QA,o=new CT(e.get(n),i,n,s.isOrdered),r=new CC(t.name,o,t.nullable,yL(t.customMetadata))):(i=(i=s.indexType)?gL(i):new QA,e.set(n,a=bL(t,dL(t,e))),o=new CT(a,i,n,s.isOrdered),r=new CC(t.name,o,t.nullable,yL(t.customMetadata))):(a=bL(t,dL(t,e)),r=new CC(t.name,a,t.nullable,yL(t.customMetadata))),r||null},EC.encode=function(t,e){const n=e.fields.map((e=>CC.encode(t,e)));TC.startFieldsVector(t,n.length);const i=TC.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?TC.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return JE.startKeyValue(t),JE.addKey(t,i),JE.addValue(t,r),JE.endKeyValue(t)}))):-1;TC.startSchema(t),TC.addFields(t,i),TC.addEndianness(t,NL?tC.Little:tC.Big),-1!==r&&TC.addCustomMetadata(t,r);return TC.endSchema(t)},EC.decode=function(t,e=new Map){const n=function(t,e){const n=[];for(let i,r=-1,s=-1,a=t.fieldsLength();++r<a;)(i=t.fields(r))&&(n[++s]=CC.decode(i,e));return n}(t,e);return new EC(n,ML(t),e)},EC.fromJSON=function(t,e=new Map){return new EC(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>CC.fromJSON(t,e)))}(t,e),yL(t.customMetadata),e)},SL.encode=function(t,e){const n=e.nodes||[],i=e.buffers||[];aL.startNodesVector(t,n.length);for(const e of n.slice().reverse())AL.encode(t,e);const r=t.endVector();aL.startBuffersVector(t,i.length);for(const e of i.slice().reverse())IL.encode(t,e);const s=t.endVector();return aL.startRecordBatch(t),aL.addLength(t,new vL(e.length,0)),aL.addNodes(t,r),aL.addBuffers(t,s),aL.endRecordBatch(t)},SL.decode=function(t,e=rA.V4){if(null!==t.compression())throw new Error("Record batch compression not implemented");return new SL(t.length(),function(t){const e=[];for(let n,i=-1,r=-1,s=t.nodesLength();++i<s;)(n=t.nodes(i))&&(e[++r]=AL.decode(n));return e}(t),function(t,e){const n=[];for(let i,r=-1,s=-1,a=t.buffersLength();++r<a;)(i=t.buffers(r))&&(e<rA.V4&&(i.bb_pos+=8*(r+1)),n[++s]=IL.decode(i));return n}(t,e))},SL.fromJSON=fL,kL.encode=function(t,e){const n=SL.encode(t,e.data);return oL.startDictionaryBatch(t),oL.addId(t,new vL(e.id,0)),oL.addIsDelta(t,e.isDelta),oL.addData(t,n),oL.endDictionaryBatch(t)},kL.decode=function(t,e=rA.V4){return new kL(SL.decode(t.data(),e),t.id(),t.isDelta())},kL.fromJSON=function(t){return new kL(fL(t.data),t.id,t.isDelta)},AL.encode=function(t,e){return sL.createFieldNode(t,new vL(e.length,0),new vL(e.nullCount,0))},AL.decode=function(t){return new AL(t.length(),t.nullCount())},IL.encode=function(t,e){return rL.createBuffer(t,new vL(e.offset,0),new vL(e.length,0))},IL.decode=function(t){return new IL(t.offset(),t.length())};const NL=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),LL="ARROW1",OL=new Uint8Array(6);for(let t=0;t<6;t+=1)OL[t]=LL.codePointAt(t);OL.length;class DL extends LT{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=t=>t.flatMap((t=>Array.isArray(t)?e(t):t instanceof XN?t.data.children:t.data)),n=new DL;return n.visitMany(e(t)),n}visit(t){if(t instanceof LE)return this.visitMany(t.data),this;const{type:e}=t;if(!WA.isDictionary(e)){const{length:n,nullCount:i}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");WA.isNull(e)||$L.call(this,i<=0?new Uint8Array(0):ZM(t.offset,n,t.nullBitmap)),this.nodes.push(new AL(n,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function $L(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new IL(this._byteLength,e)),this._byteLength+=e,this}function BL(t){return $L.call(this,t.values.subarray(0,t.length*t.stride))}function FL(t){const{length:e,values:n,valueOffsets:i}=t,r=i[0],s=i[e],a=Math.min(s-r,n.byteLength-r);return $L.call(this,ZI(-i[0],e,i)),$L.call(this,n.subarray(r,r+a)),this}function PL(t){const{length:e,valueOffsets:n}=t;return n&&$L.call(this,ZI(n[0],e,n)),this.visit(t.children[0])}function VL(t){return this.visitMany(t.type.children.map(((e,n)=>t.children[n])).filter(Boolean))[0]}DL.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?$L.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?$L.call(this,ZM(t.offset,t.length,e)):$L.call(this,tE(t.values))},DL.prototype.visitInt=BL,DL.prototype.visitFloat=BL,DL.prototype.visitUtf8=FL,DL.prototype.visitBinary=FL,DL.prototype.visitFixedSizeBinary=BL,DL.prototype.visitDate=BL,DL.prototype.visitTimestamp=BL,DL.prototype.visitTime=BL,DL.prototype.visitDecimal=BL,DL.prototype.visitList=PL,DL.prototype.visitStruct=VL,DL.prototype.visitUnion=function(t){const{type:e,length:n,typeIds:i,valueOffsets:r}=t;if($L.call(this,i),e.mode===sA.Sparse)return VL.call(this,t);if(e.mode===sA.Dense){if(t.offset<=0)return $L.call(this,r),VL.call(this,t);{const s=i.reduce(((t,e)=>Math.max(t,e)),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),c=new Int32Array(n),l=ZI(-r[0],n,r);for(let t,e,r=-1;++r<n;)-1===(e=o[t=i[r]])&&(e=o[t]=l[t]),c[r]=l[r]-e,++a[t];$L.call(this,c);for(let i,r=-1,s=e.children.length;++r<s;)if(i=t.children[r]){const t=e.typeIds[r],s=Math.min(n,a[t]);this.visit(i.slice(o[t],s))}}}return this},DL.prototype.visitInterval=BL,DL.prototype.visitFixedSizeList=PL,DL.prototype.visitMap=PL;class UL extends UC{constructor(t){super(),this._position=0,this._started=!1,this._sink=new jC,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,BI(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return FI(t)?t.then((t=>this.writeAll(t))):VI(t)?qL(this,t):zL(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){return t===this._sink||t instanceof jC?this._sink=t:(this._sink=new jC,t&&(t=>BI(t)&&$I(t.abort)&&$I(t.getWriter)&&!RI(t))(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>BI(t)&&$I(t.end)&&$I(t.write)&&(t=>"boolean"==typeof t)(t.writable)&&!RI(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&qN(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof QN&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof XN&&!(e=t.schema))return this.finish()&&void 0;if(e&&!qN(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof XN?t instanceof tL||this._writeRecordBatch(t):t instanceof QN?this.writeAll(t.batches):PI(t)&&this.writeAll(t)}_writeMessage(t,e=8){const n=e-1,i=wL.encode(t),r=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=r+s+n&~n,o=a-r-s;return t.headerType===uA.RecordBatch?this._recordBatchBlocks.push(new PC(a,t.bodyLength,this._position)):t.headerType===uA.DictionaryBatch&&this._dictionaryBlocks.push(new PC(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),r>0&&this._write(i),this._writePadding(o)}_write(t){if(this._started){const e=GI(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(wL.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(OL)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:i,buffers:r}=DL.assemble(t),s=new SL(t.numRows,n,i),a=wL.from(s,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(r)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:r,bufferRegions:s,buffers:a}=DL.assemble(new LE([t])),o=new SL(t.length,r,s),c=new kL(o,e,n),l=wL.from(c,i);return this._writeMessage(l)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,n,i;for(let r=-1,s=t.length;++r<s;)(e=t[r])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=null==n?void 0:n.slice(t)).length>0)for(const i of n.data)this._writeDictionaryBatch(i,e,t>0),t+=i.length}return this}}class RL extends UL{static writeAll(t,e){const n=new RL(e);return FI(t)?t.then((t=>n.writeAll(t))):VI(t)?qL(n,t):zL(n,t)}}class jL extends UL{static writeAll(t){const e=new jL;return FI(t)?t.then((t=>e.writeAll(t))):VI(t)?qL(e,t):zL(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=BC.encode(new BC(t,rA.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function zL(t,e){let n=e;e instanceof QN&&(n=e.batches,t.reset(void 0,e.schema));for(const e of n)t.write(e);return t.finish()}function qL(t,e){var n,i,r,s;return vI(this,void 0,void 0,(function*(){try{for(n=kI(e);!(i=yield n.next()).done;){const e=i.value;t.write(e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return t.finish()}))}function WL(t,e=1){return(t*e+63&-64||64)/e}function YL(t,e,n=t.BYTES_PER_ELEMENT){return new t(WL(e,n))}function HL(t){return t instanceof rE?t:new rE(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}const GL=new TextEncoder;const KL=GL.encodeInto?function(t,e,n){return GL.encodeInto(n,t.subarray(e)).written}:function(t,e,n){const i=GL.encode(n);return t.set(i,e),i.length};function QL(t,e){const n=YL(t.ArrayType,e);return{set(t,e){n[e]=t},data:()=>({type:t,length:e,buffers:[null,n]})}}function XL(t,e){const n=YL(t.ArrayType,e/8);return{set(t,e){t&&(n[e>>3]|=1<<e%8)},data:()=>({type:t,length:e,buffers:[null,n]})}}function JL(t,e){const n=YL(t.ArrayType,e);return{set(t,e){n[e]=t/864e5|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function ZL(t,e){const n=YL(t.ArrayType,e<<1);return{set(t,e){const i=e<<1;n[i]=t%4294967296|0,n[i+1]=t/4294967296|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function tO(t,e){const n=[],i=YL(t.indices.ArrayType,e),r=Object.create(null);let s=-1,a=0;return{set(t,e){const o=String(t);let c=r[o];void 0===c&&(a+=o.length,r[o]=c=++s,n.push(o)),i[e]=c},data:()=>({type:t,length:e,buffers:[null,i],dict:eO(t.dictionary,n,a)})}}function eO(t,e,n){const i=function(t,e,n){const i=YL(Int32Array,e+1),r=YL(Uint8Array,3*n);let s=0;return{set(t,e){s+=KL(r,s,t),i[e+1]=s},data:()=>{const n=WL(s),a=r.length>n?r.subarray(0,n):r;return{type:t,length:e,buffers:[i,a]}}}}(t,e.length,n);return e.forEach(i.set),function(t){return new LE([HL(t)])}(i.data())}function nO(t,e,n=!0){let i;switch(t.typeId){case hA.Int:i=t.bitWidth<64?QL:null;break;case hA.Float:i=t.precision>0?QL:null;break;case hA.Dictionary:i=t.dictionary.typeId===hA.Utf8&&t.indices.typeId===hA.Int&&t.indices.bitWidth<64?tO:null;break;case hA.Bool:i=XL;break;case hA.Date:i=t.unit?ZL:JL}return null==i?function(t){const e=WN({type:t,nullValues:[null,void 0]});return{set(t,n){e.set(n,t)},data:()=>e.finish().flush()}}(t):n?function(t,e){const n=YL(Uint8Array,e/8);let i=0;return{set(e,r){null==e?++i:(t.set(e,r),n[r>>3]|=1<<r%8)},data:()=>{const e=t.data();return i&&(e.nulls=i,e.buffers[2]=n),e}}}(i(t,e),e):i(t,e)}function iO(t,e,n,i,r=!0){const s=nO(i,t,r);return e(n,s.set),HL(s.data())}function rO(t){if(t instanceof WA||null==t)return t;switch(t){case hA.Binary:return new aT;case hA.Bool:return new cT;case hA.DateDay:return new hT;case hA.DateMillisecond:case hA.Date:return new fT;case hA.Dictionary:return new CT(new oT,new QA);case hA.Float16:return new iT;case hA.Float32:return new rT;case hA.Float64:case hA.Float:return new sT;case hA.Int8:return new GA;case hA.Int16:return new KA;case hA.Int32:case hA.Int:return new QA;case hA.Int64:return new XA;case hA.IntervalDayTime:return new _T;case hA.Interval:case hA.IntervalYearMonth:return new xT;case hA.Null:return new YA;case hA.TimeMicrosecond:return new yT;case hA.TimeMillisecond:case hA.Time:return new mT;case hA.TimeNanosecond:return new gT;case hA.TimeSecond:return new pT;case hA.Uint8:return new JA;case hA.Uint16:return new ZA;case hA.Uint32:return new tT;case hA.Uint64:return new eT;case hA.Utf8:return new oT;default:wS(`Unsupported type code: ${bk(t)}. Use a data type constructor instead?`)}}function sO(t,e){const n=aO();return t(e,n.add),n}function aO(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,null==e)return void++t.nulls;const n=typeof e;if("string"===n)++t.strings;else if("number"===n)++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if("boolean"===n)++t.bools;else if("object"===n)if(ES(e))++t.dates,0===(i=e).getUTCHours()&&0===i.getUTCMinutes()&&0===i.getUTCSeconds()&&0===i.getUTCMilliseconds()&&++t.utcdays;else if(jS(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const n=t.array_prof||(t.array_prof=aO());e.forEach(n.add)}else{++t.structs;const n=t.struct_prof||(t.struct_prof={});for(const t in e){(n[t]||(n[t]=aO())).add(e[t])}}else"bigint"===n&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e));var i},type:()=>rO(function(t){const e=t.count-t.nulls;if(0===e)return hA.Null;if(t.ints===e){const e=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?e>=2**31?hA.Float64:e<128?hA.Int8:e<32768?hA.Int16:hA.Int32:e>=2**32?hA.Float64:e<256?hA.Uint8:e<65536?hA.Uint16:hA.Uint32}if(t.nums===e)return hA.Float64;if(t.bigints===e){const e=-t.min>t.max?-t.min-1n:t.max;return t.min<0?e<2**63?hA.Int64:wS(`BigInt exceeds 64 bits: ${e}`):t.max<2**64?hA.Uint64:wS(`BigInt exceeds 64 bits: ${t.max}`)}if(t.bools===e)return hA.Bool;if(t.utcdays===e)return hA.DateDay;if(t.dates===e)return hA.DateMillisecond;if(t.arrays===e){const e=CC.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new AT(t.minlen,e):new wT(e)}if(t.structs===e){const e=t.struct_prof;return new ST(Object.keys(e).map((t=>CC.new(t,e[t].type(),!0))))}if(t.strings>0)return hA.Dictionary;wS("Type inference failure")}(t))};return t}function oO(t,e,n,i,r,s=!0){if(!(r=rO(r))){const t=sO(i,e);s=t.nulls>0,r=t.type()}return iO(n,i,e,r,s)}function cO(t,e,n,i,r,s=!0){r=rO(r);const a=t.column(e),o=!(t.isFiltered()||t.isOrdered()),c=(l=a)instanceof LE?l:l.vector instanceof LE?l.vector:null;var l;if(c&&o&&lO(c.type,r))return c;const u=a.data;if(RS(u)){const t=function(t){const e={Float32Array:rT,Float64Array:sT,Int8Array:GA,Int16Array:KA,Int32Array:QA,Uint8Array:JA,Uint16Array:ZA,Uint32Array:tT,BigInt64Array:XA,BigUint64Array:eT},n=e[t.constructor.name];return n?new n:null}(u);if(o&&t&&lO(t,r))return function(t,e){const n=t.length,i=WL(n,t.BYTES_PER_ELEMENT);let r=t;return n!==i&&(r=new t.constructor(i),r.set(t)),HL({type:e,length:n,buffers:[null,r]})}(u,t);r=r||t,s=!1}if(!r){const t=sO(i,a);s=t.nulls>0,r=t.type()}return iO(n,i,a,r,s)}function lO(t,e){return!t||!e||t.compareTo(e)}function uO(t,e,n){const i=Math.min(t.length,n+e);return(e,r)=>{for(let s=n;s<i;++s)r(t[s][e],s)}}function hO(t,e,n){const i=0===n&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(r,s)=>{let a=-1;i&&jS(r.data)?r.data.forEach(s):t.scan((t=>s(r.get(t),++a)),!0,e,n)}}const fO=()=>wS("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function dO(t,e={}){const{types:n={}}=e,{dataFrom:i,names:r,nrows:s,scan:a}=function(t,e){const{columns:n,limit:i=1/0,offset:r=0}=e,s=kS(n)?n(t):bS(n)?n:null;if(bS(t))return{dataFrom:oO,names:s||Object.keys(t[0]),nrows:Math.min(i,t.length-r),scan:uO(t,i,r)};if(function(t){return t&&kS(t.reify)}(t))return{dataFrom:cO,names:s||t.columnNames(),nrows:Math.min(i,t.numRows()-r),scan:hO(t,i,r)};wS("Unsupported input data type")}(t,e),o={};r.forEach((e=>{const r=i(t,e,s,a,n[e]);r.length!==s&&wS("Column length mismatch"),o[e]=r}));return new(function(){try{return QN}catch(t){fO()}}())(o)}function pO(t,e={}){const{format:n,...i}=e;if(!["stream","file"].includes(n||"stream"))throw Error("Unrecognised output format");return function(t,e="stream"){return("stream"===e?RL:jL).writeAll(t).toUint8Array(!0)}(dO(t,i),n)}function mO(t,e){return kS(e)?e(t):e||t.columnNames()}function yO(t,e,n){const i=n.format||{},r=n.align||{},s={},a={};return e.forEach((e=>{const o=function(t,e={}){let n=0,i=0,r=0,s=0,a=0,o=0;return t((t=>{if(++n,null==t)return void++i;const e=typeof t;if("object"===e&&ES(t))++r,0===(c=t).getUTCHours()&&0===c.getUTCMinutes()&&0===c.getUTCSeconds()&&0===c.getUTCMilliseconds()&&++s;else if("number"===e&&(++a,t==t&&(0|t)!==t)){const e=t+"",n=e.indexOf(".");if(n>=0){const t=e.indexOf("e"),i=t>0?t:e.length;o=Math.max(o,i-n-1)}}var c})),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,e.maxdigits||6)}}}(function(t,e){const n=t.column(e);return e=>t.scan((t=>e(n.get(t))))}(t,e),n);a[e]=r[e]||o.align,s[e]=i[e]||o.format})),{align:a,format:s}}function gO(t,e,n=100,i,r){const s=t.data(),a=e.length;t.scan((t=>{r.row(t);for(let n=0;n<a;++n){const i=e[n];r.cell(s[e[n]].get(t),i,n)}}),!0,n,i)}function bO(t,e={}){if(kS(e))return e(t)+"";const n=typeof t;if("object"===n){if(ES(t))return e.utc?XS(t):QS(t);{const n=JSON.stringify(t,((t,e)=>RS(e)?Array.from(e):e)),i=e.maxlen||30;return n.length>i?n.slice(0,28)+"…"+("["===n[0]?"]":"}"):n}}if("number"===n){const n=e.digits||0;let i;return 0!==t&&((i=Math.abs(t))>=1e18||i<Math.pow(10,-n))?t.toExponential(n):t.toFixed(n)}return t+""}function vO(t,e,n={}){for(const i in t)n[i]=e(t[i],i);return n}function _O(t,e={}){const n=mO(t,e.columns),{align:i,format:r}=yO(t,n,e),s=function(t){return vO(t.style,(t=>kS(t)?t:()=>t))}(e),a=e.null,o=(t,e)=>(t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))(bO(t,e)),c=a?(t,e)=>null==t?a(t):o(t,e):o;let l=-1,u=-1;const h=(t,e,n)=>{const r=n?(t=>"c"===t?"center":"r"===t?"right":"left")(i[e]):"",a=s[t]&&s[t](e,u,l)||"",o=(r?`text-align: ${r};`+(a?" ":""):"")+a;return`<${t}${o?` style="${o}"`:""}>`};let f=h("table")+h("thead")+h("tr",l)+n.map((t=>`${h("th",t,1)}${t}</th>`)).join("")+"</tr></thead>"+h("tbody");return gO(t,n,e.limit,e.offset,{row(t){l=t,f+=(++u?"</tr>":"")+h("tr")},cell(t,e){f+=h("td",e,1)+c(t,r[e])+"</td>"}}),f+"</tr></tbody></table>"}const xO=t=>ES(t)?XS(t,!0):t;function wO(t,e){for(const[n,i]of pI(e))t.set(n,i);return t}function SO(t,e,n=new Map){return LS(e=SS(e)?t.columnName(e):e)?n.set(e,e):bS(e)?e.forEach((e=>SO(t,e,n))):kS(e)?SO(t,e(t),n):CS(e)?wO(n,e):wS(`Invalid column selection: ${bk(e)}`),n}function kO(t,e){return t.toObject=e,t}function IO(t){return bS(t)?t.map(IO):t&&t.toObject?t.toObject():t}function AO(){return kO((t=>t.columnNames()),(()=>({all:[]})))}function TO(...t){return t=t.flat(),kO((e=>{const n=SO(e,t);return e.columnNames((t=>!n.has(t)))}),(()=>({not:IO(t)})))}function MO(t){return RS(t.data)?t.data.constructor:Array}class EO extends AS{static from(t,e){return new EO(OS(t,e),e)}static new(t,e){if(t instanceof EO)return t;const n={},i=[];for(const[e,r]of pI(t))n[e]=r,i.push(e);return new EO(n,e||i)}constructor(t,e,n,i,r,s){vO(t,MS,t);super(e=e||Object.keys(t),e.length?t[e[0]].length:0,t,n,i,r,s)}create({data:t,names:e,filter:n,groups:i,order:r}){const s=void 0!==n?n:this.mask();return new EO(t||this._data,e||(t?null:this._names),s,void 0!==i?i:function(t,e){if(!t||!e)return t;const{keys:n,rows:i,size:r}=t,s=new Int32Array(r);e.scan((t=>s[n[t]]=1));const a=s.reduce(((t,e)=>t+e),0);if(a===r)return t;const o=Array(a);let c=0;for(let t=0;t<r;++t)s[t]&&(o[s[t]=c++]=i[t]);const l=new Uint32Array(n.length);return e.scan((t=>l[t]=s[n[t]])),{...t,keys:l,rows:o,size:c}}(this._group,n&&s),void 0!==r?r:this._order,this._params)}assign(...t){const e=this.numRows(),n=this.reify(),i=FS(n).groupby(n.groups());return t.forEach((t=>{(t=EO.new(t)).numRows()!==e&&wS("Assign row counts do not match"),(t=t.reify()).columnNames((e=>i.add(e,t.column(e))))})),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,e=Array){const n=this.column(t),i=new e(this.numRows());let r=-1;return this.scan((t=>i[++r]=n.get(t)),!0),i}get(t,e=0){const n=this.column(t);return this.isFiltered()||this.isOrdered()?n.get(this.indices()[e]):n.get(e)}getter(t){const e=this.column(t),n=this.isFiltered()||this.isOrdered()?this.indices():null;return n?t=>e.get(n[t]):e?t=>e.get(t):wS(`Unrecognized column: ${t}`)}object(t=0){return CO(this)(t)}objects(t={}){const{grouped:e,limit:n,offset:i}=t,r=bI(SO(this,t.columns||AO())),s=[];if(this.scan(((t,e)=>s.push(r(t,e))),!0,n,i),e&&this.isGrouped()){const t=[];return this.scan((e=>t.push(e)),!0,n,i),Mk(this,t,s,e)}return s}*[Symbol.iterator](){const t=CO(this),e=this.numRows();for(let n=0;n<e;++n)yield t(n)}reify(t){const e=t?t.length:this.numRows(),n=this._names;let i,r;if(!t&&!this.isOrdered()){if(!this.isFiltered())return this;e===this.totalRows()&&(i=this.data())}if(!i){const s=t?e=>t.forEach(e):t=>this.scan(t,!0),a=n.length;i={};for(let t=0;t<a;++t){const r=n[t],a=this.column(r),o=i[r]=new(MO(a))(e);let c=-1;s((t=>o[++c]=a.get(t)))}this.isGrouped()&&(r=function(t,e,n,i){const{keys:r,rows:s,size:a}=t;let o=s,c=a,l=null;if(n){l=new Int32Array(a),e((t=>l[r[t]]=1));const t=l.reduce(((t,e)=>t+e),0);if(t!==a){o=Array(t),c=0;for(let t=0;t<a;++t)l[t]&&(o[l[t]=c++]=s[t])}}let u=-1;const h=new Uint32Array(i);return e(c!==a?t=>h[++u]=l[r[t]]:t=>h[++u]=r[t]),{...t,keys:h,rows:o,size:c}}(this.groups(),s,!!t,e))}return this.create({data:i,names:n,groups:r,filter:null,order:null})}transform(...t){return t.flat().reduce(((t,e)=>e(t)),this)}toArrow(t){return dO(this,t)}toArrowBuffer(t){return pO(this,t)}toCSV(t){return function(t,e={}){const n=mO(t,e.columns),i=e.format||{},r=e.delimiter||",",s=new RegExp(`["${r}\n\r]`),a=t=>null==t?"":ES(t)?XS(t,!0):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t,o=n.map(a);let c="";return gO(t,n,e.limit||1/0,e.offset,{row(){c+=o.join(r)+"\n"},cell(t,e,n){o[n]=a(i[e]?i[e](t):t)}}),c+o.join(r)}(this,t)}toHTML(t){return _O(this,t)}toJSON(t){return function(t,e={}){const n=function(t,e=!0,n=!1){return void 0===t||t?e:n}(e.schema),i=e.format||{},r=mO(t,e.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map((t=>({name:t}))))+'},"data":{'),r.forEach(((n,r)=>{s+=(r?",":"")+JSON.stringify(n)+":[";const a=t.column(n),o=i[n]||xO;let c=-1;t.scan((t=>{const e=a.get(t);s+=(++c?",":"")+JSON.stringify(o(e))}),!0,e.limit,e.offset),s+="]"})),s+"}"+(n?"}":"")}(this,t)}toMarkdown(t){return function(t,e={}){const n=mO(t,e.columns),{align:i,format:r}=yO(t,n,e),s=t=>t.replace(/\|/g,"\\|");let a="|"+n.map(s).join("|")+"|\n|"+n.map((t=>(t=>"c"===t?":-:":"r"===t?"-:":":-")(i[t]))).join("|")+"|";return gO(t,n,e.limit,e.offset,{row(){a+="\n|"},cell(t,e){a+=s(bO(t,r[e]))+"|"}}),a+"\n"}(this,t)}}function CO(t){let e=t._builder;if(!e){const n=bI(t.columnNames()),i=t.data();if(t.isOrdered()||t.isFiltered()){const r=t.indices();e=t=>n(r[t],i)}else e=t=>n(t,i);t._builder=e}return e}class NO{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function LO(t,e,n,i){const r=n[t.type]||n.Default;if(r&&!1===r(t,e,i))return;const s=VO[t.type];s&&s(t,e,n)}const OO=(t,e,n)=>{LO(t.argument,e,n,t)},DO=(t,e,n)=>{LO(t.left,e,n,t),LO(t.right,e,n,t)},$O=(t,e,n)=>{LO(t.test,e,n,t),LO(t.consequent,e,n,t),t.alternate&&LO(t.alternate,e,n,t)},BO=(t,e,n)=>{PO(t.params,e,n,t),LO(t.body,e,n,t)},FO=(t,e,n)=>{LO(t.callee,e,n,t),PO(t.arguments,e,n,t)},PO=(t,e,n,i)=>{t.forEach((t=>LO(t,e,n,i)))},VO={TemplateLiteral:(t,e,n)=>{PO(t.expressions,e,n,t),PO(t.quasis,e,n,t)},MemberExpression:(t,e,n)=>{LO(t.object,e,n,t),LO(t.property,e,n,t)},CallExpression:FO,NewExpression:FO,ArrayExpression:(t,e,n)=>{PO(t.elements,e,n,t)},AssignmentExpression:DO,AwaitExpression:OO,BinaryExpression:DO,LogicalExpression:DO,UnaryExpression:OO,UpdateExpression:OO,ConditionalExpression:$O,ObjectExpression:(t,e,n)=>{PO(t.properties,e,n,t)},Property:(t,e,n)=>{LO(t.key,e,n,t),LO(t.value,e,n,t)},ArrowFunctionExpression:BO,FunctionExpression:BO,FunctionDeclaration:BO,VariableDeclaration:(t,e,n)=>{PO(t.declarations,e,n,t)},VariableDeclarator:(t,e,n)=>{LO(t.id,e,n,t),LO(t.init,e,n,t)},SpreadElement:(t,e,n)=>{LO(t.argument,e,n,t)},BlockStatement:(t,e,n)=>{PO(t.body,e,n,t)},ExpressionStatement:(t,e,n)=>{LO(t.expression,e,n,t)},IfStatement:$O,ForStatement:(t,e,n)=>{LO(t.init,e,n,t),LO(t.test,e,n,t),LO(t.update,e,n,t),LO(t.body,e,n,t)},WhileStatement:(t,e,n)=>{LO(t.test,e,n,t),LO(t.body,e,n,t)},DoWhileStatement:(t,e,n)=>{LO(t.body,e,n,t),LO(t.test,e,n,t)},SwitchStatement:(t,e,n)=>{LO(t.discriminant,e,n,t),PO(t.cases,e,n,t)},SwitchCase:(t,e,n)=>{t.test&&LO(t.test,e,n,t),PO(t.consequent,e,n,t)},ReturnStatement:OO,Program:(t,e,n)=>{LO(t.body[0],e,n,t)}};function UO(t){delete t.start,delete t.end,delete t.optional}function RO(t){UO(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}function jO(t,e){return e&&e.type===t}const zO="Escaped functions are not valid as rollup or pivot values.";function qO(t,e,n){t.aggronly&&wS(zO);const i="(row,data)=>fn("+gI(t.table.columnNames())+",$)";return{escape:hI.escape(i,(r=e.expr,kS(r)?r:()=>r),n)};var r}var WO=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],YO=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,3104,541,1507,4938,6,4191],HO="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",GO={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},KO="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",QO={5:KO,"5module":KO+" export import",6:KO+" const class extends export import super"},XO=/^in(stanceof)?$/,JO=new RegExp("["+HO+"]"),ZO=new RegExp("["+HO+"‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿]");function tD(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}return!1}function eD(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&JO.test(String.fromCharCode(t)):!1!==e&&tD(t,YO)))}function nD(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&ZO.test(String.fromCharCode(t)):!1!==e&&(tD(t,YO)||tD(t,WO)))))}var iD=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function rD(t,e){return new iD(t,{beforeExpr:!0,binop:e})}var sD={beforeExpr:!0},aD={startsExpr:!0},oD={};function cD(t,e){return void 0===e&&(e={}),e.keyword=t,oD[t]=new iD(t,e)}var lD={num:new iD("num",aD),regexp:new iD("regexp",aD),string:new iD("string",aD),name:new iD("name",aD),privateId:new iD("privateId",aD),eof:new iD("eof"),bracketL:new iD("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new iD("]"),braceL:new iD("{",{beforeExpr:!0,startsExpr:!0}),braceR:new iD("}"),parenL:new iD("(",{beforeExpr:!0,startsExpr:!0}),parenR:new iD(")"),comma:new iD(",",sD),semi:new iD(";",sD),colon:new iD(":",sD),dot:new iD("."),question:new iD("?",sD),questionDot:new iD("?."),arrow:new iD("=>",sD),template:new iD("template"),invalidTemplate:new iD("invalidTemplate"),ellipsis:new iD("...",sD),backQuote:new iD("`",aD),dollarBraceL:new iD("${",{beforeExpr:!0,startsExpr:!0}),eq:new iD("=",{beforeExpr:!0,isAssign:!0}),assign:new iD("_=",{beforeExpr:!0,isAssign:!0}),incDec:new iD("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new iD("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:rD("||",1),logicalAND:rD("&&",2),bitwiseOR:rD("|",3),bitwiseXOR:rD("^",4),bitwiseAND:rD("&",5),equality:rD("==/!=/===/!==",6),relational:rD("</>/<=/>=",7),bitShift:rD("<</>>/>>>",8),plusMin:new iD("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:rD("%",10),star:rD("*",10),slash:rD("/",10),starstar:new iD("**",{beforeExpr:!0}),coalesce:rD("??",1),_break:cD("break"),_case:cD("case",sD),_catch:cD("catch"),_continue:cD("continue"),_debugger:cD("debugger"),_default:cD("default",sD),_do:cD("do",{isLoop:!0,beforeExpr:!0}),_else:cD("else",sD),_finally:cD("finally"),_for:cD("for",{isLoop:!0}),_function:cD("function",aD),_if:cD("if"),_return:cD("return",sD),_switch:cD("switch"),_throw:cD("throw",sD),_try:cD("try"),_var:cD("var"),_const:cD("const"),_while:cD("while",{isLoop:!0}),_with:cD("with"),_new:cD("new",{beforeExpr:!0,startsExpr:!0}),_this:cD("this",aD),_super:cD("super",aD),_class:cD("class",aD),_extends:cD("extends",sD),_export:cD("export"),_import:cD("import",aD),_null:cD("null",aD),_true:cD("true",aD),_false:cD("false",aD),_in:cD("in",{beforeExpr:!0,binop:7}),_instanceof:cD("instanceof",{beforeExpr:!0,binop:7}),_typeof:cD("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:cD("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:cD("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},uD=/\r\n?|\n|\u2028|\u2029/,hD=new RegExp(uD.source,"g");function fD(t){return 10===t||13===t||8232===t||8233===t}function dD(t,e,n){void 0===n&&(n=t.length);for(var i=e;i<n;i++){var r=t.charCodeAt(i);if(fD(r))return i<n-1&&13===r&&10===t.charCodeAt(i+1)?i+2:i+1}return-1}var pD=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,mD=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,yD=Object.prototype,gD=yD.hasOwnProperty,bD=yD.toString,vD=Object.hasOwn||function(t,e){return gD.call(t,e)},_D=Array.isArray||function(t){return"[object Array]"===bD.call(t)};function xD(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function wD(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}var SD=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,kD=function(t,e){this.line=t,this.column=e};kD.prototype.offset=function(t){return new kD(this.line,this.column+t)};var ID=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function AD(t,e){for(var n=1,i=0;;){var r=dD(t,i,e);if(r<0)return new kD(n,e-i);++n,i=r}}var TD={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},MD=!1;function ED(t){var e={};for(var n in TD)e[n]=t&&vD(t,n)?t[n]:TD[n];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!MD&&"object"==typeof console&&console.warn&&(MD=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),t&&null!=t.allowHashBang||(e.allowHashBang=e.ecmaVersion>=14),_D(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return _D(e.onComment)&&(e.onComment=function(t,e){return function(n,i,r,s,a,o){var c={type:n?"Block":"Line",value:i,start:r,end:s};t.locations&&(c.loc=new ID(this,a,o)),t.ranges&&(c.range=[r,s]),e.push(c)}}(e,e.onComment)),e}var CD=256;function ND(t,e){return 2|(t?4:0)|(e?8:0)}var LD=function(t,e,n){this.options=t=ED(t),this.sourceFile=t.sourceFile,this.keywords=xD(QO[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";!0!==t.allowReserved&&(i=GO[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(i+=" await")),this.reservedWords=xD(i);var r=(i?i+" ":"")+GO.strict;this.reservedWordsStrict=xD(r),this.reservedWordsStrictBind=xD(r+" "+GO.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(uD).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=lD.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},OD={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};LD.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},OD.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},OD.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},OD.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},OD.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||e.flags&CD)return!1;if(2&e.flags)return(4&e.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},OD.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(64&e)>0||n||this.options.allowSuperOutsideMethod},OD.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},OD.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},OD.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(258&e)>0||n},OD.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&CD)>0},LD.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,i=0;i<t.length;i++)n=t[i](n);return n},LD.parse=function(t,e){return new this(e,t).parse()},LD.parseExpressionAt=function(t,e,n){var i=new this(n,t,e);return i.nextToken(),i.parseExpression()},LD.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(LD.prototype,OD);var DD=LD.prototype,$D=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;DD.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){mD.lastIndex=t,t+=mD.exec(this.input)[0].length;var e=$D.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){mD.lastIndex=t+e[0].length;var n=mD.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return";"===r||"}"===r||uD.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||"!"===r&&"="===this.input.charAt(i+1))}t+=e[0].length,mD.lastIndex=t,t+=mD.exec(this.input)[0].length,";"===this.input[t]&&t++}},DD.eat=function(t){return this.type===t&&(this.next(),!0)},DD.isContextual=function(t){return this.type===lD.name&&this.value===t&&!this.containsEsc},DD.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},DD.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},DD.canInsertSemicolon=function(){return this.type===lD.eof||this.type===lD.braceR||uD.test(this.input.slice(this.lastTokEnd,this.start))},DD.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},DD.semicolon=function(){this.eat(lD.semi)||this.insertSemicolon()||this.unexpected()},DD.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},DD.expect=function(t){this.eat(t)||this.unexpected()},DD.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var BD=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};DD.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}},DD.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},DD.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},DD.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var FD=LD.prototype;FD.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==lD.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var PD={kind:"loop"},VD={kind:"switch"};FD.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;mD.lastIndex=this.pos;var e=mD.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(91===i||92===i)return!0;if(t)return!1;if(123===i||i>55295&&i<56320)return!0;if(eD(i,!0)){for(var r=n+1;nD(i=this.input.charCodeAt(r),!0);)++r;if(92===i||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!XO.test(s))return!0}return!1},FD.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;mD.lastIndex=this.pos;var t,e=mD.exec(this.input),n=this.pos+e[0].length;return!(uD.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(nD(t=this.input.charCodeAt(n+8))||t>55295&&t<56320))},FD.parseStatement=function(t,e,n){var i,r=this.type,s=this.startNode();switch(this.isLet(t)&&(r=lD._var,i="let"),r){case lD._break:case lD._continue:return this.parseBreakContinueStatement(s,r.keyword);case lD._debugger:return this.parseDebuggerStatement(s);case lD._do:return this.parseDoStatement(s);case lD._for:return this.parseForStatement(s);case lD._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case lD._class:return t&&this.unexpected(),this.parseClass(s,!0);case lD._if:return this.parseIfStatement(s);case lD._return:return this.parseReturnStatement(s);case lD._switch:return this.parseSwitchStatement(s);case lD._throw:return this.parseThrowStatement(s);case lD._try:return this.parseTryStatement(s);case lD._const:case lD._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case lD._while:return this.parseWhileStatement(s);case lD._with:return this.parseWithStatement(s);case lD.braceL:return this.parseBlock(!0,s);case lD.semi:return this.parseEmptyStatement(s);case lD._export:case lD._import:if(this.options.ecmaVersion>10&&r===lD._import){mD.lastIndex=this.pos;var a=mD.exec(this.input),o=this.pos+a[0].length,c=this.input.charCodeAt(o);if(40===c||46===c)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===lD._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var l=this.value,u=this.parseExpression();return r===lD.name&&"Identifier"===u.type&&this.eat(lD.colon)?this.parseLabeledStatement(s,l,u,t):this.parseExpressionStatement(s,u)}},FD.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(lD.semi)||this.insertSemicolon()?t.label=null:this.type!==lD.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(t.label&&n)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},FD.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},FD.parseDoStatement=function(t){return this.next(),this.labels.push(PD),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(lD._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(lD.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},FD.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(PD),this.enterScope(0),this.expect(lD.parenL),this.type===lD.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===lD._var||this.type===lD._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===lD._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===lD._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=this.isContextual("let"),a=!1,o=new BD,c=this.parseExpression(!(e>-1)||"await",o);return this.type===lD._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===lD._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,o),this.checkLValPattern(c),this.parseForIn(t,c)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,c))},FD.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,RD|(n?0:jD),!1,e)},FD.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(lD._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},FD.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(lD.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},FD.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(lD.braceL),this.labels.push(VD),this.enterScope(0);for(var n=!1;this.type!==lD.braceR;)if(this.type===lD._case||this.type===lD._default){var i=this.type===lD._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(lD.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},FD.parseThrowStatement=function(t){return this.next(),uD.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var UD=[];FD.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e="Identifier"===t.type;return this.enterScope(e?32:0),this.checkLValPattern(t,e?4:2),this.expect(lD.parenR),t},FD.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===lD._catch){var e=this.startNode();this.next(),this.eat(lD.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(lD._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},FD.parseVarStatement=function(t,e,n){return this.next(),this.parseVar(t,!1,e,n),this.semicolon(),this.finishNode(t,"VariableDeclaration")},FD.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(PD),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},FD.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},FD.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},FD.parseLabeledStatement=function(t,e,n,i){for(var r=0,s=this.labels;r<s.length;r+=1){s[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===lD._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var c=this.labels[o];if(c.statementStart!==t.start)break;c.statementStart=this.start,c.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},FD.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},FD.parseBlock=function(t,e,n){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(lD.braceL),t&&this.enterScope(0);this.type!==lD.braceR;){var i=this.parseStatement(null);e.body.push(i)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},FD.parseFor=function(t,e){return t.init=e,this.expect(lD.semi),t.test=this.type===lD.semi?null:this.parseExpression(),this.expect(lD.semi),t.update=this.type===lD.parenR?null:this.parseExpression(),this.expect(lD.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},FD.parseForIn=function(t,e){var n=this.type===lD._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(lD.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},FD.parseVar=function(t,e,n,i){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(lD.eq)?r.init=this.parseMaybeAssign(e):i||"const"!==n||this.type===lD._in||this.options.ecmaVersion>=6&&this.isContextual("of")?i||"Identifier"===r.id.type||e&&(this.type===lD._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(lD.comma))break}return t},FD.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var RD=1,jD=2;function zD(t,e){var n=e.key.name,i=t[n],r="true";return"MethodDefinition"!==e.type||"get"!==e.kind&&"set"!==e.kind||(r=(e.static?"s":"i")+e.kind),"iget"===i&&"iset"===r||"iset"===i&&"iget"===r||"sget"===i&&"sset"===r||"sset"===i&&"sget"===r?(t[n]="true",!1):!!i||(t[n]=r,!1)}function qD(t,e){var n=t.computed,i=t.key;return!n&&("Identifier"===i.type&&i.name===e||"Literal"===i.type&&i.value===e)}FD.parseFunction=function(t,e,n,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===lD.star&&e&jD&&this.unexpected(),t.generator=this.eat(lD.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&RD&&(t.id=4&e&&this.type!==lD.name?null:this.parseIdent(),!t.id||e&jD||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ND(t.async,t.generator)),e&RD||(t.id=this.type===lD.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&RD?"FunctionDeclaration":"FunctionExpression")},FD.parseFunctionParams=function(t){this.expect(lD.parenL),t.params=this.parseBindingList(lD.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},FD.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(lD.braceL);this.type!==lD.braceR;){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&zD(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},FD.parseClassElement=function(t){if(this.eat(lD.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(lD.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===lD.star?o=!0:i="static"}if(n.static=o,!i&&e>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==lD.star||this.canInsertSemicolon()?i="async":s=!0),!i&&(e>=9||!s)&&this.eat(lD.star)&&(r=!0),!i&&!s&&!r){var c=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=c:i=c)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===lD.parenL||"method"!==a||r||s){var l=!n.static&&qD(n,"constructor"),u=l&&t;l&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":a,this.parseClassMethod(n,r,s,u)}else this.parseClassField(n);return n},FD.isClassElementNameStart=function(){return this.type===lD.name||this.type===lD.privateId||this.type===lD.num||this.type===lD.string||this.type===lD.bracketL||this.type.keyword},FD.parseClassElementName=function(t){this.type===lD.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},FD.parseClassMethod=function(t,e,n,i){var r=t.key;"constructor"===t.kind?(e&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):t.static&&qD(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,n,i);return"get"===t.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===t.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},FD.parseClassField=function(t){if(qD(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&qD(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(lD.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},FD.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(320);this.type!==lD.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")},FD.parseClassId=function(t,e){this.type===lD.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},FD.parseClassSuper=function(t){t.superClass=this.eat(lD._extends)?this.parseExprSubscripts(null,!1):null},FD.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},FD.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,n=t.used;if(this.options.checkPrivateFields)for(var i=this.privateNameStack.length,r=0===i?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];vD(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},FD.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==lD.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")},FD.parseExport=function(t,e){if(this.next(),this.eat(lD.star))return this.parseExportAllDeclaration(t,e);if(this.eat(lD._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==lD.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var n=0,i=t.specifiers;n<i.length;n+=1){var r=i[n];this.checkUnreserved(r.local),this.checkLocalExport(r.local),"Literal"===r.local.type&&this.raise(r.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},FD.parseExportDeclaration=function(t){return this.parseStatement(null)},FD.parseExportDefaultDeclaration=function(){var t;if(this.type===lD._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,4|RD,!1,t)}if(this.type===lD._class){var n=this.startNode();return this.parseClass(n,"nullableID")}var i=this.parseMaybeAssign();return this.semicolon(),i},FD.checkExport=function(t,e,n){t&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),vD(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},FD.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e,e.start);else if("ObjectPattern"===n)for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(t,s)}else if("ArrayPattern"===n)for(var a=0,o=e.elements;a<o.length;a+=1){var c=o[a];c&&this.checkPatternExport(t,c)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},FD.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}},FD.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},FD.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")},FD.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(lD.braceL);!this.eat(lD.braceR);){if(n)n=!1;else if(this.expect(lD.comma),this.afterTrailingComma(lD.braceR))break;e.push(this.parseExportSpecifier(t))}return e},FD.parseImport=function(t){return this.next(),this.type===lD.string?(t.specifiers=UD,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===lD.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},FD.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportSpecifier")},FD.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportDefaultSpecifier")},FD.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,2),this.finishNode(t,"ImportNamespaceSpecifier")},FD.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===lD.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(lD.comma)))return t;if(this.type===lD.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(lD.braceL);!this.eat(lD.braceR);){if(e)e=!1;else if(this.expect(lD.comma),this.afterTrailingComma(lD.braceR))break;t.push(this.parseImportSpecifier())}return t},FD.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===lD.string){var t=this.parseLiteral(this.value);return SD.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)},FD.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},FD.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var WD=LD.prototype;WD.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},WD.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var s=t[n-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},WD.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},WD.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==lD.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},WD.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case lD.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(lD.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case lD.braceL:return this.parseObj(!0)}return this.parseIdent()},WD.parseBindingList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);)if(s?s=!1:this.expect(lD.comma),e&&this.type===lD.comma)r.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===lD.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),r.push(a),this.type===lD.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}r.push(this.parseAssignableListItem(i))}return r},WD.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e},WD.parseBindingListItem=function(t){return t},WD.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(lD.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},WD.checkLValSimple=function(t,e,n){void 0===e&&(e=0);var i=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(vD(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}},WD.checkLValPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,e,n)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var c=o[a];c&&this.checkLValInnerPattern(c,e,n)}break;default:this.checkLValSimple(t,e,n)}},WD.checkLValInnerPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,n);break;case"RestElement":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var YD=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},HD={b_stat:new YD("{",!1),b_expr:new YD("{",!0),b_tmpl:new YD("${",!1),p_stat:new YD("(",!1),p_expr:new YD("(",!0),q_tmpl:new YD("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new YD("function",!1),f_expr:new YD("function",!0),f_expr_gen:new YD("function",!0,!1,null,!0),f_gen:new YD("function",!1,!1,null,!0)},GD=LD.prototype;GD.initialContext=function(){return[HD.b_stat]},GD.curContext=function(){return this.context[this.context.length-1]},GD.braceIsBlock=function(t){var e=this.curContext();return e===HD.f_expr||e===HD.f_stat||(t!==lD.colon||e!==HD.b_stat&&e!==HD.b_expr?t===lD._return||t===lD.name&&this.exprAllowed?uD.test(this.input.slice(this.lastTokEnd,this.start)):t===lD._else||t===lD.semi||t===lD.eof||t===lD.parenR||t===lD.arrow||(t===lD.braceL?e===HD.b_stat:t!==lD._var&&t!==lD._const&&t!==lD.name&&!this.exprAllowed):!e.isExpr)},GD.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},GD.updateContext=function(t){var e,n=this.type;n.keyword&&t===lD.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},GD.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},lD.parenR.updateContext=lD.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===HD.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},lD.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?HD.b_stat:HD.b_expr),this.exprAllowed=!0},lD.dollarBraceL.updateContext=function(){this.context.push(HD.b_tmpl),this.exprAllowed=!0},lD.parenL.updateContext=function(t){var e=t===lD._if||t===lD._for||t===lD._with||t===lD._while;this.context.push(e?HD.p_stat:HD.p_expr),this.exprAllowed=!0},lD.incDec.updateContext=function(){},lD._function.updateContext=lD._class.updateContext=function(t){!t.beforeExpr||t===lD._else||t===lD.semi&&this.curContext()!==HD.p_stat||t===lD._return&&uD.test(this.input.slice(this.lastTokEnd,this.start))||(t===lD.colon||t===lD.braceL)&&this.curContext()===HD.b_stat?this.context.push(HD.f_stat):this.context.push(HD.f_expr),this.exprAllowed=!1},lD.backQuote.updateContext=function(){this.curContext()===HD.q_tmpl?this.context.pop():this.context.push(HD.q_tmpl),this.exprAllowed=!1},lD.star.updateContext=function(t){if(t===lD._function){var e=this.context.length-1;this.context[e]===HD.f_expr?this.context[e]=HD.f_expr_gen:this.context[e]=HD.f_gen}this.exprAllowed=!0},lD.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==lD.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var KD=LD.prototype;function QD(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&QD(t.expression)}KD.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[i="$"+i];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(r.start,"Redefinition of property");else a=e[i]={init:!1,get:!1,set:!1};a[s]=!0}}},KD.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===lD.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(lD.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r},KD.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new BD,i=!0);var o=this.start,c=this.startLoc;this.type!==lD.parenL&&this.type!==lD.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var l=this.parseMaybeConditional(t,e);if(n&&(l=n.call(this,l,o,c)),this.type.isAssign){var u=this.startNodeAt(o,c);return u.operator=this.value,this.type===lD.eq&&(l=this.toAssignable(l,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=l.start&&(e.shorthandAssign=-1),this.type===lD.eq?this.checkLValPattern(l):this.checkLValSimple(l),u.left=l,this.next(),u.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(u,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),l},KD.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(lD.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(lD.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},KD.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,t)},KD.parseExprOp=function(t,e,n,i,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==lD._in)&&s>i){var a=this.type===lD.logicalOR||this.type===lD.logicalAND,o=this.type===lD.coalesce;o&&(s=lD.logicalAND.binop);var c=this.value;this.next();var l=this.start,u=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),l,u,s,r),f=this.buildBinary(e,n,t,h,c,a||o);return(a&&this.type===lD.coalesce||o&&(this.type===lD.logicalOR||this.type===lD.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,e,n,i,r)}return t},KD.buildBinary=function(t,e,n,i,r,s){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},KD.parseMaybeUnary=function(t,e,n,i){var r,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(i),e=!0;else if(this.type.prefix){var o=this.startNode(),c=this.type===lD.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,c,i),this.checkExpressionErrors(t,!0),c?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&QD(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,r=this.finishNode(o,c?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==lD.privateId){if(r=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(s,a);l.operator=this.value,l.prefix=!1,l.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(l,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.options.checkPrivateFields&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==lD._in&&this.unexpected();return n||!this.eat(lD.starstar)?r:e?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,r,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},KD.parseExprSubscripts=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var s=this.parseSubscripts(r,n,i,!1,e);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s},KD.parseSubscripts=function(t,e,n,i,r){for(var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,n,i,s,a,r);if(o.optional&&(a=!0),o===t||"ArrowFunctionExpression"===o.type){if(a){var c=this.startNodeAt(e,n);c.expression=o,o=this.finishNode(c,"ChainExpression")}return o}t=o}},KD.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(lD.arrow)},KD.parseSubscriptAsyncArrow=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!0,i)},KD.parseSubscript=function(t,e,n,i,r,s,a){var o=this.options.ecmaVersion>=11,c=o&&this.eat(lD.questionDot);i&&c&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(lD.bracketL);if(l||c&&this.type!==lD.parenL&&this.type!==lD.backQuote||this.eat(lD.dot)){var u=this.startNodeAt(e,n);u.object=t,l?(u.property=this.parseExpression(),this.expect(lD.bracketR)):this.type===lD.privateId&&"Super"!==t.type?u.property=this.parsePrivateIdent():u.property=this.parseIdent("never"!==this.options.allowReserved),u.computed=!!l,o&&(u.optional=c),t=this.finishNode(u,"MemberExpression")}else if(!i&&this.eat(lD.parenL)){var h=new BD,f=this.yieldPos,d=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(lD.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!c&&this.shouldParseAsyncArrow())return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=d,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(e,n,m,a);this.checkExpressionErrors(h,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var y=this.startNodeAt(e,n);y.callee=t,y.arguments=m,o&&(y.optional=c),t=this.finishNode(y,"CallExpression")}else if(this.type===lD.backQuote){(c||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var g=this.startNodeAt(e,n);g.tag=t,g.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(g,"TaggedTemplateExpression")}return t},KD.parseExprAtom=function(t,e,n){this.type===lD.slash&&this.readRegexp();var i,r=this.potentialArrowAt===this.start;switch(this.type){case lD._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),i=this.startNode(),this.next(),this.type!==lD.parenL||this.allowDirectSuper||this.raise(i.start,"super() call outside constructor of a subclass"),this.type!==lD.dot&&this.type!==lD.bracketL&&this.type!==lD.parenL&&this.unexpected(),this.finishNode(i,"Super");case lD._this:return i=this.startNode(),this.next(),this.finishNode(i,"ThisExpression");case lD.name:var s=this.start,a=this.startLoc,o=this.containsEsc,c=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!o&&"async"===c.name&&!this.canInsertSemicolon()&&this.eat(lD._function))return this.overrideContext(HD.f_expr),this.parseFunction(this.startNodeAt(s,a),0,!1,!0,e);if(r&&!this.canInsertSemicolon()){if(this.eat(lD.arrow))return this.parseArrowExpression(this.startNodeAt(s,a),[c],!1,e);if(this.options.ecmaVersion>=8&&"async"===c.name&&this.type===lD.name&&!o&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return c=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(lD.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,a),[c],!0,e)}return c;case lD.regexp:var l=this.value;return(i=this.parseLiteral(l.value)).regex={pattern:l.pattern,flags:l.flags},i;case lD.num:case lD.string:return this.parseLiteral(this.value);case lD._null:case lD._true:case lD._false:return(i=this.startNode()).value=this.type===lD._null?null:this.type===lD._true,i.raw=this.type.keyword,this.next(),this.finishNode(i,"Literal");case lD.parenL:var u=this.start,h=this.parseParenAndDistinguishExpression(r,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(t.parenthesizedAssign=u),t.parenthesizedBind<0&&(t.parenthesizedBind=u)),h;case lD.bracketL:return i=this.startNode(),this.next(),i.elements=this.parseExprList(lD.bracketR,!0,!0,t),this.finishNode(i,"ArrayExpression");case lD.braceL:return this.overrideContext(HD.b_expr),this.parseObj(!1,t);case lD._function:return i=this.startNode(),this.next(),this.parseFunction(i,0);case lD._class:return this.parseClass(this.startNode(),!1);case lD._new:return this.parseNew();case lD.backQuote:return this.parseTemplate();case lD._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}},KD.parseExprAtomDefault=function(){this.unexpected()},KD.parseExprImport=function(t){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var n=this.parseIdent(!0);return this.type!==lD.parenL||t?this.type===lD.dot?(e.meta=n,this.parseImportMeta(e)):void this.unexpected():this.parseDynamicImport(e)},KD.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(lD.parenR)){var e=this.start;this.eat(lD.comma)&&this.eat(lD.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},KD.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},KD.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},KD.parseParenExpression=function(){this.expect(lD.parenL);var t=this.parseExpression();return this.expect(lD.parenR),t},KD.shouldParseArrow=function(t){return!this.canInsertSemicolon()},KD.parseParenAndDistinguishExpression=function(t,e){var n,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,c=this.startLoc,l=[],u=!0,h=!1,f=new BD,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==lD.parenR;){if(u?u=!1:this.expect(lD.comma),s&&this.afterTrailingComma(lD.parenR,!0)){h=!0;break}if(this.type===lD.ellipsis){a=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===lD.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,f,this.parseParenItem))}var m=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(lD.parenR),t&&this.shouldParseArrow(l)&&this.eat(lD.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(i,r,l,e);l.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,l.length>1?((n=this.startNodeAt(o,c)).expressions=l,this.finishNodeAt(n,"SequenceExpression",m,y)):n=l[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(i,r);return g.expression=n,this.finishNode(g,"ParenthesizedExpression")}return n},KD.parseParenItem=function(t){return t},KD.parseParenArrowList=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,i)};var XD=[];KD.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(lD.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),i,r,!0,!1),this.eat(lD.parenL)?t.arguments=this.parseExprList(lD.parenR,this.options.ecmaVersion>=8,!1):t.arguments=XD,this.finishNode(t,"NewExpression")},KD.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===lD.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===lD.backQuote,this.finishNode(n,"TemplateElement")},KD.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===lD.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(lD.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(lD.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},KD.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===lD.name||this.type===lD.num||this.type===lD.string||this.type===lD.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===lD.star)&&!uD.test(this.input.slice(this.lastTokEnd,this.start))},KD.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(lD.braceR);){if(i)i=!1;else if(this.expect(lD.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(lD.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},KD.parseProperty=function(t,e){var n,i,r,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(lD.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===lD.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,e),this.type===lD.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(n=this.eat(lD.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(lD.star),this.parsePropertyName(a)):i=!1,this.parsePropertyValue(a,t,n,i,r,s,e,o),this.finishNode(a,"Property")},KD.parseGetterSetter=function(t){t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var e="get"===t.kind?0:1;if(t.value.params.length!==e){var n=t.value.start;"get"===t.kind?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")},KD.parsePropertyValue=function(t,e,n,i,r,s,a,o){(n||i)&&this.type===lD.colon&&this.unexpected(),this.eat(lD.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===lD.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i)):e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===lD.comma||this.type===lD.braceR||this.type===lD.eq?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===lD.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected():((n||i)&&this.unexpected(),this.parseGetterSetter(t))},KD.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(lD.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(lD.bracketR),t.key;t.computed=!1}return t.key=this.type===lD.num||this.type===lD.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},KD.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},KD.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|ND(e,i.generator)|(n?128:0)),this.expect(lD.parenL),i.params=this.parseBindingList(lD.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},KD.parseArrowExpression=function(t,e,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|ND(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},KD.parseFunctionBody=function(t,e,n,i){var r=e&&this.type!==lD.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var c=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=c}this.exitScope()},KD.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1){if("Identifier"!==n[e].type)return!1}return!0},KD.checkParams=function(t,e){for(var n=Object.create(null),i=0,r=t.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,1,e?null:n)}},KD.parseExprList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(lD.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===lD.comma?a=null:this.type===lD.ellipsis?(a=this.parseSpread(i),i&&this.type===lD.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r},KD.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;(this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===i&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==i&&"await"!==i||this.raise(e,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},KD.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),"await"!==e.name||this.awaitIdentPos||(this.awaitIdentPos=e.start)),e},KD.parseIdentNode=function(){var t=this.startNode();return this.type===lD.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,"class"!==t.name&&"function"!==t.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),t},KD.parsePrivateIdent=function(){var t=this.startNode();return this.type===lD.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t},KD.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===lD.semi||this.canInsertSemicolon()||this.type!==lD.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(lD.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},KD.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var JD=LD.prototype;JD.raise=function(t,e){var n=AD(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},JD.raiseRecoverable=JD.raise,JD.curPosition=function(){if(this.options.locations)return new kD(this.curLine,this.pos-this.lineStart)};var ZD=LD.prototype,t$=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};ZD.enterScope=function(t){this.scopeStack.push(new t$(t))},ZD.exitScope=function(){this.scopeStack.pop()},ZD.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},ZD.declareName=function(t,e,n){var i=!1;if(2===e){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e){this.currentScope().lexical.push(t)}else if(3===e){var s=this.currentScope();i=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){i=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],259&o.flags)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},ZD.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},ZD.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ZD.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags)return e}},ZD.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags&&!(16&e.flags))return e}};var e$=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new ID(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},n$=LD.prototype;function i$(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}n$.startNode=function(){return new e$(this,this.start,this.startLoc)},n$.startNodeAt=function(t,e){return new e$(this,t,e)},n$.finishNode=function(t,e){return i$.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},n$.finishNodeAt=function(t,e,n,i){return i$.call(this,t,e,n,i)},n$.copyNode=function(t){var e=new e$(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var r$="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",s$=r$+" Extended_Pictographic",a$=s$+" EBase EComp EMod EPres ExtPict",o$={9:r$,10:s$,11:s$,12:a$,13:a$,14:a$},c$={9:"",10:"",11:"",12:"",13:"",14:"Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji"},l$="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",u$="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",h$=u$+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",f$=h$+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",d$=f$+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",p$=d$+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",m$={9:u$,10:h$,11:f$,12:d$,13:p$,14:p$+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz"},y$={};function g$(t){var e=y$[t]={binary:xD(o$[t]+" "+l$),binaryOfStrings:xD(c$[t]),nonBinary:{General_Category:xD(l$),Script:xD(m$[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var b$=0,v$=[9,10,11,12,13,14];b$<v$.length;b$+=1){g$(v$[b$])}var _$=LD.prototype,x$=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=y$[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function w$(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function S$(t){return t>=65&&t<=90||t>=97&&t<=122}x$.prototype.reset=function(t,e,n){var i=-1!==n.indexOf("v"),r=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=r&&this.parser.options.ecmaVersion>=9)},x$.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},x$.prototype.at=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return-1;var r=n.charCodeAt(t);if(!e&&!this.switchU||r<=55295||r>=57344||t+1>=i)return r;var s=n.charCodeAt(t+1);return s>=56320&&s<=57343?(r<<10)+s-56613888:r},x$.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return i;var r,s=n.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=i||(r=n.charCodeAt(t+1))<56320||r>57343?t+1:t+2},x$.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},x$.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},x$.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},x$.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},x$.prototype.eatChars=function(t,e){void 0===e&&(e=!1);for(var n=this.pos,i=0,r=t;i<r.length;i+=1){var s=r[i],a=this.at(n,e);if(-1===a||a!==s)return!1;n=this.nextIndex(n,e)}return this.pos=n,!0},_$.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=!1,r=!1,s=0;s<n.length;s++){var a=n.charAt(s);-1===e.indexOf(a)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(a,s+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),"u"===a&&(i=!0),"v"===a&&(r=!0)}this.options.ecmaVersion>=15&&i&&r&&this.raise(t.start,"Invalid regular expression flag")},_$.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},_$.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},_$.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},_$.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},_$.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},_$.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},_$.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},_$.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},_$.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},_$.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},_$.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},_$.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},_$.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},_$.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},_$.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},_$.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!w$(e)&&(t.lastIntValue=e,t.advance(),!0)},_$.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!w$(n);)t.advance();return t.pos!==e},_$.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},_$.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},_$.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},_$.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=wD(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=wD(t.lastIntValue);return!0}return!1},_$.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return eD(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},_$.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return nD(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},_$.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},_$.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},_$.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},_$.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},_$.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},_$.regexp_eatZero=function(t){return 48===t.current()&&!A$(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},_$.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},_$.regexp_eatControlLetter=function(t){var e=t.current();return!!S$(e)&&(t.lastIntValue=e%32,t.advance(),!0)},_$.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var n,i=t.pos,r=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(r&&s>=55296&&s<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=s}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((n=t.lastIntValue)>=0&&n<=1114111))return!0;r&&t.raise("Invalid unicode escape"),t.pos=i}return!1},_$.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},_$.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1};function k$(t){return S$(t)||95===t}function I$(t){return k$(t)||A$(t)}function A$(t){return t>=48&&t<=57}function T$(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function M$(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function E$(t){return t>=48&&t<=55}_$.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),1;var n=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((n=80===e)||112===e)){var i;if(t.lastIntValue=-1,t.advance(),t.eat(123)&&(i=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return n&&2===i&&t.raise("Invalid property name"),i;t.raise("Invalid property name")}return 0},_$.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),1}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r)}return 0},_$.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){vD(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},_$.regexp_validateUnicodePropertyNameOrValue=function(t,e){return t.unicodeProperties.binary.test(e)?1:t.switchV&&t.unicodeProperties.binaryOfStrings.test(e)?2:void t.raise("Invalid property name")},_$.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";k$(e=t.current());)t.lastStringValue+=wD(e),t.advance();return""!==t.lastStringValue},_$.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";I$(e=t.current());)t.lastStringValue+=wD(e),t.advance();return""!==t.lastStringValue},_$.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},_$.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),n=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&2===n&&t.raise("Negated character class may contain strings"),!0}return!1},_$.regexp_classContents=function(t){return 93===t.current()?1:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),1)},_$.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},_$.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||E$(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},_$.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},_$.regexp_classSetExpression=function(t){var e,n=1;if(this.regexp_eatClassSetRange(t));else if(e=this.regexp_eatClassSetOperand(t)){2===e&&(n=2);for(var i=t.pos;t.eatChars([38,38]);)38!==t.current()&&(e=this.regexp_eatClassSetOperand(t))?2!==e&&(n=1):t.raise("Invalid character in character class");if(i!==t.pos)return n;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(i!==t.pos)return n}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(!(e=this.regexp_eatClassSetOperand(t)))return n;2===e&&(n=2)}},_$.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var n=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var i=t.lastIntValue;return-1!==n&&-1!==i&&n>i&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1},_$.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?1:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)},_$.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var n=t.eat(94),i=this.regexp_classContents(t);if(t.eat(93))return n&&2===i&&t.raise("Negated character class may contain strings"),i;t.pos=e}if(t.eat(92)){var r=this.regexp_eatCharacterClassEscape(t);if(r)return r;t.pos=e}return null},_$.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var n=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return n}else t.raise("Invalid escape");t.pos=e}return null},_$.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)2===this.regexp_classString(t)&&(e=2);return e},_$.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return 1===e?1:2},_$.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return!(!this.regexp_eatCharacterEscape(t)&&!this.regexp_eatClassSetReservedPunctuator(t))||(t.eat(98)?(t.lastIntValue=8,!0):(t.pos=e,!1));var n=t.current();return!(n<0||n===t.lookahead()&&function(t){return 33===t||t>=35&&t<=38||t>=42&&t<=44||46===t||t>=58&&t<=64||94===t||96===t||126===t}(n))&&(!function(t){return 40===t||41===t||45===t||47===t||t>=91&&t<=93||t>=123&&t<=125}(n)&&(t.advance(),t.lastIntValue=n,!0))},_$.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return!!function(t){return 33===t||35===t||37===t||38===t||44===t||45===t||t>=58&&t<=62||64===t||96===t||126===t}(e)&&(t.lastIntValue=e,t.advance(),!0)},_$.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!A$(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},_$.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},_$.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;A$(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},_$.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;T$(n=t.current());)t.lastIntValue=16*t.lastIntValue+M$(n),t.advance();return t.pos!==e},_$.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},_$.regexp_eatOctalDigit=function(t){var e=t.current();return E$(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},_$.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!T$(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+M$(r),t.advance()}return!0};var C$=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new ID(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},N$=LD.prototype;function L$(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}N$.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new C$(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},N$.getToken=function(){return this.next(),new C$(this)},"undefined"!=typeof Symbol&&(N$[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===lD.eof,value:e}}}}),N$.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(lD.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},N$.readToken=function(t){return eD(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},N$.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},N$.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=e;(i=dD(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())},N$.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!fD(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},N$.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&pD.test(String.fromCharCode(t))))break t;++this.pos}}},N$.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},N$.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(lD.ellipsis)):(++this.pos,this.finishToken(lD.dot))},N$.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(lD.assign,2):this.finishOp(lD.slash,1)},N$.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?lD.star:lD.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=lD.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(lD.assign,n+1):this.finishOp(i,n)},N$.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(lD.assign,3);return this.finishOp(124===t?lD.logicalOR:lD.logicalAND,2)}return 61===e?this.finishOp(lD.assign,2):this.finishOp(124===t?lD.bitwiseOR:lD.bitwiseAND,1)},N$.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(lD.assign,2):this.finishOp(lD.bitwiseXOR,1)},N$.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!uD.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(lD.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(lD.assign,2):this.finishOp(lD.plusMin,1)},N$.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(lD.assign,n+1):this.finishOp(lD.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(lD.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},N$.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(lD.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(lD.arrow)):this.finishOp(61===t?lD.eq:lD.prefix,1)},N$.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(lD.questionDot,2)}if(63===e){if(t>=12)if(61===this.input.charCodeAt(this.pos+2))return this.finishOp(lD.assign,3);return this.finishOp(lD.coalesce,2)}}return this.finishOp(lD.question,1)},N$.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,eD(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(lD.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+wD(t)+"'")},N$.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(lD.parenL);case 41:return++this.pos,this.finishToken(lD.parenR);case 59:return++this.pos,this.finishToken(lD.semi);case 44:return++this.pos,this.finishToken(lD.comma);case 91:return++this.pos,this.finishToken(lD.bracketL);case 93:return++this.pos,this.finishToken(lD.bracketR);case 123:return++this.pos,this.finishToken(lD.braceL);case 125:return++this.pos,this.finishToken(lD.braceR);case 58:return++this.pos,this.finishToken(lD.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(lD.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(lD.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+wD(t)+"'")},N$.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},N$.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(uD.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new x$(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var c=null;try{c=new RegExp(r,a)}catch(t){}return this.finishToken(lD.regexp,{pattern:r,flags:a,value:c})},N$.readInt=function(t,e,n){for(var i=this.options.ecmaVersion>=12&&void 0===e,r=n&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,c=0,l=null==e?1/0:e;c<l;++c,++this.pos){var u=this.input.charCodeAt(this.pos),h=void 0;if(i&&95===u)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===c&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=u;else{if((h=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;o=u,a=a*t+h}}return i&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},N$.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=L$(this.input.slice(e,this.pos)),++this.pos):eD(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(lD.num,n)},N$.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===i){var r=L$(this.input.slice(e,this.pos));return++this.pos,eD(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(lD.num,r)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),eD(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(e,this.pos),n?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(lD.num,a)},N$.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},N$.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(fD(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(lD.string,e)};var O$={};N$.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==O$)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},N$.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw O$;this.raise(t,e)},N$.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==lD.template&&this.type!==lD.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(lD.template,t)):36===n?(this.pos+=2,this.finishToken(lD.dollarBraceL)):(++this.pos,this.finishToken(lD.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(fD(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},N$.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(lD.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},N$.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return wD(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return fD(e)?"":String.fromCharCode(e)}},N$.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},N$.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(nD(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?eD:nD)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=wD(a),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},N$.readWord=function(){var t=this.readWord1(),e=lD.name;return this.keywords.test(t)&&(e=oD[t]),this.finishToken(e,t)};LD.acorn={Parser:LD,version:"8.10.0",defaultOptions:TD,Position:kD,SourceLocation:ID,getLineInfo:AD,Node:e$,TokenType:iD,tokTypes:lD,keywordTypes:oD,TokContext:YD,tokContexts:HD,isIdentifierChar:nD,isIdentifierStart:eD,Token:C$,isNewLine:fD,lineBreak:uD,lineBreakG:hD,nonASCIIwhitespace:pD};var D$={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};const $$={ecmaVersion:11},B$="$",F$="d",P$="d1",V$="d2",U$=t=>(e,n)=>n.error(e,t+" not allowed"),R$=U$("Aggregate function"),j$=U$("Window function"),z$="Invalid argument",q$="Invalid column reference",W$=q$+" (must be input to an aggregate function)",Y$="Invalid function call",H$="Invalid operator parameter",G$="Unsupported destructuring pattern",K$="Table expressions do not support closures",Q$="Use aq.escape(fn) to use a function as-is (including closures)",X$=`\nNote: ${K$}. ${Q$}, or use table.params({ name: value }) to define dynamic parameters.`,J$=`\nNote: ${K$}. ${Q$}, or use aq.addFunction(name, fn) to add new op functions.`,Z$=`The ${mI} method is not valid in multi-table expressions.`;function tB(t,e){const n=function(t){try{const i=t.field?function(t){const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`}(t):bS(t)?bk(t):t;return(e=`expr=(${i})`,n=$$,LD.parse(e,n)).body[0].expression.right}catch(e){wS("Expression parse error: "+(t+""))}var e,n}(e);let i=t.root=n;return t.spec=e,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,!function(t){return jO(Ck,t)||jO(Ek,t)}(i)?t.join?(t.scope.add(t.tuple1=P$),t.scope.add(t.tuple2=V$),t.scope.add(t.$param=B$)):(t.scope.add(t.tuple=F$),t.scope.add(t.$param=B$)):(!function(t,e){t.generator&&U$("Generator functions")(t,e);t.async&&U$("Async functions")(t,e);const{params:n}=t,i=n.length,r=t=>(n,i)=>e.columnRef.set(n,[i,t]),s=(t,n)=>e.paramsRef.set(t,n);i&&(e.join?(rB(e,n[0],"tuple1",r(1)),i>1&&rB(e,n[1],"tuple2",r(2)),i>2&&rB(e,n[2],"$param",s)):(rB(e,n[0],"tuple",r(0)),i>1&&rB(e,n[1],"$param",s)));e.root=t.body}(i,t),i=i.body),LO(i,t,eB),t.root}const eB={FunctionDeclaration:U$("Function definitions"),ForStatement:U$("For loops"),ForOfStatement:U$("For-of loops"),ForInStatement:U$("For-in loops"),WhileStatement:U$("While loops"),DoWhileStatement:U$("Do-while loops"),AwaitExpression:U$("Await expressions"),ArrowFunctionExpression:U$("Function definitions"),AssignmentExpression:U$("Assignments"),FunctionExpression:U$("Function definitions"),NewExpression:U$('Use of "new"'),UpdateExpression:U$("Update expressions"),VariableDeclarator(t,e){pB(t.id,e)},Identifier(t,e,n){oB(t,e,n)&&!e.scope.has(t.name)&&e.error(t,"Invalid variable reference",X$)},CallExpression(t,e){const n=sB(t.callee),i=cI(n)||lI(n);if(i){if((e.join||!1===e.aggregate)&&sI(n)&&R$(t,e),(e.join||!1===e.window)&&aI(n)&&j$(t,e),e.$op=1,e.ast)dB(t,n,e),t.arguments.forEach((t=>LO(t,e,iB)));else{const r=e.op(function(t,e,n,i){const r=[],s=[],a=e.param[0]||0,o=a+(e.param[1]||0);return i.forEach(((e,n)=>{n<a?(LO(e,t,iB),r.push(t.field(e))):n<o?(LO(e,t,iB),s.push(t.param(e))):t.error(e,H$)})),{name:n,fields:r,params:s,...t.spec.window||{}}}(e,i,n,t.arguments));Object.assign(t,{type:"Op",name:r.id})}return e.$op=0,!1}oI(n)?dB(t,n,e):e.error(t,Y$,J$)},MemberExpression(t,e,n){const{object:i,property:r}=t;if(!jO(Nk,i))return;const{name:s}=i;if(aB(t)&&jO(Nk,r)&&BS(D$,r.name))return void fB(t,r.name);const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;return a>=0?nB(t,a,e,cB,n):s===e.$param?nB(t,a,e,uB):void(e.paramsRef.has(s)?hB(t,e.paramsRef.get(s)):e.columnRef.has(s)?lB(i,s,e,t):BS(e.params,s)&&hB(i,s))}};function nB(t,e,n,i,r){const{property:s,computed:a}=t;let o;if(a)if(jO(Lk,s))o=s.value;else try{LO(s,n,eB,t),o=n.param(s)}catch(e){n.error(t,"Invalid member expression")}else o=s.name;return i(t,o,e,n,r),!1}const iB={...eB,VariableDeclarator:U$("Variable declaration in operator call"),Identifier(t,e,n){oB(t,e,n)&&e.error(t,"Variable not accessible in operator call")},CallExpression(t,e){const n=sB(t.callee);oI(n)?dB(t,n,e):e.error(t,Y$,J$)}};function rB(t,e,n,i){jO(Nk,e)?(t.scope.add(e.name),t[n]=e.name):jO($k,e)&&e.properties.forEach((e=>{const n=jO(Nk,e.key)?e.key.name:jO(Lk,e.key)?e.key.value:t.error(e,z$);jO(Nk,e.value)||t.error(e.value,G$),i(e.value.name,n)}))}function sB(t){return jO(Nk,t)?t.name:jO(Ok,t)?aB(t)?function(t){return"max"===t?"greatest":"min"===t?"least":t}(t.property.name):t.property.name:null}function aB(t){return jO(Nk,t.object)&&"Math"===t.object.name}function oB(t,e,n){const{name:i}=t;if(jO(Ok,n)&&n.property===t);else if(jO(Bk,n)&&n.key===t);else if(e.paramsRef.has(i))hB(t,e.paramsRef.get(i));else if(e.columnRef.has(i))lB(t,i,e,n);else if(BS(e.params,i))hB(t,i);else{if(!BS(D$,i))return!0;fB(t,i)}}function cB(t,e,n,i,r){const s=0===n?i.table:n>0?i.join[n-1]:null,a=s&&s.column(e);s&&!a&&i.error(t,q$),i.aggronly&&!i.$op&&i.error(t,W$),dI(t,e,n,a,r)}function lB(t,e,n,i){const[r,s]=n.columnRef.get(e);cB(t,r,s,n,i)}function uB(t,e,n,i){i.params&&!BS(i.params,e)&&i.error(t,"Invalid param reference"),hB(t,e)}function hB(t,e){t.type=Uk,t.name=e}function fB(t,e){t.type=Pk,t.name=e,t.raw=D$[e]}function dB(t,e,n){if(e===mI){const e=n.table;e||n.error(t,Z$),yI(t,t.arguments.length?t.arguments.map((t=>{const i=n.param(t),r=SS(i)?e.columnName(i):i;return e.column(r)||n.error(t,q$),r})):e.columnNames())}else t.callee={type:"Function",name:e}}function pB(t,e){jO(Nk,t)?e.scope.add(t.name):jO("ArrayPattern",t)?t.elements.forEach((t=>pB(t,e))):jO($k,t)?t.properties.forEach((t=>pB(t.value,e))):e.error(t.id,"Unsupported variable declaration")}const mB={[Fk]:1,Op:1};function yB(t,e={}){const n=e.generate||Kk,i=e.compiler||hI,r=function(t){return(t.table?gB(t.table):t.join?{...gB(t.join[1]),...gB(t.join[0])}:{})||{}}(e),s={},a={},o=[],c=[];let l=0,u=-1;const h=e.join?i.join:1==e.index?i.expr2:i.expr,f={op(t){const e=function(t){let e=`${t.name}(${t.fields.concat(t.params).join(",")})`;if(t.frame){e+=`[${t.frame.map((t=>Number.isFinite(t)?Math.abs(t):-1))},${!!t.peers}]`}return e}(t);return a[e]||(t.id=++u,a[e]=t)},field(t){const e=n(t);return s[e]||(s[e]=++l)},param:t=>jO(Lk,t)?t.value:i.param(n(t),r),value(t,i){o.push(t);const s=i.escape||(e.ast?function(t){return LO(t,null,{Column:RO,Constant:RO,Default:UO}),t}(i):h(n(i),r));c.push(s),mB[i.type]&&s!==i&&CS(s)&&(s.field=i.name)},error(t,e,n=""){const i=t.start-6,r=t.end-6;wS(`${e}: "${String(f.spec).slice(i,r)}"${n}`)}};Object.assign(f,e,{params:r});for(const[e,n]of pI(t))f.value(e+"",n.escape?qO(f,n,r):tB(f,n));if(e.ast)return{names:o,exprs:c};const d=[];for(const t in s)d[s[t]]=i.expr(t,r);const p=Object.values(a);return p.forEach((t=>t.fields=t.fields.map((t=>d[t])))),{names:o,exprs:c,ops:p}}function gB(t){return t&&kS(t.params)?t.params():{}}const bB="Expr",vB="ExprList",_B="ExprNumber",xB="ExprObject",wB="JoinKeys",SB="JoinValues",kB="Options",IB="OrderKeys",AB="SelectionList",TB="TableRef",MB="TableRefList",EB="Descending",CB="Selection",NB="Window";function LB(t,e){return t&&t.expr?new OB({...t,...e}):new OB(e,t)}class OB{constructor(t,e){this.expr=e,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...kS(this.expr)?{func:!0}:{}}}}function DB(t){return LB(t,{desc:!0})}function $B(t,e,n=0){const i=n?{field:!0,table:n}:{field:!0};return LB(t,e?{expr:e,...i}:i)}function BB(t,e){return(e=e&&kS(e.query)?e.query():e)&&kS(e.evaluate)?e.evaluate(null,t):t(e)}function FB(t){return CS(t)&&(bS(t.all)||bS(t.matches)||bS(t.not)||bS(t.range))}function PB(t){return t&&kS(t.toObject)?t.toObject():kS(t)?{expr:String(t),func:!0}:bS(t)?t.map(PB):CS(t)?vO(t,(t=>PB(t))):t}function VB(t){return bS(t)?t.map(VB):CS(t)?bS(t.verbs)?eF.from(t):bS(t.all)?AO():bS(t.range)?function(t,e){return kO((n=>{let i=SS(t)?t:n.columnIndex(t),r=SS(e)?e:n.columnIndex(e);if(r<i){const t=r;r=i,i=t}return n.columnNames().slice(i,r+1)}),(()=>({range:[t,e]})))}(...t.range):bS(t.match)?(LS(e=RegExp(...t.match))&&(e=RegExp(e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"))),kO((t=>t.columnNames((t=>e.test(t)))),(()=>({matches:[e.source,e.flags]})))):bS(t.not)?TO(t.not.map(PB)):function(t){let e=t,n=t.expr;if(null!=n){if(!0===t.field?e=n=$B(n):!0===t.func&&(e=n=function(t){const e=t=>t;return e.toString=()=>t,e}(n)),CS(t.window)){const{frame:i,peers:r}=t.window;e=n=function(t,e,n){return LB(t,{window:{frame:e||[-1/0,0],peers:!!n}})}(n,i,r)}!0===t.desc&&(e=DB(n))}return t===e?vO(t,(t=>VB(t))):e}(t):t;var e}function UB(t){const e=[];return vS(t).forEach((t=>{SS(t)?e.push(t):LS(t)?e.push($B(t,null)):CS(t)&&t.expr||kS(t)?e.push(t):wS("Invalid key value: "+(t+""))})),e}function RB(t,e){return e<2?vS(t):t}const jB={[bB]:KB,[vB]:QB,[_B]:function(t){return SS(t)?t:YB(t)},[xB]:YB,[wB]:function(t){return bS(t)?t.map(QB):YB(t,{join:!0})},[SB]:function(t){return bS(t)?t.map(((t,e)=>e<2?QB(t):YB(t,{join:!0}))):YB(t,{join:!0})},[IB]:QB,[AB]:function(t){return vS(t).map(GB).flat()}};function zB(t,e,n){return e===kB?t?function(t,e={}){const n={};for(const i in t){const r=t[i];n[i]=e[i]?zB(r,e[i]):r}return n}(t,n):t:jB[e](t)}function qB(t){return{type:Fk,name:t}}function WB(t){return{type:Fk,index:t}}function YB(t,e){if(LS(t))return function(t,e){return yB({expr:t},{...e,ast:!0}).exprs[0]}(t,e);if(t.expr){let n;if(!0===t.field?n=qB(t.expr):!0===t.func&&(n=YB(t.expr,e)),n)return t.desc&&(n={type:EB,expr:n}),t.window&&(n={type:NB,expr:n,...t.window}),n}return Object.keys(t).map((n=>({...YB(t[n],e),as:n})))}function HB(t){const e=CB;return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:QB(t.not)}:t.range?{type:e,operator:"range",arguments:QB(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:wS("Invalid input")}function GB(t){return FB(t)?HB(t):SS(t)?WB(t):LS(t)?qB(t):CS(t)?Object.keys(t).map((e=>({type:Fk,name:e,as:t[e]}))):wS("Invalid input")}function KB(t){return FB(t)?HB(t):SS(t)?WB(t):LS(t)?qB(t):CS(t)?YB(t):wS("Invalid input")}function QB(t){return vS(t).map(KB).flat()}function XB(t){return t&&kS(t.toAST)?t.toAST():t}class JB{constructor(t,e=[],n=[]){this.verb=t,this.schema=e,e.forEach(((t,e)=>{const i=t.type,r=n[e],s=i===wB?bS(a=r)?a.map(UB):a:i===SB?function(t){return bS(t)?t.map(RB):t}(r):i===IB?function(t){const e=[];return t.forEach((t=>{const n=null!=t.expr?t.expr:t;if(CS(n)&&!kS(n))for(const t in n)e.push(n[t]);else t=SS(n)?n:LS(n)?$B(t):kS(n)?t:wS("Invalid orderby field: "+t),e.push(t)})),e}(r):r;var a;this[t.name]=void 0!==s?s:t.default}))}static from(t){const e=tF[t.verb],n=(e.schema||[]).map((({name:e})=>VB(t[e])));return e(...n)}evaluate(t,e){const n=this.schema.map((({name:t,type:n})=>{const i=this[t];return n===TB?BB(e,i):n===MB?i.map((t=>BB(e,t))):i}));return t[this.verb](...n)}toObject(){const t={verb:this.verb};return this.schema.forEach((({name:e})=>{t[e]=PB(this[e])})),t}toAST(){const t={type:"Verb",verb:this.verb};return this.schema.forEach((({name:e,type:n,props:i})=>{t[e]=function(t,e,n){return e===TB?XB(t):e===MB?t.map(XB):zB(PB(t),e,n)}(this[e],n,i)})),t}}function ZB(t,e){return Object.assign(((...n)=>new JB(t,e,n)),{schema:e})}const tF={count:ZB("count",[{name:"options",type:kB}]),derive:ZB("derive",[{name:"values",type:xB},{name:"options",type:kB,props:{before:AB,after:AB}}]),filter:ZB("filter",[{name:"criteria",type:xB}]),groupby:ZB("groupby",[{name:"keys",type:vB}]),orderby:ZB("orderby",[{name:"keys",type:IB}]),relocate:ZB("relocate",[{name:"columns",type:AB},{name:"options",type:kB,props:{before:AB,after:AB}}]),rename:ZB("rename",[{name:"columns",type:AB}]),rollup:ZB("rollup",[{name:"values",type:xB}]),sample:ZB("sample",[{name:"size",type:_B},{name:"options",type:kB,props:{weight:bB}}]),select:ZB("select",[{name:"columns",type:AB}]),ungroup:ZB("ungroup"),unorder:ZB("unorder"),reify:ZB("reify"),dedupe:ZB("dedupe",[{name:"keys",type:vB,default:[]}]),impute:ZB("impute",[{name:"values",type:xB},{name:"options",type:kB,props:{expand:vB}}]),fold:ZB("fold",[{name:"values",type:vB},{name:"options",type:kB}]),pivot:ZB("pivot",[{name:"keys",type:vB},{name:"values",type:vB},{name:"options",type:kB}]),spread:ZB("spread",[{name:"values",type:vB},{name:"options",type:kB}]),unroll:ZB("unroll",[{name:"values",type:vB},{name:"options",type:kB,props:{drop:vB}}]),lookup:ZB("lookup",[{name:"table",type:TB},{name:"on",type:wB},{name:"values",type:vB}]),join:ZB("join",[{name:"table",type:TB},{name:"on",type:wB},{name:"values",type:SB},{name:"options",type:kB}]),cross:ZB("cross",[{name:"table",type:TB},{name:"values",type:SB},{name:"options",type:kB}]),semijoin:ZB("semijoin",[{name:"table",type:TB},{name:"on",type:wB}]),antijoin:ZB("antijoin",[{name:"table",type:TB},{name:"on",type:wB}]),concat:ZB("concat",[{name:"tables",type:MB}]),union:ZB("union",[{name:"tables",type:MB}]),intersect:ZB("intersect",[{name:"tables",type:MB}]),except:ZB("except",[{name:"tables",type:MB}])};class eF extends xS{constructor(t,e,n){super(e),this._verbs=t||[],this._table=n}static from({verbs:t,table:e,params:n}){return new eF(t.map(JB.from),n,e)}get[Symbol.toStringTag](){if(!this._verbs)return"Object";return`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:"")}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,e){t=t||e(this._table);for(const n of this._verbs)t=n.evaluate(t.params(this._params),e);return t}toObject(){return nF(this,"toObject")}toJSON(){return this.toObject()}toAST(){return nF(this,"toAST",{type:"Query"})}}function nF(t,e,n){return{...n,verbs:t._verbs.map((t=>t[e]())),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function iF(t,e){return new eF(t._verbs.concat(e),t._params,t._table)}for(const t in tF){const e=tF[t];eF.prototype["__"+t]=function(t,...n){return iF(t,e(...n))}}function rF(t,e,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map(((t,e)=>t.map(((t,n)=>`${i[e]}${n} = ${i[e]}[${n}]`)).join(", "))).join(", ")+`; return (${t}) => ${e};`),Function(...r)(...n)}function sF(t,e){const n=FS();return e.forEach(((e,i)=>{const r=LS(e)?e:i;if(r){const e=t.column(i)||wS(`Unrecognized column: ${i}`);n.add(r,e)}})),t.create(n)}function aF(t,e,{before:n,after:i}={}){const r=null!=n,s=null!=i;r||s||wS("relocate requires a before or after option."),r&&s&&wS("relocate accepts only one of the before or after options."),e=SO(t,e);const a=[...SO(t,r?n:i).keys()],o=r?a[0]:a.pop(),c=new Map;return t.columnNames().forEach((t=>{const n=!e.has(t);if(t===o){s&&n&&c.set(t,t);for(const[t,n]of e)c.set(t,n);if(s)return}n&&c.set(t,t)})),sF(t,c)}function oF(t,e=(t=>t),n=""){const i=t.length;if(!i)return"";let r=e(t[0],0);for(let s=1;s<i;++s)r+=n+e(t[s],s);return r}function cF(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function lF(t){return gk(t)?t:+t}class uF{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:function(t,e=0,n=t.length){let i=n?t[e++]:VS;for(let r=e;r<n;++r)i>t[r]&&(i=t[r]);return i}(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:function(t,e=0,n=t.length){let i=n?t[e++]:VS;for(let r=e;r<n;++r)i<t[r]&&(i=t[r]);return i}(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(cF)),function(t,e){const n=t.length;if(!n)return VS;if((e=+e)<=0||n<2)return lF(t[0]);if(e>=1)return lF(t[n-1]);const i=(n-1)*e,r=Math.floor(i),s=lF(t[r]);return gk(s)?s:s+(lF(t[r+1])-s)*(i-r)}(this._sorted,t)}}const hF=(t,e,n)=>rF(e,"{"+oF(t,((t,i)=>`_${i}.${n}(${e});`))+"}",t);function fF(t,e){const{ops:n,output:i}=function(t,e){const n={},i=[];function r(t,s=[]){const a=t+":"+s;if(n[a])return n[a];const o=cI(t),c=o.create(...s);return e<0&&o.stream&&o.stream.forEach((t=>r(t,[]))),o.req&&o.req.forEach((t=>r(t,[]))),n[a]=c,i.push(c),c}const s=t.map((t=>{const e=r(t.name,t.params);return e.output=t.id,e}));return{ops:i,output:s}}(t,e),r=t[0].fields,s=r.length;return new(0===s?dF:1===s?pF:2===s?mF:wS("Unsupported field count: "+s))(r,n,i,e)}class dF extends NO{constructor(t,e,n,i){super(n),this._op=e,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach((e=>e.init(t))),t.values&&(t.list=new uF),t}write(t,e,n){const i=this._outputs,r=i.length;for(let s=0;s<r;++s)e[i[s].output][n]=i[s].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class pF extends dF{constructor(t,e,n,i){super(t,e,n,i);const r=["state","v1","v2"];this._add=hF(e,r,"add"),this._rem=hF(e,r,"rem")}add(t,e,n){const i=this._fields[0](e,n);++t.count,zS(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,e,n){const i=this._fields[0](e,n);--t.count,zS(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class mF extends dF{constructor(t,e,n,i){super(t,e,n,i);const r=["state","v1","v2"];this._add=hF(e,r,"add"),this._rem=hF(e,r,"rem")}add(t,e,n){const i=this._fields[0](e,n),r=this._fields[1](e,n);++t.count,zS(i)&&zS(r)&&(++t.valid,t.list&&t.list.add([i,r]),this._add(t,i,r))}rem(t,e,n){const i=this._fields[0](e,n),r=this._fields[1](e,n);--t.count,zS(i)&&zS(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,r))}}function yF(t,e,n){if(e.length){const i=t.data(),{keys:r}=t.groups()||{},s=gF(t,e),a=r?(t,e)=>s[t][r[e]]:t=>s[t][0];n=n.map((t=>e=>t(e,i,a)))}return n}function gF(t,e,n){if(!e.length)return n;const i=bF(e),r=t.groups(),s=r?r.size:1;return n=n||IS(e.length,(()=>Array(s))),s>1?i.forEach((e=>{const i=_F(t,e,r);for(let t=0;t<s;++t)e.write(i[t],n,t)})):i.forEach((e=>{const i=vF(t,e);e.write(i,n,0)})),n}function bF(t,e){const n=[],i={};for(const e of t){const t=e.fields.map((t=>t+"")).join(",");(i[t]||(i[t]=[])).push(e)}for(const t in i)n.push(fF(i[t],e));return n}function vF(t,e){const n=e.init(),i=t.totalRows(),r=t.data(),s=t.mask();if(t.isOrdered()){const s=t.indices();for(let t=0;t<i;++t)e.add(n,s[t],r)}else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))e.add(n,t,r);else for(let t=0;t<i;++t)e.add(n,t,r);return n}function _F(t,e,n){const{keys:i,size:r}=n,s=IS(r,(()=>e.init())),a=t.data();if(t.isOrdered()){const n=t.indices(),r=n.length;for(let t=0;t<r;++t){const r=n[t];e.add(s[i[r]],r,a)}}else if(t.isFiltered()){const n=t.mask();for(let t=n.next(0);t>=0;t=n.next(t+1))e.add(s[i[t]],t,a)}else{const n=t.totalRows();for(let t=0;t<n;++t)e.add(s[i[t]],t,a)}return s}function xF(t,e){const{get:n,names:i,rows:r,size:s}=e,a=i.length;for(let e=0;e<a;++e){const a=t.add(i[e],Array(s)),o=n[e];for(let t=0;t<s;++t)a[t]=o(r[t])}}function wF(t){return{left(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)<0?i=s+1:r=s}return i},right(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)>0?r=s:i=s+1}return i}}}const SF=wF(cF);const kF=t=>(t.frame||[null,null]).map((t=>Number.isFinite(t)?Math.abs(t):null)),IF=t=>!!t.peers;function AF(t,e,n,i={},r){const s=t.data(),a=function(t,e){const n={};return t.forEach((t=>{const e=kF(t),i=IF(t),r=`${e},${i}`,{aggOps:s,winOps:a}=n[r]||(n[r]={frame:e,peers:i,aggOps:[],winOps:[]});sI(t.name)?s.push(t):a.push(function(t){const{id:e,name:n,fields:i=[],params:r=[]}=t,s=lI(n).create(...r);return i.length&&(s.get=i[0]),s.id=e,s}(t))})),Object.values(n).map((t=>function(t,e,n,i,r){let s,a,o,c,l;const u=t=>a[t-1]===a[t],h=i.length,f=r.length,d=i.length?rF(["w","r","k"],"{"+oF(i,((t,e)=>`r[_${e}.id][k]=_${e}.value(w,_${e}.get);`))+"}",i):()=>{},p={i0:0,i1:0,index:0,size:0,peer:u,init(t,e,n,u){p.index=p.i0=p.i1=0,p.size=e.length,s=t,a=e,c=n,l=u,o=r?r.map((t=>t.init())):null;for(let t=0;t<h;++t)i[t].init();return p},value:(e,n)=>n(s[e],t),step(i){const[h,m]=e,y=p.size,g=p.i0,b=p.i1;p.i0=null!=h?Math.max(0,i-Math.abs(h)):0,p.i1=null!=m?Math.min(y,i+Math.abs(m)+1):y,p.index=i,n&&(p.i0>0&&u(p.i0)&&(p.i0=SF.left(a,a[p.i0])),p.i1<y&&u(p.i1)&&(p.i1=SF.right(a,a[p.i1-1])));for(let e=0;e<f;++e){const n=r[e],i=o[e];for(let e=g;e<p.i0;++e)n.rem(i,s[e],t);for(let e=b;e<p.i1;++e)n.add(i,s[e],t);n.write(i,c,l)}return d(p,c,l),c}};return p}(e,t.frame,t.peers,t.winOps,bF(t.aggOps,null!=t.frame[0]?-1:1))))}(r,s),o=a.length,c=rF(["r","d","op"],"{"+oF(e,((t,e)=>`_${e}[r] = $${e}(r, d, op);`))+"}",e,n);t.partitions().forEach(((e,n)=>{const r=e.length,l=function(t,e){if(t.isOrdered()){const n=t.comparator(),i=t.data(),r=e.length,s=new Uint32Array(r);for(let t=1,a=0;t<r;++t)s[t]=n(e[t-1],e[t],i)?++a:a;return s}return e}(t,e);for(let t=0;t<o;++t)a[t].init(e,l,i,n);const u=t=>i[t][n];for(let t=0;t<r;++t){for(let e=0;e<o;++e)a[e].step(t);c(e[t],s,u)}}))}function TF(t){return aI(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function MF(t,{names:e,exprs:n,ops:i},r={}){const s=t.totalRows(),a=FS(r.drop?null:t),o=e.map((t=>a.add(t,Array(s)))),[c,l]=function(t){const e=[],n=[],i=t.length;for(let r=0;r<i;++r){const i=t[r];i.id=r,(TF(i)?n:e).push(i)}return[e,n]}(i),u=t.isGrouped()?t.groups().size:1,h=gF(t,c,IS(i.length,(()=>Array(u))));return l.length?AF(t,o,n,h,l):function(t,e,n,i){const r=t.mask(),s=t.data(),{keys:a}=t.groups()||{},o=a?(t,e)=>i[t][a[e]]:t=>i[t][0],c=e.length;for(let i=0;i<c;++i){const a=n[i],c=e[i];if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))c[t]=a(t,s,o);else{const e=t.totalRows();for(let t=0;t<e;++t)c[t]=a(t,s,o)}}}(t,o,n,h),t.create(a)}const EF=2147483648;class CF{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let e=0;for(let n=0;n<t;++n)for(let t=this._bits[n];t;++e)t&=t-1;return e}get(t){return this._bits[t>>5]&EF>>>t}set(t){this._bits[t>>5]|=EF>>>t}clear(t){this._bits[t>>5]&=~(EF>>>t)}scan(t){for(let e=this.next(0);e>=0;e=this.next(e+1))t(e)}next(t){const e=this._bits,n=e.length;let i=t>>5,r=e[i]&4294967295>>>t;for(;i<n;r=e[++i])if(0!==r)return(i<<5)+Math.clz32(r);return-1}nth(t){let e=this.next(0);for(;t--&&e>=0;)e=this.next(e+1);return e}not(){const t=this._bits,e=t.length;for(let n=0;n<e;++n)t[n]=~t[n];const n=this._size%32;return n&&(t[e-1]&=EF>>n-1),this}and(t){if(t){const e=this._bits,n=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]&=n[t]}return this}or(t){if(t){const e=this._bits,n=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]|=n[t]}return this}}function NF(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(!e.length)return t;const s=r.limit>0?+r.limit:1/0,a=r.index?!0===r.index?"index":r.index+"":null,o=new Set(r.drop),c=yF(t,i,n),l=FS(),u=new Set(e),h=[],f=[],d=[];t.columnNames().forEach((e=>{if(!o.has(e)){const n=l.add(e,[]);u.has(e)||(h.push(t.column(e)),f.push(n))}})),e.forEach((t=>{o.has(t)||(l.has(t)||l.add(t,[]),d.push(l.data[t]))}));const p=a?l.add(a,[]):null;let m=0;const y=h.length,g=d.length,b=(t,e)=>{for(let n=0;n<y;++n)f[n].length=m+e,f[n].fill(h[n].get(t),m,m+e)},v=p?(t,e)=>{for(let n=0;n<e;++n)p[t+n]=n}:()=>{};if(1===g){const e=c[0],n=d[0];t.scan(((t,i)=>{const r=vS(e(t,i)),a=Math.min(r.length,s);b(t,a);for(let t=0;t<a;++t)n[m+t]=r[t];v(m,a),m+=a}))}else t.scan(((t,e)=>{let n=0;const i=c.map((i=>{const r=vS(i(t,e));return n=Math.min(Math.max(n,r.length),s),r}));b(t,n);for(let t=0;t<g;++t){const e=d[t],r=i[t];for(let t=0;t<n;++t)e[m+t]=r[t]}v(m,n),m+=n}));return t.create(l.new())}function LF(t,e,n,i={window:!1}){const r=new Map,s=n=>{LS(n=SS(n)?e.columnName(n):n)?r.set(n,$B(n)):kS(n)?SO(e,n).forEach(s):CS(n)?wO(r,n):wS(`Invalid ${t} value: ${n+""}`)};return vS(n).forEach(s),i.preparse&&i.preparse(r),yB(r,{table:e,...i})}function OF(t,e,n,i){const r=n&&n.length;return function(t,{names:e,exprs:n,ops:i},r){const s=yF(t,i,n),a=r?null:FS(t),o=t.totalRows();return e.forEach(((e,n)=>{const i=t.column(e),c=r?i.data:a.add(e,Array(o)),l=s[n];t.scan((t=>{const e=i.get(t);c[t]=zS(e)?e:l(t)}))})),r?t:t.create(a)}(r?function(t,e,n){const i=t.groups(),r=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map((e=>t.getter(e)))),o=new Set,c=Xk(a);t.scan(((t,e)=>o.add(c(t,e))));const l=t.columnNames(),u=FS(),h=l.map((t=>u.add(t,[])));l.forEach(((e,n)=>{const i=r[e],s=h[n];t.scan((t=>s.push(i.get(t))))}));const f=Xk(a.map(((t,e)=>t=>t[e]))),d=rF("v","{"+h.map(((t,e)=>`_${e}.push(v[$${e}]);`)).join("")+"}",h,l.map((t=>s.indexOf(t))));if(i){let t=i.keys.length;const e=n.reduce(((t,e)=>t*e.length),i.size),r=new Uint32Array(e+(t-o.size));r.set(i.keys),DF(i,n,((e,n)=>{o.has(f(e))||(d(e),r[t++]=n[0])})),u.groupby({...i,keys:r})}else DF(i,n,(t=>{o.has(f(t))||d(t)}));return t.create(u.new())}(t,n,i):t,e,r)}function DF(t,e,n){const i=t?t.get.length:0,r=t?1:0,s=r+e.length,a=new Int32Array(s),o=new Int32Array(s),c=[];if(t){const{get:e,rows:n,size:r}=t;a[0]=r,c.push(((t,r)=>{const s=n[r];for(let n=0;n<i;++n)t[n]=e[n](s)}))}e.forEach(((t,e)=>{const n=e+i;a[e+r]=t.length,c.push(((e,i)=>e[n]=t[i]))}));const l=Array(i+e.length);for(let t=0;t<s;++t)c[t](l,0);n(l,o);for(let t=s-1;t>=0;){const e=++o[t];e<a[t]?(c[t](l,e),n(l,o),t=s-1):(o[t]=0,c[t](l,0),--t)}}function $F(t,{names:e,exprs:n,ops:i}){const r=FS(),s=t.groups();return s&&xF(r,s),function(t,e,n,i=[],r){if(!e.length)return;const s=n?n.size:1,a=(t,e)=>i[t][e],o=t.length;for(let n=0;n<o;++n){const o=e[n];if(null!=o.field)r.add(t[n],i[o.field]);else if(s>1){const e=r.add(t[n],Array(s));for(let t=0;t<s;++t)e[t]=o(t,null,a)}else r.add(t[n],[o(0,null,a)])}}(e,n,s,gF(t,i),r),t.create(r.new())}function BF(t){t.forEach(((e,n)=>e.field?t.set(n,kk(e+"")):0))}function FF(t,e){const n=new Map;return t.scan(((t,i)=>{const r=e(t,i);null!=r&&r==r&&n.set(r,t)})),n}function PF(t,e,n,{names:i,exprs:r},s={}){const a=t.data(),o=t.indices(!1),c=o.length,l=new Int32Array(c),u=e.data(),h=e.indices(!1),f=h.length,d=new Int32Array(f),p=i.length,m=FS(),y=Array(p),g=Array(p);for(let t=0;t<i.length;++t)y[t]=m.add(i[t],[]),g[t]=r[t];const b=function(t,e){const n=["i","a","j","b"];return rF(n,"{"+oF(t,((t,e)=>`_${e}.push($${e}(${n}));`))+"}",t,e)}(y,g);if((bS(n)?UF:VF)(b,n,a,u,o,h,l,d,c,f),s.left)for(let t=0;t<c;++t)l[t]||b(o[t],a,-1,u);if(s.right)for(let t=0;t<f;++t)d[t]||b(-1,a,h[t],u);return t.create(m.new())}function VF(t,e,n,i,r,s,a,o,c,l){for(let u=0;u<c;++u){const c=r[u];for(let r=0;r<l;++r){const l=s[r];e(c,n,l,i)&&(t(c,n,l,i),a[u]=1,o[r]=1)}}}function UF(t,[e,n],i,r,s,a,o,c,l,u){let h,f,d,p,m,y,g,b,v=t;l>=u?(h=i,f=e,d=o,p=s,m=r,y=n,g=c,b=a):(h=r,f=n,d=c,p=a,m=i,y=e,g=o,b=s,v=(e,n,i,r)=>t(i,r,e,n));const _=function(t,e,n){const i=new Map,r=t.length;for(let s=0;s<r;++s){const r=n(t[s],e);null!=r&&r==r&&(i.has(r)?i.get(r).push(s):i.set(r,[s]))}return i}(b,m,y),x=p.length;for(let t=0;t<x;++t){const e=p[t],n=_.get(f(e,h));if(n){const i=n.length;for(let t=0;t<i;++t){const i=n[t];v(e,h,b[i],m),g[i]=1}d[t]=1}}}function RF(t,e,n){const i=new Map;vS(n).forEach(((n,r)=>{LS(n=SS(n)?e.columnName(n):n)?i.set(r,$B(n)):kS(n)||CS(n)&&n.expr?i.set(r,n):wS(`Invalid ${t} key value: ${n+""}`)}));return Xk(yB(i,{table:e,aggregate:!1,window:!1}).exprs,!0)}function jF(t,e,n){if(n)LS(n)?n=[n,n]:bS(n)&&1===n.length&&(n=[n[0],n[0]]);else{const i=function(t,e){const n=new Set(e);return t.filter((t=>n.has(t)))}(t.columnNames(),e.columnNames());i.length||wS("Natural join requires shared column names."),n=[i,i]}return n}function zF(t,e,n,i){return n.length!==i.length&&wS("Mismatched number of join keys"),[RF("join",t,n),RF("join",e,i)]}const qF={aggregate:!1,window:!1,index:1};function WF(t,e,n,i,r={}){n=jF(t,e,n);const s={join:[t,e]};let a;if(bS(n)){const[s,o]=n.map(vS);a=zF(t,e,s,o),i||(i=function(t,e,n,i){const r=[];e.forEach(((t,e)=>LS(t)&&t===n[e]?r.push(t):0));const s=TO(r);if(i.left&&i.right){const e=new Set(r);return[t.columnNames().map((t=>{const n=`[${bk(t)}]`;return e.has(t)?{[t]:`(a, b) => a${n} == null ? b${n} : a${n}`}:t})),s]}return i.right?[s,AO()]:[AO(),s]}(t,s,o,r))}else a=yB({on:n},s).exprs[0],i||(i=[AO(),AO()]);return PF(t,e,a,function(t,e,n,i,r=[]){if(bS(n)){let s,a,o,c=n.length;s=a=o={names:[],exprs:[]},c--&&(s=LF("join",t,n[0],i)),c--&&(a=LF("join",e,n[1],qF)),c--&&(o=yB(n[2],i));const l=new Set,u=new Set(s.names);return a.names.forEach((t=>{u.has(t)&&l.add(t)})),l.size&&(YF(s.names,l,r[0]||"_1"),YF(a.names,l,r[1]||"_2")),{names:s.names.concat(a.names,o.names),exprs:s.exprs.concat(a.exprs,o.exprs)}}return yB(n,i)}(t,e,i,s,r&&r.suffix),r)}function YF(t,e,n){t.forEach(((i,r)=>e.has(i)?t[r]=i+n:0))}function HF(t,e,n,[i,r]){const s=FF(n,r);e.scan(((e,n)=>{s.get(i(e,n))>=0&&t.set(e)}))}function GF(t,e,n,i){const r=e.numRows(),s=n.numRows(),a=e.data(),o=n.data();if(e.isFiltered()||n.isFiltered()){const c=e.indices(!1),l=n.indices(!1);for(let e=0;e<r;++e){const n=c[e];for(let e=0;e<s;++e)if(i(n,a,l[e],o)){t.set(n);break}}}else for(let e=0;e<r;++e)for(let n=0;n<s;++n)if(i(e,a,n,o)){t.set(e);break}}function KF(t,e,n,i){n=jF(t,e,n);return function(t,e,n,i={}){const r=new CF(t.totalRows());return(bS(n)?HF:GF)(r,t,e,n),i.anti&&r.not().and(t.mask()),t.create({filter:r})}(t,e,bS(n)?zF(t,e,...n.map(vS)):yB({on:n},{join:[t,e]}).exprs[0],i)}const QF=(t,e)=>null!=t?t:e;function XF(t,e,n,i={}){const{keys:r,keyColumn:s}=function(t,e,n){const i=n.limit>0?+n.limit:1/0,r=QF(n.sort,!0),s=QF(n.keySeparator,"_"),a=yF(t,e.ops,e.exprs),o=1===a.length?a[0]:(t,e)=>a.map((n=>n(t,e))).join(s),c=Array(t.totalRows());t.scan(((t,e)=>c[t]=o(t,e)));const l=gF(t.ungroup(),[{id:0,name:"array_agg_distinct",fields:[t=>c[t]],params:[]}])[0][0],u=r?l.sort():l;return{keys:Number.isFinite(i)?u.slice(0,i):u,keyColumn:c}}(t,e,i),a=QF(i.valueSeparator,"_"),o=n.names.length>1?(t,e)=>e+a+r[t]:t=>r[t],c=r.map((e=>gF(t,n.ops.map((t=>{if("count"===t.name){const n=t=>e===s[t]?1:NaN;return n.toString=()=>e+":1",{...t,name:"sum",fields:[n]}}const n=t.fields.map((t=>{const n=(n,i)=>e===s[n]?t(n,i):NaN;return n.toString=()=>e+":"+t,n}));return{...t,fields:n}})))));return t.create(function({names:t,exprs:e},n,i,r){const s=i?i.size:1,a=FS(),o=r.length,c=t.length;let l;const u=(t,e)=>l[t][e];i&&xF(a,i);for(let i=0;i<c;++i){const c=e[i];if(null!=c.field)for(let e=0;e<o;++e)a.add(n(e,t[i]),r[e][c.field]);else if(s>1)for(let e=0;e<o;++e){l=r[e];const o=a.add(n(e,t[i]),Array(s));for(let t=0;t<s;++t)o[t]=c(t,null,u)}else for(let e=0;e<o;++e)l=r[e],a.add(n(e,t[i]),[c(0,null,u)])}return a.new()}(n,o,t.groups(),c))}function JF(t){t.forEach(((e,n)=>e.field?t.set(n,xk(e+"")):0))}function ZF(t,e){return $F(t,yB(e,{table:t,aggronly:!0,window:!1}))}function tP(t,e,n,i){return(e?i?nP:eP:i?rP:iP)(t.length,t,n,i)}function eP(t,e,n){const i=n.length;for(let r=0;r<t;++r)e[r]=n[i*uk()|0];return e}function nP(t,e,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let t=0;t<r;++t)s[t]=a+=i(n[t]);const o=wF(cF).right;for(let i=0;i<t;++i)e[i]=n[o(s,a*uk())];return e}function iP(t,e,n){const i=n.length;if(t>=i)return n;for(let i=0;i<t;++i)e[i]=n[i];for(let r=t;r<i;++r){const i=r*uk();i<t&&(e[0|i]=n[r])}return e}function rP(t,e,n,i){const r=n.length;if(t>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let t=0;t<r;++t)a[t]=t,s[t]=-Math.log(uk())/i(n[t]);a.sort(((t,e)=>s[t]-s[e]));for(let i=0;i<t;++i)e[i]=n[a[i]];return e}function sP(t,e,n,i={}){const{replace:r,shuffle:s}=i,a=t.partitions(!1);let o=0;e=a.map(((t,n)=>{let i=e(n);return o+=i=r?i:Math.min(t.length,i),i}));const c=new Uint32Array(o);let l=0;return a.forEach(((t,i)=>{const s=e[i],a=c.subarray(l,l+=s);r||s!==t.length?tP(a,r,t,n):a.set(t)})),!1!==s&&(a.length>1||!r)&&function(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){const n=uk()*i--|0,r=t[i+e];t[i+e]=t[n+e],t[n+e]=r}}(c),t.reify(c)}const aP=t=>e=>t.get(e)||0;function oP(t,{names:e,exprs:n,ops:i=[]},r={}){if(0===e.length)return t;const s=1===e.length&&r.as||[],a=null==r.drop||!!r.drop,o=null==r.limit?s.length||1/0:Math.max(1,+r.limit||1),c=yF(t,i,n),l=FS(),u=e.reduce(((t,e,n)=>t.set(e,n)),new Map),h=(e,n)=>{const i=function(t,e,n){const i=t.totalRows(),r=[];return t.scan(((t,s)=>{const a=vS(e(t,s)),o=Math.min(a.length,n);for(;r.length<o;)r.push(Array(i).fill(VS));for(let e=0;e<o;++e)r[e][t]=a[e]})),r}(t,c[e],o),r=i.length;for(let t=0;t<r;++t)l.add(s[t]||`${n}_${t+1}`,i[t])};return t.columnNames().forEach((e=>{u.has(e)?(a||l.add(e,t.column(e)),h(u.get(e),e),u.delete(e)):l.add(e,t.column(e))})),u.forEach(h),t.create(l)}function cP(t,{names:e=[],exprs:n=[],ops:i=[]}){const r=e.length;if(0===r)return null;if(1===r&&!t.isFiltered()&&n[0].field){const i=t.column(n[0].field);if(i.groups)return i.groups(e)}let s=yF(t,i,n);const a=Xk(s),o=t.totalRows(),c=new Uint32Array(o),l={},u=[],h=t.data(),f=t.mask();if(f)for(let t=f.next(0);t>=0;t=f.next(t+1)){const e=a(t,h)+"",n=l[e];c[t]=null!=n?n:l[e]=u.push(t)-1}else for(let t=0;t<o;++t){const e=a(t,h)+"",n=l[e];c[t]=null!=n?n:l[e]=u.push(t)-1}return i.length||(s=s.map((t=>e=>t(e,h)))),{keys:c,get:s,names:e,rows:u,size:u.length}}const lP=(t,e,n,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}\n    : (u > v || v == null) && u != null ? ${i}\n    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n    : v !== v && u === u ? ${i} : `;var uP={__antijoin:(t,e,n)=>KF(t,e,n,{anti:!0}),__count:(t,e={})=>ZF(t,{[e.as||"count"]:wk()}),__cross:(t,e,n,i)=>WF(t,e,(()=>!0),n,{...i,left:!0,right:!0}),__concat:function(t,e){const n=t.numRows(),i=n+e.reduce(((t,e)=>t+e.numRows()),0);if(n===i)return t;const r=[t,...e],s=FS();return t.columnNames().forEach((t=>{const e=Array(i);let n=0;r.forEach((i=>{const r=i.column(t)||{get:()=>VS};i.scan((t=>e[n++]=r.get(t)))})),s.add(t,e)})),t.create(s.new())},__dedupe:function(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").ungroup().reify()},__derive:function(t,e,n={}){const i=MF(t,yB(e,{table:t}),n);return n.drop||null==n.before&&null==n.after?i:aF(i,Object.keys(e).filter((e=>!t.column(e))),n)},__except:function(t,e){if(0===e.length)return t;const n=t.columnNames();return e.reduce(((t,e)=>t.antijoin(e.select(n))),t).dedupe()},__filter:function(t,e){const n=yB({p:e},{table:t});let i=n.exprs[0];if(n.ops.length){const{data:e}=MF(t,n,{drop:!0}).column("p");i=t=>e[t]}return function(t,e){const n=t.totalRows(),i=t.mask(),r=t.data(),s=new CF(n);if(i)for(let t=i.next(0);t>=0;t=i.next(t+1))e(t,r)&&s.set(t);else for(let t=0;t<n;++t)e(t,r)&&s.set(t);return t.create({filter:s})}(t,i)},__fold:function(t,e,n){return function(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(0===e.length)return t;const[s="key",a="value"]=r.as||[],o=yF(t,i,n);return NF(t,{names:[s,a],exprs:[()=>e,(t,e)=>o.map((n=>n(t,e)))]},{...r,drop:e})}(t,LF("fold",t,e),n)},__impute:function(t,e,n={}){if((e=yB(e,{table:t})).names.forEach((e=>t.column(e)?0:wS(`Invalid impute column ${bk(e)}`))),n.expand){const i={preparse:BF,aggronly:!0},r=LF("impute",t,n.expand,i),s=$F(t.ungroup(),r);return OF(t,e,r.names,r.names.map((t=>s.get(t,0))))}return OF(t,e)},__intersect:function(t,e){const n=t.columnNames();return e.length?e.reduce(((t,e)=>t.semijoin(e.select(n))),t).dedupe():t.reify([])},__join:WF,__lookup:function(t,e,n,i){return function(t,e,[n,i],{names:r,exprs:s,ops:a}){const o=FS(t),c=t.totalRows();r.forEach((t=>o.add(t,Array(c).fill(VS))));const l=FF(e,i),u=rF(["lr","rr","data"],"{"+oF(r,((t,e)=>`_[${e}][lr] = $[${e}](rr, data);`))+"}",r.map((t=>o.data[t])),yF(e,a,s)),h=e.data();return t.scan(((t,e)=>{const i=l.get(n(t,e));i>=0&&u(t,i,h)})),t.create(o)}(t,e,[RF("lookup",t,(n=jF(t,e,n))[0]),RF("lookup",e,n[1])],LF("lookup",e,i))},__pivot:function(t,e,n,i){return XF(t,LF("fold",t,e),LF("fold",t,n,{preparse:JF,aggronly:!0}),i)},__relocate:aF,__rename:function(t,e){const n=new Map;return t.columnNames((t=>(n.set(t,t),0))),sF(t,SO(t,e,n))},__rollup:ZF,__sample:function(t,e,n={}){return sP(t,function(t,e){return SS(e)?()=>e:aP($F(t,yB({size:e},{table:t,window:!1})).column("size"))}(t,e),function(t,e){return null==e?null:(e=SS(e)?t.columnName(e):e,aP(LS(e)?t.column(e):MF(t,yB({w:e},{table:t}),{drop:!0}).column("w")))}(t,n.weight),n)},__select:function(t,e){return sF(t,SO(t,e))},__semijoin:KF,__spread:function(t,e,n){return oP(t,LF("spread",t,e),n)},__union:function(t,e){return t.concat(e).dedupe()},__unroll:function(t,e,n){return NF(t,LF("unroll",t,e),n&&n.drop?{...n,drop:LF("unroll",t,n.drop).names}:n)},__groupby:function(t,e){return function(t,e){return t.create({groups:cP(t,e)})}(t,LF("groupby",t,e))},__orderby:function(t,e){return function(t,e){return t.create({order:e})}(t,function(t,e){let n=-1;const i=new Map,r=t=>i.set(++n+"",t);return e.forEach((e=>{const n=null!=e.expr?e.expr:e;if(CS(n)&&!kS(n))for(const t in n)r(n[t]);else r(SS(n)?$B(e,t.columnName(n)):LS(n)?$B(e):kS(n)?e:wS("Invalid orderby field: "+(e+"")))})),function(t,e){const n=[],i=[],r=[];let s=null,a="0",o="0";t.isGrouped()&&(s=t.groups().keys,a="ka",o="kb");const{ops:c}=yB(e,{table:t,value:(t,e)=>{if(n.push(t),e.escape){const t=t=>`fn[${r.length}](${t}, data)`;i.push([t("a"),t("b")]),r.push(e.escape)}else i.push([Kk(e,{index:"a",op:a}),Kk(e,{index:"b",op:o})])},window:!1}),l=gF(t,c),u=(t,e)=>l[t][e],h=n.length;let f="return (a, b) => {"+(u&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let t=0;t<h;++t){const r=e.get(n[t]).desc?-1:1,[s,a]=i[t];f+=lP(s,a,-r,r)}return f+="0;};",Function("op","keys","fn","data",f)(u,s,r,t.data())}(t,i)}(t,e))},__ungroup:function(t){return t.isGrouped()?t.create({groups:null}):t},__unorder:function(t){return t.isOrdered()?t.create({order:null}):t},__reduce:function(t,e){const n=FS(),i=t.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},c=new Uint32Array(o+1);s.forEach((t=>n.add(t,null)));const l=i?_F(t,e,i):[vF(t,e)];e.outputs().map((t=>n.add(t,[])));const u=c.length-1;let h=0;for(let t=0;t<u;++t)h+=c[t+1]=e.write(l[t],n.data,c[t]);if(i){const e=t.data();s.forEach(((t,i)=>{const s=n.data[t]=Array(h),l=r[i];for(let t=0,n=0;t<o;++t)s.fill(l(a[t],e),n,n+=c[t+1])}))}return t.create(n.new())}};function hP(t){let e,n;return e=new gS({props:{options:{x:{label:"User",line:!0},y:{label:"Number of Photos",line:!0},marginLeft:120,marks:[uS(t[0].filter(dP).orderby(DB(pP)),{y:"full_name",x:"count",tip:!0,fill:"full_name",sort:{y:"x",reverse:!0}})]}}}),{c(){V(e.$$.fragment)},m(t,i){U(e,t,i),n=!0},p(t,n){const i={};1&n&&(i.options={x:{label:"User",line:!0},y:{label:"Number of Photos",line:!0},marginLeft:120,marks:[uS(t[0].filter(dP).orderby(DB(pP)),{y:"full_name",x:"count",tip:!0,fill:"full_name",sort:{y:"x",reverse:!0}})]}),e.$set(i)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function fP(t){let e,n,i=t[0]&&hP(t);return{c(){i&&i.c(),e=p()},m(t,r){i&&i.m(t,r),l(t,e,r),n=!0},p(t,[n]){t[0]?i?(i.p(t,n),1&n&&F(i,1)):(i=hP(t),i.c(),F(i,1),i.m(e.parentNode,e)):i&&($(),P(i,1,1,(()=>{i=null})),B())},i(t){n||(F(i),n=!0)},o(t){P(i),n=!1},d(t){i&&i.d(t),t&&u(e)}}}Object.assign(EO.prototype,uP),EO.prototype;const dP=t=>"no_name"!=t.full_name&&"no_face"!=t.full_name,pP=t=>t.count;function mP(t,e,n){let{name_count:i}=e;return t.$$set=t=>{"name_count"in t&&n(0,i=t.name_count)},[i]}class yP extends q{constructor(t){super(),z(this,t,mP,fP,a,{name_count:0})}}function gP(t){let e,n;return e=new gS({props:{options:{title:"Photos of user over time",x:{label:"User",line:!0},y:{label:"Number of Photos",line:!0},marginLeft:120,marks:[dS({olap_table:t[1]},{x:"year_month",y:"count",stroke:"full_name",tip:!0,fill:"full_name",sort:{y:"x",reverse:!0}})]}}}),{c(){V(e.$$.fragment)},m(t,i){U(e,t,i),n=!0},p(t,n){const i={};2&n&&(i.options={title:"Photos of user over time",x:{label:"User",line:!0},y:{label:"Number of Photos",line:!0},marginLeft:120,marks:[dS({olap_table:t[1]},{x:"year_month",y:"count",stroke:"full_name",tip:!0,fill:"full_name",sort:{y:"x",reverse:!0}})]}),e.$set(i)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function bP(t){let e,n,i=t[1]&&t[0]&&gP(t);return{c(){i&&i.c(),e=p()},m(t,r){i&&i.m(t,r),l(t,e,r),n=!0},p(t,[n]){t[1]&&t[0]?i?(i.p(t,n),3&n&&F(i,1)):(i=gP(t),i.c(),F(i,1),i.m(e.parentNode,e)):i&&($(),P(i,1,1,(()=>{i=null})),B())},i(t){n||(F(i),n=!0)},o(t){P(i),n=!1},d(t){i&&i.d(t),t&&u(e)}}}function vP(t,e,n){let{chosen_name:i}=e,{olap_table:r}=e;return t.$$set=t=>{"chosen_name"in t&&n(0,i=t.chosen_name),"olap_table"in t&&n(1,r=t.olap_table)},[i,r]}class _P extends q{constructor(t){super(),z(this,t,vP,bP,a,{chosen_name:0,olap_table:1})}}function xP(t,e,n){const i=t.slice();return i[7]=e[n],i}function wP(e){let n;return{c(){n=h("p"),n.textContent="Waiting for data..."},m(t,e){l(t,n,e)},p:t,d(t){t&&u(n)}}}function SP(t){let e,n,i,r,s,a,o,p,m,y,g=(t[1]?.find(t[4])?.count??"N/A")+"",_=t[1],x=[];for(let e=0;e<_.length;e+=1)x[e]=kP(xP(t,_,e));return{c(){e=h("select");for(let t=0;t<x.length;t+=1)x[t].c();n=d(),i=h("h2"),r=f("You have selected "),s=f(t[2]),a=f(", they have "),o=f(g),p=f(" Photos!"),void 0===t[2]&&M((()=>t[3].call(e)))},m(u,h){l(u,e,h);for(let t=0;t<x.length;t+=1)x[t]&&x[t].m(e,null);var f,d,g,b;v(e,t[2],!0),l(u,n,h),l(u,i,h),c(i,r),c(i,s),c(i,a),c(i,o),c(i,p),m||(f=e,d="change",g=t[3],f.addEventListener(d,g,b),y=()=>f.removeEventListener(d,g,b),m=!0)},p(t,n){if(2&n){let i;for(_=t[1],i=0;i<_.length;i+=1){const r=xP(t,_,i);x[i]?x[i].p(r,n):(x[i]=kP(r),x[i].c(),x[i].m(e,null))}for(;i<x.length;i+=1)x[i].d(1);x.length=_.length}6&n&&v(e,t[2]),4&n&&b(s,t[2]),6&n&&g!==(g=(t[1]?.find(t[4])?.count??"N/A")+"")&&b(o,g)},d(t){t&&u(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(x,t),t&&u(n),t&&u(i),m=!1,y()}}}function kP(t){let e,n,i,r=t[7].full_name+"";return{c(){e=h("option"),n=f(r),e.__value=i=t[7].full_name,e.value=e.__value},m(t,i){l(t,e,i),c(e,n)},p(t,s){2&s&&r!==(r=t[7].full_name+"")&&b(n,r),2&s&&i!==(i=t[7].full_name)&&(e.__value=i,e.value=e.__value)},d(t){t&&u(e)}}}function IP(t){let e,n,i,r,s,a,o;function c(t,e){return void 0!==t[1]?SP:wP}let f=c(t),p=f(t);return r=new yP({props:{name_count:t[0]}}),a=new _P({props:{olap_table:t[0]?.filter(t[5]),chosen_name:t[2]}}),{c(){e=h("h1"),e.textContent="Apple Photos DB Explorer",n=d(),p.c(),i=d(),V(r.$$.fragment),s=d(),V(a.$$.fragment)},m(t,c){l(t,e,c),l(t,n,c),p.m(t,c),l(t,i,c),U(r,t,c),l(t,s,c),U(a,t,c),o=!0},p(t,[e]){f===(f=c(t))&&p?p.p(t,e):(p.d(1),p=f(t),p&&(p.c(),p.m(i.parentNode,i)));const n={};1&e&&(n.name_count=t[0]),r.$set(n);const s={};5&e&&(s.olap_table=t[0]?.filter(t[5])),4&e&&(s.chosen_name=t[2]),a.$set(s)},i(t){o||(F(r.$$.fragment,t),F(a.$$.fragment,t),o=!0)},o(t){P(r.$$.fragment,t),P(a.$$.fragment,t),o=!1},d(t){t&&u(e),t&&u(n),p.d(t),t&&u(i),R(r,t),t&&u(s),R(a,t)}}}function AP(t,e,n){let i,r;window.myAPI.sendSQL([{name:"photos_per_user",query:"SELECT full_name, gender_estimate, year_month, SUM(count) \n        AS count FROM photo_info_rollup GROUP BY 1,2 ORDER BY count DESC;"},{name:"names_ids",query:'select person_uuid, full_name, sum(count) as count\n                from photo_info_rollup where person_uuid != "no_person"\n                and full_name != "no_name"\n                and full_name != "no_face"\n                group by 1,2 order by count desc;'}]),window.myAPI.receiveSQLResults((t=>{console.log(t),n(0,i=function(t,e){return EO.from(t,e)}(t.photos_per_user)),n(1,r=t.names_ids),console.log(i)}));let s="Waiting...";return[i,r,s,function(){s=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(2,s),n(1,r)},t=>t.full_name===s,t=>t.full_name==s]}const TP=new class extends q{constructor(t){super(),z(this,t,AP,IP,a,{})}}({target:document.body,props:{name:"world"}});module.exports=TP;
//# sourceMappingURL=bundle.js.map
